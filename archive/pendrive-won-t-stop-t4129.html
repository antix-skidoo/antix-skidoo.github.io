<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>pendrive won't stop - antiX oldforums archive</title>
   
<link rel="stylesheet" href="../aaa_style.css">
<script type="text/javascript" src ="../aaa_oldforums.js"></script>
</head>
<body>
<div id="wrap" class="wrap">
<a id="top" class="top-anchor" accesskey="t"></a>

<div id="inner-wrap">
<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks clear-after" role="menubar">
<li class="scroll-breadcrumbs breadcrumbs">
<span class="crumb"><a href="./index.html" accesskey="h" data-navbar-reference="index"><span>antiX - oldforums archive</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./orphaned-posts-f27/index.html"><span>Orphaned Posts</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./releases-old-f44/index.html"><span>Releases (Old)</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./antix-12-edelweispiraten-f47/index.html"><span>antiX-12 Edelwei√üpiraten</span></a></span>
</li>
</ul>

<div id="page-body" class="page-body" role="main">
<div class="postprofile_container postprofile_Left">
<div>
<div class="topictitleheader"><span class="statictopictitle">topic title: </span><span class="topic-titleb"><a href="./pendrive-won-t-stop-t4129.html">pendrive won't stop</a></div>
<div class="pagination">
6 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>

<div class="action-bar bar-top">
</div>
<div class="viewtopic_wrapper">
<div id="p_27607" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile27607">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 4</span></div>

</div>
</div>
<span class="username">patrick013</span>
</dt>
<dd class="profile-joined">Joined: 24 Jan 2013</dd>
</dl>
<div class="postbody">
<div id="post_content27607">
<time datetime="2013-01-24T20:56">posted: 2013-01-24 &nbsp; 20:56</time>
<span class="permalink"><a href="./pendrive-won-t-stop-t4129.html#p27607" title="permalink">#1</a></span>

<div class="content">Lately have been having trouble installing anything to a pendrive, but was<br>
able to fully install antiX-base from an ISO put on a pendrive. The full<br>
install is also to a pendrive.<br>
<br>
Problem is pendrives don't have drive caches and the pendrive is<br>
constantly looking for something, it's always flashing trying to do<br>
something and can't. Can't find what it is looking for.<br>
Otherwise the distro seems to work OK.<br>
<br>
Previously when this happens I resolve it by doing one of these:<br>
<br>
- turn off selinux or msec <br>
- don't use ext4 with flex_bg (big improvement)<br>
- turn off all auto-updates everyplace <br>
- use private browsing <br>
- anything else that appears unnecessary, cron jobs, debug daemons, etc..<br>
<br>
This time I just can't find it. I suspect the kernel is telling the<br>
program to use the drive cache for some operation and the program can't<br>
find it and the pendrive is just running eternally trying to find and do something very minor. <br>
CPU %'s seem normal.<br>
<br>
First question, is there a command one can put in menu.lst that would tell<br>
the kernel we are not using a drive cache today ? <br>
<br>
I have some distros on pendrives that run almost as well as if on a<br>
regular HD. Their system is obviously scaled down somewhat by me but just<br>
can't do things that would need the drive cache extensively.<br>
<br>
THX<br>
<br>
patrick</div>
</div>
</div>

</div>
</div>
<div id="p_27608" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile27608">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,308</span></div>

</div>
</div>
<span class="username">BitJam</span>
</dt>
<dd class="profile-joined">Joined: 31 Aug 2009</dd>
</dl>
<div class="postbody">
<div id="post_content27608">

<time datetime="2013-01-24T23:27">posted: 2013-01-24 &nbsp; 23:27</time>
<span class="permalink"><a href="./pendrive-won-t-stop-t4129.html#p27608" title="permalink">#2</a></span>

<div class="content">The quality (read/write performance) of pen drives varies by orders of magnitude. On a pen drive you will usually be much better off doing a Live (Frugal) install instead of a full install. This is what the Live install is all about. It minimizes the disk (pen drive) usage that you want minimized. IOW, we have already solved this problem and the solution involves doing a Frugal install.<br>
<br>
Edit: Also, how you partition the pen drive can have a HUGE impact on performance. It is very important to align the the partitions (actually the blocks in the filesystems) with the blocks on the physical device. Usually you don't know the blocksizes of the physical device so you just align your partitions to start at locations that are 2^N + 1 where N is reasonably large. The last time I checked, most (all) Linux partitioning tools get it wrong OOTB.</div>
</div>
</div>

</div>
</div>
<div id="p_27609" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile27609">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 4</span></div>

</div>
</div>
<span class="username">patrick013</span>
</dt>
<dd class="profile-joined">Joined: 24 Jan 2013</dd>
</dl>
<div class="postbody">
<div id="post_content27609">

<time datetime="2013-01-25T01:02">posted: 2013-01-25 &nbsp; 01:02</time>
<span class="permalink"><a href="./pendrive-won-t-stop-t4129.html#p27609" title="permalink">#3</a></span>

<div class="content"><blockquote><div><cite>BitJam wrote:</cite> On a pen drive you will usually be much better off doing a Live (Frugal) install instead of a full install.</div></blockquote>
I still need to do a full install. Alot more flexible overall.<br>
It's just recently these eternal searching's started on<br>
the drive. I'm looking for a kernel parameter right now,<br>
cache related. Might be a new USB-3 setting.<br>
<br>
I used to run KDE from a 16GB pendrive formatted XFS<br>
and I can barely tell the difference performance-wise.<br>
Alot better than ext4 because of flex_bg. It's not the <br>
read/write performance here it's the lack of drive cache<br>
and what or how it keeps looking for it.<br>
<br>
Haven't lost faith in them yet.<br>
<br>
Thanks for the response.<br>
<br>
Patrick</div>
</div>
</div>

</div>
</div>
<div id="p_27610" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile27610">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,308</span></div>

</div>
</div>
<span class="username">BitJam</span>
</dt>
<dd class="profile-joined">Joined: 31 Aug 2009</dd>
</dl>
<div class="postbody">
<div id="post_content27610">

<time datetime="2013-01-25T01:50">posted: 2013-01-25 &nbsp; 01:50</time>
<span class="permalink"><a href="./pendrive-won-t-stop-t4129.html#p27610" title="permalink">#4</a></span>

<div class="content"><blockquote><div><cite>patrick013 wrote:</cite>It's not the read/write performance here it's the lack of drive cache</div></blockquote>
Read cache is only limited by your available (free) RAM. You can use the"free -m" command to see what is available (in megabytes). The first number in the"free" column is the size of RAM that is totally unused. This RAM is available for disk caching. The amount being used for cache is in the first row of the"buffers" and"cached" columns.<br>
<br>
For normal drives you can check if write caching is enabled with"hdparm -W /dev/sdX" but that doesn't work on usb drives here. You can do"grep /dev/sdX*" /proc/mounts and see if the"sync" option is there. This option will disable write caching.<br>
<br>
I can't remember ever running a Linux system where disk caching was disabled by default. You always need to do something extra to disable it.<br>
<br>
How do you know the problem is not with the random write access times of the pen drive? Have you benchmarked this recently? The random write access of a pen drive can be orders of magnitude slower than a conventional hard drive (according to Linus Torvalds).<br>
<br>
I've put a lot of time and effort over the years to optimize the performance of antiX on pen drives. It is unfortunate that you don't want to take advantage of any of this work.</div>
</div>
</div>

</div>
</div>
<div id="p_27611" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile27611">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 4</span></div>

</div>
</div>
<span class="username">patrick013</span>
</dt>
<dd class="profile-joined">Joined: 24 Jan 2013</dd>
</dl>
<div class="postbody">
<div id="post_content27611">

<time datetime="2013-01-25T03:04">posted: 2013-01-25 &nbsp; 03:04</time>
<span class="permalink"><a href="./pendrive-won-t-stop-t4129.html#p27611" title="permalink">#5</a></span>

<div class="content"><blockquote><div><cite>BitJam wrote:</cite><blockquote><div><cite>patrick013 wrote:</cite>It's not the read/write <br>
I've put a lot of time and effort over the years to optimize the performance of antiX on pen drives. It is unfortunate that you don't want to take advantage of any of this work.</div></blockquote></div></blockquote>
That's good because I always test distros on the pendrive<br>
before I decide to fully install them. With a full install on the<br>
pendrive. <br>
<br>
I haven't found them that slow for web browsing, music,<br>
word processing, etc.. But they have to use block<br>
descriptors to find files directly not pretend there is a disk buffer<br>
when there isn't. Things like selinux completely wipe them<br>
out.<br>
<br>
It could even be some program trying to upgrade itself, and taking<br>
up the whole pendrive's operation cause there's no buffer<br>
there to let it not do so.<br>
<br>
Need to try to resolve this one. Installs on my machine OK<br>
other than that. Don't need to jump into frugal yet.<br>
<br>
Have a good one.<br>
<br>
Thanks for the response.<br>
<br>
Patrick</div>
</div>
</div>

</div>
</div>
<div id="p_27619" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile27619">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<span> <a href="#" class="username">patrick013</a> </span> 
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 4</span></div>

</div>
</div>
<span class="username">patrick013</span>
</dt>
<dd class="profile-joined">Joined: 24 Jan 2013</dd>
</dl>
<div class="postbody">
<div id="post_content27619">

<time datetime="2013-01-25T21:21">posted: 2013-01-25 &nbsp; 21:21</time>
<span class="permalink"><a href="./pendrive-won-t-stop-t4129.html#p27619" title="permalink">#6</a></span>

<div class="content">Hi,<br>
<br>
I see what you mean about frugal. Very interesting.<br>
The"lean" options especially. I have several 8GB<br>
flash drives I can try that on. You have many working<br>
copies of that no doubt.<br>
<br>
Hate not to be able to resolve my initial problem however.<br>
"lean" gives me a few clues to try, the unetbootin ISO<br>
runs quite well, no problem, and I can add root persistence<br>
to that quite easily it says. Very good idea with unetbootin.<br>
<br>
thanks for the advise.<br>
<br>
patrick</div>
</div>
</div>

</div>
</div>
</div>
<div class="action-bar bar-bottom">

<div class="pagination">
6 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>
</div>
</div>
</div>
<div class="scrollToTopText"><a href="#top">goto top of page</a></div>

</div>
</body></html>
