<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>error while trying to unmount usb drive - antiX oldforums archive</title>
   
<link rel="stylesheet" href="../aaa_style.css">
<script type="text/javascript" src ="../aaa_oldforums.js"></script>
</head>
<body>
<div id="wrap" class="wrap">
<a id="top" class="top-anchor" accesskey="t"></a>

<div id="inner-wrap">
<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks clear-after" role="menubar">
<li class="scroll-breadcrumbs breadcrumbs">
<span class="crumb"><a href="./index.html" accesskey="h" data-navbar-reference="index"><span>antiX - oldforums archive</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./orphaned-posts-f27/index.html"><span>Orphaned Posts</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./releases-old-f44/index.html"><span>Releases (Old)</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./antix-m8-5-marek-edelman-f40/index.html"><span>antiX-M8.5 Marek Edelman</span></a></span>
</li>
</ul>

<div id="page-body" class="page-body" role="main">
<div class="postprofile_container postprofile_Left">
<div>
<div class="topictitleheader"><span class="statictopictitle">topic title: </span><span class="topic-titleb"><a href="./error-while-trying-to-unmount-usb-drive-t2458.html">error while trying to unmount usb drive</a></div>
<div class="pagination">
11 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>

<div class="action-bar bar-top">
</div>
<div class="viewtopic_wrapper">
<div id="p_15889" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile15889">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 47</span></div>

</div>
</div>
<span class="username">metallextrem</span>
</dt>
<dd class="profile-joined">Joined: 07 Apr 2010</dd>
</dl>
<div class="postbody">
<div id="post_content15889">
<time datetime="2010-06-03T09:27">posted: 2010-06-03 &nbsp; 09:27</time>
<span class="permalink"><a href="./error-while-trying-to-unmount-usb-drive-t2458.html#p15889" title="permalink">#1</a></span>

<div class="content">Hi,<br>
Anyone can help me? I cant unmount an USB drive, it give me this error:<br>
<br>
<a href="http://a.imagehost.org/view/0668/capturaerrorunmount" class="postlink"><img src="http://a.imagehost.org/0668/capturaerrorunmount.jpg" class="postimage" alt="Image"></a><br>
<br>
(the window says something like"could not unmount the device" in catalan)<br>
<br>
Thanks!</div>
</div>
</div>

</div>
</div>
<div id="p_15891" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile15891">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,228</span></div>

</div>
</div>
<span class="username">secipolla</span>
</dt>
<dd class="profile-joined">Joined: 15 Jun 2008</dd>
</dl>
<div class="postbody">
<div id="post_content15891">

<time datetime="2010-06-03T12:47">posted: 2010-06-03 &nbsp; 12:47</time>
<span class="permalink"><a href="./error-while-trying-to-unmount-usb-drive-t2458.html#p15891" title="permalink">#2</a></span>

<div class="content">You can unmount it as root
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>umount /media/disk</code></pre></div>
or if you open pcmanfm as root and then unmount the drive.<br>
<br>
It would be good to know the underlying cause for not being able to unmount as a normal user but since I usually don't use thumbdrives, when I need I just unmount it as root.</div>
</div>
</div>

</div>
</div>
<div id="p_15898" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile15898">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 47</span></div>

</div>
</div>
<span class="username">metallextrem</span>
</dt>
<dd class="profile-joined">Joined: 07 Apr 2010</dd>
</dl>
<div class="postbody">
<div id="post_content15898">

<time datetime="2010-06-03T21:27">posted: 2010-06-03 &nbsp; 21:27</time>
<span class="permalink"><a href="./error-while-trying-to-unmount-usb-drive-t2458.html#p15898" title="permalink">#3</a></span>

<div class="content">Its weird that I dont have premission to unmount a drive that I mounted as user. Well, I don't know, I'm really a rookie on this. <br>
Anyway, it's good to know the terminal way (it works, of course)<br>
Thanks!</div>
</div>
</div>

</div>
</div>
<div id="p_15900" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile15900">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,308</span></div>

</div>
</div>
<span class="username">BitJam</span>
</dt>
<dd class="profile-joined">Joined: 31 Aug 2009</dd>
</dl>
<div class="postbody">
<div id="post_content15900">

<time datetime="2010-06-04T02:24">posted: 2010-06-04 &nbsp; 02:24</time>
<span class="permalink"><a href="./error-while-trying-to-unmount-usb-drive-t2458.html#p15900" title="permalink">#4</a></span>

<div class="content">I added a section to the plugdev section of /etc/dbus-1/system.d/hal.conf and that *seems* to have fixed the problem. Unfortunately, I didn't always get the problem even before the patch so I may be fooling myself. The added section is from my Gentoo system which does not suffer from this problem. Here is the patch:<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>--- /etc/dbus-1/system.d/hal.conf.orig    2010-06-03 20:08:09.000000000 -0600
+++ /etc/dbus-1/system.d/hal.conf    2010-06-03 20:08:19.000000000 -0600
@@ -80,6 +80,17 @@
            send_interface="org.freedesktop.Hal.Device.SystemPowerManagement"/&gt;
   &lt;/policy&gt;
   &lt;policy group="plugdev"&gt;
+
+    &lt;allow send_destination="org.freedesktop.Hal"
+           send_interface="org.freedesktop.DBus.Introspectable"/&gt;
+    &lt;allow send_destination="org.freedesktop.Hal"
+           send_interface="org.freedesktop.DBus.Properties" /&gt;
+
+    &lt;allow send_destination="org.freedesktop.Hal"
+           send_interface="org.freedesktop.Hal.Device"/&gt;
+    &lt;allow send_destination="org.freedesktop.Hal"
+           send_interface="org.freedesktop.Hal.Manager"/&gt;
+
     &lt;allow send_destination="org.freedesktop.Hal"
            send_interface="org.freedesktop.Hal.Device.Storage"/&gt;
     &lt;allow send_destination="org.freedesktop.Hal"</code></pre></div>
It looks like the authors of our file intended for everyone to have these permissions (in the"default" section) so specifically giving them to the plugdev group should not create a security problem. I've also uploaded the patched version of hal.conf for those who don't want to bother with patching.<br>
<br>
After changing the file, you have to run the following as root to have the change take effect:<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code># /etc/init.d/dbus restart</code></pre></div>
PLMK if this helps.</div>
</div>
</div>

</div>
</div>
<div id="p_15906" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile15906">
<dt class="has-profile-rank has-avatar avatar-username">
<span class="username">anticapitalista</span>
<div class="avatar-username-inner">
<dd class="detail-title-numposts">Posts: 5,955</dd>
</div>
</dt>
<dd class="profile-rank">Site Admin</dd>
<dd class="profile-joined">Joined: 11 Sep 2007</dd>
</dl>
<div class="postbody">
<div id="post_content15906">

<time datetime="2010-06-04T11:39">posted: 2010-06-04 &nbsp; 11:39</time>
<span class="permalink"><a href="./error-while-trying-to-unmount-usb-drive-t2458.html#p15906" title="permalink">#5</a></span>

<div class="content">That also seems to solve the intermittent problem I had with pcmanfm. (I use rox and there was no problem).<br>
The problem only appeared on my box with sticks using fat.</div>
</div>
</div>

</div>
</div>
<div id="p_15911" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile15911">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,308</span></div>

</div>
</div>
<span class="username">BitJam</span>
</dt>
<dd class="profile-joined">Joined: 31 Aug 2009</dd>
</dl>
<div class="postbody">
<div id="post_content15911">

<time datetime="2010-06-04T23:34">posted: 2010-06-04 &nbsp; 23:34</time>
<span class="permalink"><a href="./error-while-trying-to-unmount-usb-drive-t2458.html#p15911" title="permalink">#6</a></span>

<div class="content">I think there is still a problem. When I boot antiX with usb sticks plugged into the computer then antiX mounts all the partitions on all the sticks automatically. I believe root is doing that mounting because a normal user can't unmount partitions that were mounted at boot time.<br>
<br>
IMO, the proper solution is to turn off automounting at boot time, especially if a normal user is unable to unmount these partitions. But I don't know how to do this.</div>
</div>
</div>

</div>
</div>
<div id="p_16036" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile16036">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 47</span></div>

</div>
</div>
<span class="username">metallextrem</span>
</dt>
<dd class="profile-joined">Joined: 07 Apr 2010</dd>
</dl>
<div class="postbody">
<div id="post_content16036">

<time datetime="2010-06-10T09:06">posted: 2010-06-10 &nbsp; 09:06</time>
<span class="permalink"><a href="./error-while-trying-to-unmount-usb-drive-t2458.html#p16036" title="permalink">#7</a></span>

<div class="content">Thanks a lot for the interest. I am too rookie on gnu/linux in general to get the BitJam solution. <br>
<br>
By now I finally take the suggestion from anticapitalista and use ROX-Filer (instead of terminal) to unmount USB sticks on /media/disk. I think it's the best way for me now and it just works. I don't know why PCMan fails on this... <br>
<br>
I just suggest the AntiX team to solve this little problem in the next version of AntiX.<br>
<br>
Thanks again!</div>
</div>
</div>

</div>
</div>
<div id="p_16041" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile16041">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,228</span></div>

</div>
</div>
<span class="username">secipolla</span>
</dt>
<dd class="profile-joined">Joined: 15 Jun 2008</dd>
</dl>
<div class="postbody">
<div id="post_content16041">

<time datetime="2010-06-10T12:10">posted: 2010-06-10 &nbsp; 12:10</time>
<span class="permalink"><a href="./error-while-trying-to-unmount-usb-drive-t2458.html#p16041" title="permalink">#8</a></span>

<div class="content">PCManFM in the testing repos, and so in antiX, is the older version. There's already a new, re-written one that works differently and is in rapid development. By the time antiX have a next version this will be resolved or the problem will be different <span class="emoticon"> __{{emoticon}}__ </span><br>
Anyway, we can make sure we test this before the next version comes out. For antiX 8.5 this wasn't possible since this version of PCManFM wasn't being developed anymore and the new version hadn't been launched yet.</div>
</div>
</div>

</div>
</div>
<div id="p_16070" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile16070">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 47</span></div>

</div>
</div>
<span class="username">metallextrem</span>
</dt>
<dd class="profile-joined">Joined: 07 Apr 2010</dd>
</dl>
<div class="postbody">
<div id="post_content16070">

<time datetime="2010-06-11T07:46">posted: 2010-06-11 &nbsp; 07:46</time>
<span class="permalink"><a href="./error-while-trying-to-unmount-usb-drive-t2458.html#p16070" title="permalink">#9</a></span>

<div class="content">Thanks for the clarification secipolla. You did a great job, anyway. AntiX is the exact distro I was looking for (ultralight, powerful, stable...) so I will keep it until the next version.<br>
Cheers! <span class="emoticon"> __{{emoticon}}__ </span></div>
</div>
</div>

</div>
</div>
<div id="p_16074" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile16074">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,228</span></div>

</div>
</div>
<span class="username">secipolla</span>
</dt>
<dd class="profile-joined">Joined: 15 Jun 2008</dd>
</dl>
<div class="postbody">
<div id="post_content16074">

<time datetime="2010-06-11T12:21">posted: 2010-06-11 &nbsp; 12:21</time>
<span class="permalink"><a href="./error-while-trying-to-unmount-usb-drive-t2458.html#p16074" title="permalink">#10</a></span>

<div class="content">Then you'll be among the ones who make sure everything is in the best shape before the launch <span class="emoticon"> __{{emoticon}}__ </span></div>
</div>
</div>

</div>
</div>
<div id="p_16264" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile16264">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
 <div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 47</span></div>

</div>
</div>
<span class="username">metallextrem</span>
</dt>
<dd class="profile-joined">Joined: 07 Apr 2010</dd>
</dl>
<div class="postbody">
<div id="post_content16264">

<time datetime="2010-06-20T14:22">posted: 2010-06-20 &nbsp; 14:22</time>
<span class="permalink"><a href="./error-while-trying-to-unmount-usb-drive-t2458.html#p16264" title="permalink">#11</a></span>

<div class="content"><blockquote><div><cite>secipolla wrote:</cite>Then you'll be among the ones who make sure everything is in the best shape before the launch <span class="emoticon"> __{{emoticon}}__ </span></div></blockquote>
Well, I will do my best if you need me... from my"rookie" user point of view <span class="emoticon"> __{{emoticon}}__ </span></div>
</div>
</div>

</div>
</div>
</div>
<div class="action-bar bar-bottom">

<div class="pagination">
11 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>
</div>
</div>
</div>
<div class="scrollToTopText"><a href="#top">goto top of page</a></div>

</div>
</body></html>
