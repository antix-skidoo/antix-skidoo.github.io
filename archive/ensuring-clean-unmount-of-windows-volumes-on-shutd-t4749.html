<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>Ensuring clean unmount of Windows volumes on shutdown? - antiX oldforums archive</title>
   
<link rel="stylesheet" href="../aaa_style.css">
<script type="text/javascript" src ="../aaa_oldforums.js"></script>
</head>
<body>
<div id="wrap" class="wrap">
<a id="top" class="top-anchor" accesskey="t"></a>

<div id="inner-wrap">
<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks clear-after" role="menubar">
<li class="scroll-breadcrumbs breadcrumbs">
<span class="crumb"><a href="./index.html" accesskey="h" data-navbar-reference="index"><span>antiX - oldforums archive</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./orphaned-posts-f27/index.html"><span>Orphaned Posts</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./releases-old-f44/index.html"><span>Releases (Old)</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./antix-13-luddite-f49/index.html"><span>antiX-13 Luddite</span></a></span>
</li>
</ul>

<div id="page-body" class="page-body" role="main">
<div class="postprofile_container postprofile_Left">
<div>
<div class="topictitleheader"><span class="statictopictitle">topic title: </span><span class="topic-titleb"><a href="./ensuring-clean-unmount-of-windows-volumes-on-shutd-t4749.html">Ensuring clean unmount of Windows volumes on shutdown?</a></div>
<div class="pagination">
11 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>

<div class="action-bar bar-top">
</div>
<div class="viewtopic_wrapper">
<div id="p_32470" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile32470">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 347</span></div>

</div>
</div>
<span class="username">Silent Observer</span>
</dt>
<dd class="profile-joined">Joined: 08 Aug 2013</dd>
</dl>
<div class="postbody">
<div id="post_content32470">
<time datetime="2013-12-22T18:55">posted: 2013-12-22 &nbsp; 18:55</time>
<span class="permalink"><a href="./ensuring-clean-unmount-of-windows-volumes-on-shutd-t4749.html#p32470" title="permalink">#1</a></span>

<div class="content">My laptop (see signature below for basic specs) has a number of data files, especially music, on the Windows volumes (FAT32) that I'd like to be able to use from antiX, but there isn't room in the antiX volume to move or copy them there.  I've found, however, that if I mount the Windows volumes via Rox by browsing to them, they don't get cleanly unmounted at system shutdown, resulting in a need to run fsck.vfat, and sometimes then boot Win98 and run Scandisk before I can open them again. I'm not ready to completely wipe the Windows volumes (which would obviously give plenty of space), though that's probably the long term endpoint; meantime, how can I ensure those volumes get cleanly unmounted on system shutdown -- add them manually to fstab? Or something else that's easier and/or more dependable?</div>
</div>
</div>

</div>
</div>
<div id="p_32480" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile32480">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 850</span></div>

</div>
</div>
<span class="username">fatmac</span>
</dt>
<dd class="profile-joined">Joined: 26 Jul 2012</dd>
</dl>
<div class="postbody">
<div id="post_content32480">

<time datetime="2013-12-23T09:26">posted: 2013-12-23 &nbsp; 09:26</time>
<span class="permalink"><a href="./ensuring-clean-unmount-of-windows-volumes-on-shutd-t4749.html#p32480" title="permalink">#2</a></span>

<div class="content">If you always use them, I would add them in fstab, it worked for me, (long time since I've used MS), but I do sometimes use fat32 partitions. The system should automatically unmount the drives before shutting down if you do that.</div>
</div>
</div>

</div>
</div>
<div id="p_32482" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile32482">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content32482">

<time datetime="2013-12-23T13:35">posted: 2013-12-23 &nbsp; 13:35</time>
<span class="permalink"><a href="./ensuring-clean-unmount-of-windows-volumes-on-shutd-t4749.html#p32482" title="permalink">#3</a></span>

<div class="content">I second the fstab option. I run all my data on a separate partition so that I can access it from windows or any linux that I happen to have installed. If you list the part. in fstab, you can also have the part. automount at login, which is handy if you use the shared part. for the location of something like dropbox or your music collection.</div>
<div class="postcontent_footer">
 
</div>
</div>
</div>

</div>
</div>
<div id="p_32484" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile32484">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 667</span></div>

</div>
</div>
<span class="username">jdmeaux1952</span>
</dt>
<dd class="profile-joined">Joined: 01 Nov 2013</dd>
</dl>
<div class="postbody">
<div id="post_content32484">

<time datetime="2013-12-23T15:18">posted: 2013-12-23 &nbsp; 15:18</time>
<span class="permalink"><a href="./ensuring-clean-unmount-of-windows-volumes-on-shutd-t4749.html#p32484" title="permalink">#4</a></span>

<div class="content">An alternative would be to copy them all to a usb and that way you could use the usb for either OS.</div>
</div>
</div>

</div>
</div>
<div id="p_32487" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile32487">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 347</span></div>

</div>
</div>
<span class="username">Silent Observer</span>
</dt>
<dd class="profile-joined">Joined: 08 Aug 2013</dd>
</dl>
<div class="postbody">
<div id="post_content32487">

<time datetime="2013-12-23T15:56">posted: 2013-12-23 &nbsp; 15:56</time>
<span class="permalink"><a href="./ensuring-clean-unmount-of-windows-volumes-on-shutd-t4749.html#p32487" title="permalink">#5</a></span>

<div class="content"><blockquote><div><cite>jdmeaux1952 wrote:</cite>An alternative would be to copy them all to a usb and that way you could use the usb for either OS.</div></blockquote>
Win98 can't read a USB storage device without a driver that I never installed because I didn't own any USB keys until long after Win98 was sunsetted -- and my experience has been that on the USB keys that I use to move data between two antiX and one MEPIS system, I need root access to read, never mind write (I'm not certain why, but I suspect it's ownership; the key I use for this is formatted ext2, and probably wouldn't do that if it were FAT32). Better to add the FAT32 volumes to fstab so they automount and auto-unmount. I'll be back to ask questions about fstab if I run into trouble... <span class="emoticon"> __{{emoticon}}__ </span></div>
</div>
</div>

</div>
</div>
<div id="p_32488" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile32488">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content32488">

<time datetime="2013-12-23T16:00">posted: 2013-12-23 &nbsp; 16:00</time>
<span class="permalink"><a href="./ensuring-clean-unmount-of-windows-volumes-on-shutd-t4749.html#p32488" title="permalink">#6</a></span>

<div class="content">In case you need it, here's how my fstab is set for my fat32 partition.<br>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>UUID=AC54-0F79 /media/sda6 vfat auto,users,gid=users,dmask=002,fmask=113,relatime 0 0</code></pre></div></div>
</div>
</div>

</div>
</div>
<div id="p_32490" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile32490">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 667</span></div>

</div>
</div>
<span class="username">jdmeaux1952</span>
</dt>
<dd class="profile-joined">Joined: 01 Nov 2013</dd>
</dl>
<div class="postbody">
<div id="post_content32490">

<time datetime="2013-12-23T16:19">posted: 2013-12-23 &nbsp; 16:19</time>
<span class="permalink"><a href="./ensuring-clean-unmount-of-windows-volumes-on-shutd-t4749.html#p32490" title="permalink">#7</a></span>

<div class="content">Thanks for clarifying that.</div>
</div>
</div>

</div>
</div>
<div id="p_32492" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile32492">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 347</span></div>

</div>
</div>
<span class="username">Silent Observer</span>
</dt>
<dd class="profile-joined">Joined: 08 Aug 2013</dd>
</dl>
<div class="postbody">
<div id="post_content32492">

<time datetime="2013-12-23T16:39">posted: 2013-12-23 &nbsp; 16:39</time>
<span class="permalink"><a href="./ensuring-clean-unmount-of-windows-volumes-on-shutd-t4749.html#p32492" title="permalink">#8</a></span>

<div class="content">I found that those volumes were already in fstab, but with"noauto" instead of"auto", otherwise just like yours aside from the UUID -- changed to"auto", rebooted, and they automounted. I presume that, like the antiX volume, they'll then auto-unmount during shutdown and I'll only have to worry about unclean unmounts when I have a system lockup that requires the power switch to back out (happens if I overload the machine and get too deep in 100% cpu and queued tasks -- there comes a point where no reasonable amount of waiting will let it clear up) -- that results in a forced deep check and forced reboot even for the antiX volume, so it'll be a clue that I need to check the Win98 volumes as well.</div>
</div>
</div>

</div>
</div>
<div id="p_32493" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile32493">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 4,164</span></div>

</div>
</div>
<span class="username">rokytnji</span>
</dt>
<dd class="profile-joined">Joined: 20 Feb 2009</dd>
</dl>
<div class="postbody">
<div id="post_content32493">

<time datetime="2013-12-23T17:33">posted: 2013-12-23 &nbsp; 17:33</time>
<span class="permalink"><a href="./ensuring-clean-unmount-of-windows-volumes-on-shutd-t4749.html#p32493" title="permalink">#9</a></span>

<div class="content">Isn't windows 98 fat32 which in itself is problematic when shutting down during unclean shutdowns?<br>
<br>
My / etc/fstab with a IBM Windows recovery partition that I have never used or get near and touch. I am afeared of it. . I had to do some AntiX kung foo after I installed my 320 gig drive after this AntiX install which is older than the drive insertion.<br>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>$ cat / etc/fstab
# Pluggable devices are handled by uDev, they are not in fstab
UUID=676d70d7-1c41-449b-be0f-2e04df874d86  / auto defaults,noatime 1 1
proc /proc proc defaults 0 0
devpts /dev/pts devpts mode=0622 0 0
UUID=343942EB578098A9 /media/sda1 ntfs-3g noauto,users,noexec,uid=1000,gid=users,dmask=002,fmask=113,relatime 0 0
UUID=676d70d7-1c41-449b-be0f-2e04df874d86 / media/sdb3 ext4 auto,users,exec,relatime 0 0
UUID=a70b8580-b61d-4732-8109-b6f883ab58de swap swap sw,pri=1 0 0
UUID=454f0f9b-3885-4a59-a3d8-eefe9bef04e6 / media/sdb6 ext4 auto,users,exec,relatime 0 0
UUID=ee02c86b-ffa4-4a1f-8ecf-255eef02e8c7 / media/sdb7 ext4 auto,users,exec,relatime 0 0
/dev/cdrom /media/cdrom udf,iso9660 noauto,users,exec,ro 0 0
/dev/sr0 /media/cdrom udf,iso9660 noauto,users,exec,ro 0 0
# Added by antiX
/dev/sda1        /media/sda1      ntfs-3g    noauto,noexec,uid=1000,gid=users,dmask=002,fmask=113,users  0 0

#Added by ROK 320gig 2nd Hard Drive /dev/sda2
UUID=34d53583-6192-4242-aabc-5f8fa352042b     /media/data     ext4    auto,exec,users,rw     0 0
</code></pre></div>
If it helps it helps. If not. Oh well. I use blkid to set up my fstab. My orginal was not even close after I inserted the 320gig drive. My system became unbootable because of <br>
"boot used to sit on /dev/sda but has been moved to /dev/sdb. edit fstab to reflect changes"<br>
<br>
It was fun and games after that. I even deleted original because it was such a mess and started over by hand.<br>
<br>
/dev/sda used to be the original IBM drive the computer came with. Then Things went to hell after the new drive insertion.<br>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code># blkid
/dev/sdb1: UUID="343942EB578098A9" TYPE="ntfs" 
/dev/sdb3: UUID="676d70d7-1c41-449b-be0f-2e04df874d86" TYPE="ext4" 
/dev/sdb5: UUID="a70b8580-b61d-4732-8109-b6f883ab58de" TYPE="swap" 
/dev/sdb6: UUID="454f0f9b-3885-4a59-a3d8-eefe9bef04e6" TYPE="ext4" 
/dev/sdb7: UUID="ee02c86b-ffa4-4a1f-8ecf-255eef02e8c7" TYPE="ext4" 
/dev/sda2: LABEL="/data" UUID="34d53583-6192-4242-aabc-5f8fa352042b" TYPE="ext4"</code></pre></div>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code> fdisk -l

Disk /dev/sda: 320 GB, 320070320640 bytes
255 heads, 63 sectors/track, 38913 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System 
/dev/sda2               1       38914   312568672   83  Linux
Disk /dev/sdb: 80 GB, 80031974400 bytes
255 heads, 63 sectors/track, 9730 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System 
/dev/sdb1   *           1          95      763056    7  HPFS/NTFS
/dev/sdb3              95        1352    10096852   83  Linux
/dev/sdb2            1352        9730    67296285    5  Extended/dev/sdb6            1352        3882    20322225   83  Linux
/dev/sdb7            3883        9332    43769092   83  Linux
/dev/sdb5            9333        9730     3188902   82  Linux swap
</code></pre></div>
P.S. This is the first I have ever said about it. I still have to check on my AntiX 11 new 160GIG IDE new secondary drive insertion also on the Emachine Computer.<br>
I am not trying to hijack this thread either as I can handle my own issues<strong> usually</strong> <span class="emoticon"> __{{emoticon}}__ </span></div>
</div>
</div>

</div>
</div>
<div id="p_32499" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile32499">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 850</span></div>

</div>
</div>
<span class="username">fatmac</span>
</dt>
<dd class="profile-joined">Joined: 26 Jul 2012</dd>
</dl>
<div class="postbody">
<div id="post_content32499">

<time datetime="2013-12-24T12:51">posted: 2013-12-24 &nbsp; 12:51</time>
<span class="permalink"><a href="./ensuring-clean-unmount-of-windows-volumes-on-shutd-t4749.html#p32499" title="permalink">#10</a></span>

<div class="content">Reference drives - there is usually resettable pins on the rear that let it act as 'Primary', 'Secondary', or 'Cable Select' - if your old drive was 'primary' &amp; your new drive is 'secondary' it could possily mess with your fstab. Check your boot drive is 'primary' &amp; other is 'secondary'.<br>
<br>
When mounting drives with fstab you could try using 'defaults' in place of 'noauto'.<br>
If you find that your user can't write to the drive, you will need to alter the permissions on the drives mount point.<br>
<br>
Hope that is of some help.</div>
</div>
</div>

</div>
</div>
<div id="p_32536" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile32536">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 347</span></div>

</div>
</div>
<span class="username">Silent Observer</span>
</dt>
<dd class="profile-joined">Joined: 08 Aug 2013</dd>
</dl>
<div class="postbody">
<div id="post_content32536">

<time datetime="2013-12-26T16:49">posted: 2013-12-26 &nbsp; 16:49</time>
<span class="permalink"><a href="./ensuring-clean-unmount-of-windows-volumes-on-shutd-t4749.html#p32536" title="permalink">#11</a></span>

<div class="content">There's only one user account on my laptop -- I'm the only one likely to haul it anywhere, and if that changes I can add a user when needed. It's currently still sitting by the bed acting as a stereo, but it's a better stereo with a wifi connection and ability to access USB storage than it was when it depended only on what MP3 files would fit on the original 4 GB hard disk along with Win98 and all the leftovers from when it was getting regular use.<br>
<br>
Anyway, changing"noauto" to"auto" seems to have resolved the issue; all the Win98/fat32 volumes now mount at startup and, after a system lockup the other day, they seem to be okay (though they hadn't, as far as I can recall, been accessed during that session). At the least, if I do browse them, they now appear to correctly unmount during a clean shutdown.</div>
</div>
</div>

</div>
</div>
</div>
<div class="action-bar bar-bottom">

<div class="pagination">
11 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>
</div>
</div>
</div>
<div class="scrollToTopText"><a href="#top">goto top of page</a></div>

</div>
</body></html>
