<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>How to get battery warnings?  (can I use acpi?) - antiX oldforums archive</title>
   
<link rel="stylesheet" href="../aaa_style.css">
<script type="text/javascript" src ="../aaa_oldforums.js"></script>
</head>
<body>
<div id="wrap" class="wrap">
<a id="top" class="top-anchor" accesskey="t"></a>

<div id="inner-wrap">
<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks clear-after" role="menubar">
<li class="scroll-breadcrumbs breadcrumbs">
<span class="crumb"><a href="./index.html" accesskey="h" data-navbar-reference="index"><span>antiX - oldforums archive</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./new-users-f22/index.html"><span>New Users</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./new-users-general-questions-f16/index.html"><span>New Users &amp; General Questions</span></a></span>
</li>
</ul>

<div id="page-body" class="page-body" role="main">
<div class="postprofile_container postprofile_Left">
<div>
<div class="topictitleheader"><span class="statictopictitle">topic title: </span><span class="topic-titleb"><a href="./how-to-get-battery-warnings-can-i-use-acpi-t3553.html">How to get battery warnings? (can I use acpi?)</a></div>
<div class="pagination">
6 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>


<div class="viewtopic_wrapper">
<div id="p_23478" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile23478">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 19</span></div>

</div>
</div>
<span class="username">Tanga</span>
</dt>
<dd class="profile-joined">Joined: 21 Jan 2012</dd>
</dl>
<div class="postbody">
<div id="post_content23478">
<time datetime="2012-01-29T06:19">posted: 2012-01-29 &nbsp; 06:19</time>
<span class="permalink"><a href="./how-to-get-battery-warnings-can-i-use-acpi-t3553.html#p23478" title="permalink">#1</a></span>

<div class="content">Hi,<br>
<br>
Conky reads my battery amount okay, using the command:<br>
${execi 10 (acpi -b | awk)}${voffset 1}${battery_bar 6, 162 BAT1}<br>
(so my battery isn't the default - BAT0) and the graph it displays seems accurate. I only have about 20 minutes or so of battery, and sometimes I forget I'm not plugged in. I would love a warning beep when the battery level gets to 10% and for the computer to shutdown at 5%. I am a complete noob, so if there is scripting I'll probably need obvious stuff spelt out to me.<br>
<br>
Thanks again for all your help folks,<br>
<br>
Tamsyn</div>
<div class="hide">
 </div>
</div>
</div>

</div>
</div>
<div id="p_23480" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile23480">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">

<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 4,164</span></div>

</div>
</div>
<span class="username">rokytnji</span>
</dt>
<dd class="profile-joined">Joined: 20 Feb 2009</dd>
</dl>
<div class="postbody">
<div id="post_content23480">

<time datetime="2012-01-29T14:14">posted: 2012-01-29 &nbsp; 14:14</time>
<span class="permalink"><a href="./how-to-get-battery-warnings-can-i-use-acpi-t3553.html#p23480" title="permalink">#2</a></span>

<div class="content">Try<br>
<br>

<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://lists.debian.org/debian-user/2009/03/msg02524.html"<br>linktext was:"http://lists.debian.org/debian-user/200 ... 02524.html"<br>====================================<br>
<br>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Biker:~$ apt-cache policy beep
beep:
  Installed: (none)
  Candidate: 1.3-1
  Version table:
     1.3-1 0
        500 http://ftp.us.debian.org/debian/ testing/main i386 Packages
</code></pre></div></div>
</div>
</div>

</div>
</div>
<div id="p_23481" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile23481">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 4,164</span></div>

</div>
</div>
<span class="username">rokytnji</span>
</dt>
<dd class="profile-joined">Joined: 20 Feb 2009</dd>
</dl>
<div class="postbody">
<div id="post_content23481">

<time datetime="2012-01-29T14:42">posted: 2012-01-29 &nbsp; 14:42</time>
<span class="permalink"><a href="./how-to-get-battery-warnings-can-i-use-acpi-t3553.html#p23481" title="permalink">#3</a></span>

<div class="content">Simple extra way to monitor battery in Icewm Taskbar is in <br>
<br>
Control Center&gt;Edit Icewm Settings&gt; preferences<br>
<br>
on line 65 change TaskBarShowAPMStatus=0 to <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>TaskBarShowAPMStatus=1</code></pre></div>
then logout and then log back into icewm. AS far as setting up Beep in APM. I have no clue.<br>
<br>
You might want to look through your bios settings for setting up advanced power management =(apm) so the beep comes from bios setting.</div>
</div>
</div>

</div>
</div>
<div id="p_23482" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile23482">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,062</span></div>

</div>
</div>
<span class="username">Dave</span>
</dt>
<dd class="profile-joined">Joined: 20 Jan 2010</dd>
</dl>
<div class="postbody">
<div id="post_content23482">

<time datetime="2012-01-29T16:23">posted: 2012-01-29 &nbsp; 16:23</time>
<span class="permalink"><a href="./how-to-get-battery-warnings-can-i-use-acpi-t3553.html#p23482" title="permalink">#4</a></span>

<div class="content">you can make conky read the battery percent value, then compare it to a set value (10% in your case). Then when the battery percentage reading from conky is equal to or less than your set value it will execute the warning. I used notify-send for this. The only problem with this is that it may take a few minutes for the warning to stop showing up. This is because it takes a while for the battery to get charged enough.<br>
<br>
You can find the code I used here<br>
post18388.html#p18388<br>
<br>
EDIT <br>
after you extract the tarball you will need to show hidden files for the .conkyrc</div>
</div>
</div>

</div>
</div>
<div id="p_23485" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile23485">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 19</span></div>

</div>
</div>
<span class="username">Tanga</span>
</dt>
<dd class="profile-joined">Joined: 21 Jan 2012</dd>
</dl>
<div class="postbody">
<div id="post_content23485">

<time datetime="2012-01-30T05:56">posted: 2012-01-30 &nbsp; 05:56</time>
<span class="permalink"><a href="./how-to-get-battery-warnings-can-i-use-acpi-t3553.html#p23485" title="permalink">#5</a></span>

<div class="content">Thanks guys. I found the BIOS setting, down in power management. It doesn't start until things are pretty critical, but if I'm on the computer then I have plenty of time. I'll need to work out how to suspend or shutdown after 30 seconds or so of that though - still trawling through websites, but the layout of IceWM and/or Antix are different enough to what I've found for me and my very basic linux knowledge to be unable to adapt. Roky, that script looks handy, but I don't understand enough to get it working. A bit more detail as it applies to IceWM? I don't have battery_monitor in any of my acpi folders. <span class="emoticon"> __{{emoticon}}__ </span><br>
<br>
Dave, I tried your conky addition. As far as I can work out this is the relevant bit:<br>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>${if_existing /sys/class/power_supply/AC/online 1}
${voffset -15}${color 4afb04}${font Webdings:size=15}~${font} ${color cccccc}Charging: ${color 4afb04}${battery_bar 10,107 BAT1}  ${color 4afb04}${battery_percent BAT1}%${voffset -15}
${else}${if_match ${battery_percent BAT1} &gt; 50}
${voffset -15}${color 4afb04}${font Webdings:size=15}~${font} ${color cccccc}Battery: ${color 4afb04}${battery_bar 10,107 BAT1}  ${color 4afb04}${battery_percent BAT1}%${voffset -15}
${else}${if_match ${battery_percent BAT1} &gt; 15}
${voffset -15}${color fc8208}${font Webdings:size=15}~${font} ${color cccccc}Battery: ${color fc8208}${battery_bar 10,107 BAT1}  ${color fc8208}${battery_percent BAT1}%${voffset -15}
${else}${color fd0000}${font Webdings:size=15}~${font} ${color}Battery: ${color fd0000}${battery_bar 10,107 BAT1}  ${color fd0000}${battery_percent BAT1}%${endif}${endif}${endif}
${color 4afb04}${font webdings:size=15}q${font}${color cccccc}Sound ${if_mixer_mute}${font size:12}${color red}Muted ! ${mixerbar Master 10,91}${font}${else}${color cccccc} Level:  ${mixerbar Master 10,110}${endif}
${if_existing /sys/class/power_supply/AC/online 0}
${if_match ${battery_percent BAT1} &lt;= 15}${execi 20 notify-send -t 10000 -i /usr/share/icons/gTangish-2.0a1/48x48/status/battery-caution.png"Battery Low""Battery Level is 15%                               Suggesting to save your work, or plug in the computer."}${endif}${endif}
${if_match ${acpitemp} &gt;= 70}${execi 20 notify-send -t 10000 -i /usr/share/icons/gTangish-2.0a1/48x48/status/dialog-warning.png"Tempurature High""Shut Down will occur if Tempurature rises. Suggesting you save your work"}${endif}
${if_existing /sys/class/power_supply/AC/online 0}
${if_match ${battery_percent BAT1} &lt;= 5}${execi 40 lowbattery}${endif}${endif}
${if_match ${acpitemp} &gt;= 75}${execi 40 hightemp}${endif}
</code></pre></div>
I also copied across the high temp, and low battery scripts. I'm not sure if that is what I should be doing? I wouldn't mind running espeak"low battery" or even"I need more power Cap'n" <span class="emoticon"> __{{emoticon}}__ </span> - though how to give text to speech a Scottish accent I don't know. I'm sure there is a wav file somewhere I can play. <span class="emoticon"> __{{emoticon}}__ </span><br>
<br>
But first to get the code to work. There's something I'm doing wrong though, as it breaks conky.</div>
</div>
</div>

</div>
</div>
<div id="p_23494" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile23494">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,062</span></div>

</div>
</div>
<span class="username">Dave</span>
</dt>
<dd class="profile-joined">Joined: 20 Jan 2010</dd>
</dl>
<div class="postbody">
<div id="post_content23494">

<time datetime="2012-02-01T02:40">posted: 2012-02-01 &nbsp; 02:40</time>
<span class="permalink"><a href="./how-to-get-battery-warnings-can-i-use-acpi-t3553.html#p23494" title="permalink">#6</a></span>

<div class="content">Yep that is the right part, remove the lines related to sound / tempurature, to make your troubleshooting alot easier. It is probably the referances to /sys/powersupply are not 100% there, the file path will need to be tweaked to match your system layout. Just run thunar in /sys and do a little exploration for the online file. Also on some systems the 1 may mean online or the 0 may mean online. once it is working its easy enough to figure out, just plug it in and see if it registers as online.</div>
</div>
</div>

</div>
</div>
</div>
<div class="action-bar bar-bottom">

<div class="pagination">
6 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>
</div>
</div>
</div>
<div class="scrollToTopText"><a href="#top">goto top of page</a></div>

</div>
</body></html>
