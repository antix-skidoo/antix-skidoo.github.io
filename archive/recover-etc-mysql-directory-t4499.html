<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>Recover /etc/mysql directory - antiX oldforums archive</title>
   
<link rel="stylesheet" href="../aaa_style.css">
<script type="text/javascript" src ="../aaa_oldforums.js"></script>
</head>
<body>
<div id="wrap" class="wrap">
<a id="top" class="top-anchor" accesskey="t"></a>

<div id="inner-wrap">
<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks clear-after" role="menubar">
<li class="scroll-breadcrumbs breadcrumbs">
<span class="crumb"><a href="./index.html" accesskey="h" data-navbar-reference="index"><span>antiX - oldforums archive</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./orphaned-posts-f27/index.html"><span>Orphaned Posts</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./releases-old-f44/index.html"><span>Releases (Old)</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./antix-12-edelweispiraten-f47/index.html"><span>antiX-12 Edelweißpiraten</span></a></span>
</li>
</ul>

<div id="page-body" class="page-body" role="main">
<div class="postprofile_container postprofile_Left">
<div>
<div class="topictitleheader"><span class="statictopictitle">topic title: </span><span class="topic-titleb"><a href="./recover-etc-mysql-directory-t4499.html">Recover /etc/mysql directory</a></div>
<div class="pagination">
7 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>

<div class="action-bar bar-top">
</div>
<div class="viewtopic_wrapper">
<div id="p_30406" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile30406">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 35</span></div>

</div>
</div>
<span class="username">antix_forum_account</span>
</dt>
<dd class="profile-joined">Joined: 01 Feb 2013</dd>
</dl>
<div class="postbody">
<div id="post_content30406">
<time datetime="2013-07-19T20:27">posted: 2013-07-19 &nbsp; 20:27</time>
<span class="permalink"><a href="./recover-etc-mysql-directory-t4499.html#p30406" title="permalink">#1</a></span>

<div class="content">Dear Forum,<br>
<br>
I've been tweaking my Apache/PHP/... setup.<br>
<br>
In the process, I made the following mistake:<br>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>sudo rm -rf /etc/apache2 /etc/mysql /etc/php5/</code></pre></div>
This is giving me some headaches. Among other things, I'm getting thefollowing messages when starting mysql...<br>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>~% sudo service mysql start
Starting MySQL database server: mysqld ..
/etc/init.d/mysql: line 120: /etc/mysql/debian-start: No such file or directory</code></pre></div>
How can I recover the lost <span style="color: #008000">/etc/mysql</span> directory?<br>
<br>
Thanks!!! ☺</div>
</div>
</div>

</div>
</div>
<div id="p_30407" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile30407">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,308</span></div>

</div>
</div>
<span class="username">BitJam</span>
</dt>
<dd class="profile-joined">Joined: 31 Aug 2009</dd>
</dl>
<div class="postbody">
<div id="post_content30407">

<time datetime="2013-07-19T20:57">posted: 2013-07-19 &nbsp; 20:57</time>
<span class="permalink"><a href="./recover-etc-mysql-directory-t4499.html#p30407" title="permalink">#2</a></span>

<div class="content">I did a 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"https://encrypted.google.com/search?q=recover+the+lost+/etc/mysql+directory"<br>linktext was:"Google(recover the lost /etc/mysql directory)"<br>====================================<br>
 and the 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"https://answers.launchpad.net/ubuntu/+question/24"<br>linktext was:"first hit"<br>====================================<br>
 had the answer:<blockquote class="uncited"><div> found how to fix it, removing it with the --purge:<br>
<br>
sudo apt-get remove --purge mysql-server<br>
and<br>
sudo apt-get install mysql-server</div></blockquote></div>
</div>
</div>

</div>
</div>
<div id="p_30409" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile30409">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 35</span></div>

</div>
</div>
<span class="username">antix_forum_account</span>
</dt>
<dd class="profile-joined">Joined: 01 Feb 2013</dd>
</dl>
<div class="postbody">
<div id="post_content30409">

<time datetime="2013-07-19T22:26">posted: 2013-07-19 &nbsp; 22:26</time>
<span class="permalink"><a href="./recover-etc-mysql-directory-t4499.html#p30409" title="permalink">#3</a></span>

<div class="content">Dear BitJam, thanks for your reply!!!! ☺<br>
<br>
No, alas this doesn't work<br>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>~% sudo apt-get remove --purge mysql-server
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following packages were automatically installed and are no longer required:
  libaio1 mysql-server-5.5 mysql-server-core-5.5
Use 'apt-get autoremove' to remove them.
The following packages will be REMOVED:
  mysql-server*
0 upgraded, 0 newly installed, 1 to remove and 1 not upgraded.
After this operation, 130 kB disk space will be freed.
Do you want to continue [Y/n]?
(Reading database ... 82142 files and directories currently installed.)
Removing mysql-server ...
~% sudo apt-get install mysql-server
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following NEW packages will be installed:
  mysql-server
0 upgraded, 1 newly installed, 0 to remove and 1 not upgraded.
Need to get 0 B/83.6 kB of archives.
After this operation, 130 kB of additional disk space will be used.
Selecting previously unselected package mysql-server.
(Reading database ... 82138 files and directories currently installed.)
Unpacking mysql-server (from .../mysql-server_5.5.31+dfsg-0+wheezy1_all.deb) ...
Setting up mysql-server (5.5.31+dfsg-0+wheezy1) ...
~% sudo service mysql start
Starting MySQL database server: mysqld ..
/etc/init.d/mysql: line 120: /etc/mysql/debian-start: No such file or directory
~% </code></pre></div>
I looked around your search terms, and tried this: 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://serverfault.com/questions/82801/linux-how-to-restore-config-file-using-apt-get-aptitude/82817#82817"<br>linktext was:"http://serverfault.com/questions/82801/ ... 2817#82817"<br>====================================<br>
<br>
<br>
It didn't work either, see transcript below. Any suggestions? ☺<br>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>~% sudo dpkg --force-confmiss -i /var/cache/apt/archives/mysql-common_5.5.3*.deb
dpkg: warning: downgrading mysql-common from 5.5.31+dfsg-1 to 5.5.30+dfsg-1.1
(Reading database ... 82142 files and directories currently installed.)
Preparing to replace mysql-common 5.5.31+dfsg-1 (using .../mysql-common_5.5.30+dfsg-1.1_all.deb) ...
Unpacking replacement mysql-common ...
Preparing to replace mysql-common 5.5.30+dfsg-1.1 (using .../mysql-common_5.5.31+dfsg-0+wheezy1_all.deb) ...
Unpacking replacement mysql-common ...
Preparing to replace mysql-common 5.5.31+dfsg-0+wheezy1 (using .../mysql-common_5.5.31+dfsg-1_all.deb) ...
Unpacking replacement mysql-common ...
More than one copy of package mysql-common has been unpacked
 in this run !  Only configuring it once.
More than one copy of package mysql-common has been unpacked
 in this run !  Only configuring it once.
Setting up mysql-common (5.5.31+dfsg-1) ...
~% sudo service mysql start
Starting MySQL database server: mysqld ..
/etc/init.d/mysql: line 120: /etc/mysql/debian-start: No such file or directory
~%</code></pre></div></div>
</div>
</div>

</div>
</div>
<div id="p_30410" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile30410">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,308</span></div>

</div>
</div>
<span class="username">BitJam</span>
</dt>
<dd class="profile-joined">Joined: 31 Aug 2009</dd>
</dl>
<div class="postbody">
<div id="post_content30410">

<time datetime="2013-07-19T23:00">posted: 2013-07-19 &nbsp; 23:00</time>
<span class="permalink"><a href="./recover-etc-mysql-directory-t4499.html#p30410" title="permalink">#4</a></span>

<div class="content">I Googled(/etc/mysql/debian-start no such file or directory) and found that this is certainly not an uncommon problem. <br>
<br>

<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://fixunix.com/ubuntu/371589-mysql-etc-init-d-mysql-line-122-error.html"<br>linktext was:"Here"<br>====================================<br>
 someone fixed it with:<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>sudo cp /dev/null /etc/mysql/debian-start
sudo chmod +x /etc/mysql/debian-star
sudo dpkg --configure -a</code></pre></div>but later they were warned to get a real copy of the file. One is posted there but it is from 2008. There is a slight variation 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"https://answers.launchpad.net/ubuntu/+question/24"<br>linktext was:"here"<br>====================================<br>
:<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>touch /etc/mysql/debian-start
chown mysql:mysql /etc/mysql/debian-start
chmod ug+x /etc/mysql/debian-start</code></pre></div>
There are also many variations of the purge approach. Finally, 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://compgroups.net/comp.os.linux.misc/problem-reinstalling-mysql/567411"<br>linktext was:"here"<br>====================================<br>
 is a suggestion to use the --reinstall option:<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>apt-get install --reinstall mysql-server</code></pre></div>
If none of this brings you joy then can will try to install mysql-server and post a copy of the missing file.</div>
</div>
</div>

</div>
</div>
<div id="p_30415" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile30415">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,062</span></div>

</div>
</div>
<span class="username">Dave</span>
</dt>
<dd class="profile-joined">Joined: 20 Jan 2010</dd>
</dl>
<div class="postbody">
<div id="post_content30415">

<time datetime="2013-07-20T00:17">posted: 2013-07-20 &nbsp; 00:17</time>
<span class="permalink"><a href="./recover-etc-mysql-directory-t4499.html#p30415" title="permalink">#5</a></span>

<div class="content">You could take the MySQL-server package from /var/cache/apt/packages and manually extract it (dpkg -x I think), then copy the /etc/* folders over. If it is not there check for the default configuration files in /usr/share/mysql iirc, and copy those files to etc.</div>
</div>
</div>

</div>
</div>
<div id="p_30416" class="post has-profile bg1">
 <div class="inner">
<dl class="postprofile" id="profile30416">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,308</span></div>

</div>
</div>
<span class="username">BitJam</span>
</dt>
<dd class="profile-joined">Joined: 31 Aug 2009</dd>
</dl>
<div class="postbody">
<div id="post_content30416">

<time datetime="2013-07-20T00:45">posted: 2013-07-20 &nbsp; 00:45</time>
<span class="permalink"><a href="./recover-etc-mysql-directory-t4499.html#p30416" title="permalink">#6</a></span>

<div class="content">Great idea Dave! Here is debian-start from mysql-server-5.5_5.5.31+dfsg-0+wheezy1_amd64.deb:<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>#!/bin/bash
#
# This script is executed by"/etc/init.d/mysql" on every (re)start.
# 
# Changes to this file will be preserved when updating the Debian package.
#

source /usr/share/mysql/debian-start.inc.sh

MYSQL="/usr/bin/mysql --defaults-file=/etc/mysql/debian.cnf"
MYADMIN="/usr/bin/mysqladmin --defaults-file=/etc/mysql/debian.cnf"
MYUPGRADE="/usr/bin/mysql_upgrade --defaults-extra-file=/etc/mysql/debian.cnf"
MYCHECK="/usr/bin/mysqlcheck --defaults-file=/etc/mysql/debian.cnf"
MYCHECK_SUBJECT="WARNING: mysqlcheck has found corrupt tables"
MYCHECK_PARAMS="--all-databases --fast --silent"
MYCHECK_RCPT="root"

# The following commands should be run when the server is up but in background
# where they do not block the server start and in one shell instance so that
# they run sequentially. They are supposed not to echo anything to stdout.
# If you want to disable the check for crashed tables comment
#"check_for_crashed_tables" out.  
# (There may be no output to stdout inside the background process!)
echo"Checking for tables which need an upgrade, are corrupt or were"
echo"not closed cleanly."
(
  upgrade_system_tables_if_necessary;
  check_root_accounts;
  check_for_crashed_tables;
) &gt;&amp;2 &amp;

exit 0</code></pre></div>
You will still need to:<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>chmod a+x /etc/mysql/debian-start
chown mysql:mysql /etc/mysql/debian-start
chmod ug+x /etc/mysql/debian-start</code></pre></div>
I'm not certain the chmod is needed but I don't think it will hurt.</div>
</div>
</div>

</div>
</div>
<div id="p_30425" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile30425">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 35</span></div>

</div>
</div>
<span class="username">antix_forum_account</span>
</dt>
<dd class="profile-joined">Joined: 01 Feb 2013</dd>
</dl>
<div class="postbody">
<div id="post_content30425">

<time datetime="2013-07-20T16:52">posted: 2013-07-20 &nbsp; 16:52</time>
<span class="permalink"><a href="./recover-etc-mysql-directory-t4499.html#p30425" title="permalink">#7</a></span>

<div class="content">yeah! This works ☺<br>
<br>
Thank you BitJam and Dave...<br>
<br>
I copied over two files from the extract of the deb that I found at <em>/var/cache/apt/archives/mysql-server-5.5_5.5.31+dfsg-0+wheezy1_i386.deb</em><br>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>~/deb/etc/mysql% sudo cp debian-start /etc/mysql
~/deb/etc/mysql% sudo cp conf.d/mysqld_safe_syslog.cnf /etc/mysql/conf.d</code></pre></div>
Then I"re-installed"
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>sudo aptitude purge mysql-server mysql-client
sudo aptitude install mysql-server mysql-client</code></pre></div>
Now I don't get the <em>/etc/mysql/debian-start: No such file or directory</em> message when starting MySQL. This brings joy ☺<br>
<br>
By now I don't have a record of the past contents of <em>/etc/mysql</em>. fwiw these are its contents at the moment
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>/etc/mysql% find .
.
./debian-start
./debian.cnf
./my.cnf
./conf.d
./conf.d/.keepme
./conf.d/mysqld_safe_syslog.cnf</code></pre></div></div>
</div>
</div>

</div>
</div>
</div>
<div class="action-bar bar-bottom">

<div class="pagination">
7 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>
</div>
</div>
</div>
<div class="scrollToTopText"><a href="#top">goto top of page</a></div>

</div>
</body></html>
