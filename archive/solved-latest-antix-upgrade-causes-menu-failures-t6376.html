<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>[SOLVED] Latest AntiX upgrade causes menu failures - antiX oldforums archive</title>
   
<link rel="stylesheet" href="../aaa_style.css">
<script type="text/javascript" src ="../aaa_oldforums.js"></script>
</head>
<body>
<div id="wrap" class="wrap">
<a id="top" class="top-anchor" accesskey="t"></a>

<div id="inner-wrap">
<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks clear-after" role="menubar">
<li class="scroll-breadcrumbs breadcrumbs">
<span class="crumb"><a href="./index.html" accesskey="h" data-navbar-reference="index"><span>antiX - oldforums archive</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./official-releases-f42/index.html"><span>Official releases</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./antix-15-killah-p-f53/index.html"><span>antiX-15 Killah P</span></a></span>
</li>
</ul>

<div id="page-body" class="page-body" role="main">
<div class="postprofile_container postprofile_Left">
<div>
<div class="topictitleheader"><span class="statictopictitle">topic title: </span><span class="topic-titleb"><a href="./solved-latest-antix-upgrade-causes-menu-failures-t6376.html">[SOLVED] Latest AntiX upgrade causes menu failures</a></div>
<div class="pagination">
8 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>


<div class="viewtopic_wrapper">
<div id="p_46765" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile46765">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 21</span></div>

</div>
</div>
<span class="username">n1ksn</span>
</dt>
<dd class="profile-joined">Joined: 13 Apr 2016</dd>
</dl>
<div class="postbody">
<div id="post_content46765">
<time datetime="2016-05-26T06:07">posted: 2016-05-26 &nbsp; 06:07</time>
<span class="permalink"><a href="./solved-latest-antix-upgrade-causes-menu-failures-t6376.html#p46765" title="permalink">#1</a></span>

<div class="content">This evening I did an apt-get upgrade to my AntiX-15 installation. As a consequence, certain of my Application Menu items which invoke mpv to run in a terminal and play internet radio streams no longer work. These were originally added to the Application Menu using the Control Center, which got the commands from desktop files I had written. They worked yesterday before the upgrade.<br>
<br>
The now non-functioning menu entries are of the form: desktop-defaults-run -t mpv --no-ytdl ......<br>
<br>
As a test, I edited the menu file and replaced these entries with: urxvt -e mpv --no-ytdl ...<br>
and they worked. But they were later over-written by the Control Center and restored to their original form.<br>
<br>
I changed the default terminal to ROXterm from urxvt and there was no change. Also, the desktop files still work when directly executed from the file manager. So I suspect something in the Control Center update caused this issue.<br>
<br>
Thanks for any help you can provide.<br>
<br>
Andy N1KSN</div>
<div class="notice">
Last edited by <b>n1ksn</b> on 26 May 2016, 20:47, edited 1 time in total.
</div>
</div>
</div>

</div>
</div>
 <div id="p_46766" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile46766">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content46766">

<time datetime="2016-05-26T12:15">posted: 2016-05-26 &nbsp; 12:15</time>
<span class="permalink"><a href="./solved-latest-antix-upgrade-causes-menu-failures-t6376.html#p46766" title="permalink">#2</a></span>

<div class="content">I think the problem is in desktop-defaults-run, since using the terminal names explicitly works.<br>
<br>
when you say you"edited the menu file" I assume you edited the text based applications menu. is this correct? If so, you should know that the applications menu is rebuilt every login from the .desktop files. <br>
<br>
what interests me is that you say the desktop files worked when accessed directly. please post actually text from your desktop file and from the resulting applications menu entry.</div>
</div>
</div>

</div>
</div>
<div id="p_46767" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile46767">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 21</span></div>

</div>
</div>
<span class="username">n1ksn</span>
</dt>
<dd class="profile-joined">Joined: 13 Apr 2016</dd>
</dl>
<div class="postbody">
<div id="post_content46767">

<time datetime="2016-05-26T16:24">posted: 2016-05-26 &nbsp; 16:24</time>
<span class="permalink"><a href="./solved-latest-antix-upgrade-causes-menu-failures-t6376.html#p46767" title="permalink">#3</a></span>

<div class="content">I also suspected desktop-defaults-run, but I don't know how it works so I didn't want to suggest a root cause. <br>
<br>
Here is a sample desktop file that is involved:<br>
<ul><li>[Desktop Entry]<br>
Name=Hard Bop<br>
Comment=Stream Hard Bop<br>
#Exec=mplayer -afm ffmpdg 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://yp.shoutcast.com/sbin/tunein-station.pls?id=336469"<br>linktext was:"http://yp.shoutcast.com/sbin/tunein-sta ... ?id=336469"<br>====================================<br>
<br>
NoDisplay=False<br>
Exec=mpv --no-ytdl 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://yp.shoutcast.com/sbin/tunein-station.pls?id=336469"<br>linktext was:"http://yp.shoutcast.com/sbin/tunein-sta ... ?id=336469"<br>====================================<br>
<br>
Terminal=true<br>
Type=Application<br>
Categories=Audio;AudioVideo;Player<br>
Icon=audio-headphones</li>
</ul>
Here is the corresponding entry in the application menu file:<br>
<ul><li>[exec] (Hard Bop) {desktop-defaults-run -t mpv --no-ytdl 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://yp.shoutcast.com/sbin/tunein-station.pls?id=336469"<br>linktext was:"http://yp.shoutcast.com/sbin/tunein-sta ... ?id=336469"<br>====================================<br>
} &lt;/usr/share/icons/gnome/32x32/devices/audio-headphones.png&gt;</li>
</ul>
As I indicated before, if I Open/Execute the desktop file, it works. If I edit the menu entry above to replace"desktop-defaults-run -t" with"urxvt -e" the menu entry works--until the file is re-written by the system.<br>
<br>
Thanks for your reply, DO. (By the way, your videos have been quite helpful.)<br>
<br>
Andy</div>
</div>
</div>

</div>
</div>
<div id="p_46768" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile46768">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content46768">

<time datetime="2016-05-26T17:08">posted: 2016-05-26 &nbsp; 17:08</time>
<span class="permalink"><a href="./solved-latest-antix-upgrade-causes-menu-failures-t6376.html#p46768" title="permalink">#4</a></span>

<div class="content">OK, quite enlightening.<br>
<br>
1. the menu update script apparently takes desktop files with the"Terminal=true" line and uses desktop-defaults-run -t in the text applications menu.<br>
<br>
I suggest the following.<br>
<br>
edit your desktop file like so:<br>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>[Desktop Entry]
Name=Hard Bop
Comment=Stream Hard Bop
#Exec=mplayer -afm ffmpdg http://yp.shoutcast.com/sbin/tunein-sta ... ?id=336469
NoDisplay=False
Exec=roxterm -e mpv --no-ytdl http://yp.shoutcast.com/sbin/tunein-sta ... ?id=336469
Terminal=false
Type=Application
Categories=Audio;AudioVideo;Player
Icon=audio-headphones
</code></pre></div>
when the menu is updated, desktop-defaults-run -t will not be used.</div>
</div>
</div>

</div>
</div>
<div id="p_46769" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile46769">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 21</span></div>

</div>
</div>
<span class="username">n1ksn</span>
</dt>
<dd class="profile-joined">Joined: 13 Apr 2016</dd>
</dl>
<div class="postbody">
<div id="post_content46769">

<time datetime="2016-05-26T20:46">posted: 2016-05-26 &nbsp; 20:46</time>
<span class="permalink"><a href="./solved-latest-antix-upgrade-causes-menu-failures-t6376.html#p46769" title="permalink">#5</a></span>

<div class="content">Well, that did the trick, DO. Some of my other desktop files, e.g., for cmus, were already set up that way, so I'm a bit embarrassed not to have thought of it myself.<br>
<br>
I've evolved to use desktop files to organize and launch all my applications via WM menus, Fluxbox in AntiX and Openbox in a minimal Ubuntu install on another machine. (In Openbox I use gtk-launch in my menu file for running applications via desktop files.) So I still have the lingering concern that something that worked with some desktop files before suddenly no longer works after an update. <br>
<br>
Is desktop-defaults-run a part of Debian, AntiX, or Fluxbox? <br>
<br>
If it is part of AntiX, will there be a future change so Terminal=true in desktop files will again be interpreted correctly? <br>
<br>
Again, thank you very much for your help, DO. I'll mark this thread as solved.<br>
<br>
Andy</div>
</div>
</div>

</div>
</div>
<div id="p_46770" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile46770">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content46770">

<time datetime="2016-05-26T23:34">posted: 2016-05-26 &nbsp; 23:34</time>
<span class="permalink"><a href="./solved-latest-antix-upgrade-causes-menu-failures-t6376.html#p46770" title="permalink">#6</a></span>

<div class="content">desktop-defaults-run is part of the desktop-session package that is particular to antiX (not even mx uses it).<br>
<br>
there has been working to fix some issues with parsing parameters in desktop-defaults-run, which is the real core bug here in your case. I know some have been fixed, I'm not sure about this particular one. but rest assured its been noticed. antiX-16 is currently in beta.</div>
</div>
</div>

</div>
</div>
<div id="p_46771" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile46771">
<dt class="has-profile-rank has-avatar avatar-username">
<span class="username">anticapitalista</span>
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 5,955</span></div>

</div>
</div>
</dt>
<dd class="profile-rank">Site Admin</dd>
<dd class="profile-joined">Joined: 11 Sep 2007</dd>
</dl>
<div class="postbody">
<div id="post_content46771">

<time datetime="2016-05-27T10:20">posted: 2016-05-27 &nbsp; 10:20</time>
<span class="permalink"><a href="./solved-latest-antix-upgrade-causes-menu-failures-t6376.html#p46771" title="permalink">#7</a></span>

<div class="content">A new desktop-session deb will be in the repo soon. Please let me know if it fixes the issue</div>
</div>
</div>

</div>
</div>
<div id="p_46794" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile46794">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<span> <a href="#" class="username">n1ksn</a> </span> 
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 21</span></div>

</div>
</div>
<span class="username">n1ksn</span>
</dt>
<dd class="profile-joined">Joined: 13 Apr 2016</dd>
</dl>
<div class="postbody">
<div id="post_content46794">

<time datetime="2016-05-27T23:27">posted: 2016-05-27 &nbsp; 23:27</time>
<span class="permalink"><a href="./solved-latest-antix-upgrade-causes-menu-failures-t6376.html#p46794" title="permalink">#8</a></span>

<div class="content">I just installed the new desktop-session deb and returned my streaming desktop files to their original versons. Everything now works as it did prior to the previous update. <br>
<br>
Many thanks for all your help, DO and Anti. Most appreciated. <br>
<br>
Cheers,<br>
Andy N1KSN<br>
Menasha, WI</div>
</div>
</div>

</div>
</div>
</div>
<div class="action-bar bar-bottom">

<div class="pagination">
8 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>
</div>
</div>
</div>
<div class="scrollToTopText"><a href="#top">goto top of page</a></div>

</div>
</body></html>
