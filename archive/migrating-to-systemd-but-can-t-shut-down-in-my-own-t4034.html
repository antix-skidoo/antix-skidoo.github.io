<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>Migrating to systemd but can't shut down in my own name - antiX oldforums archive</title>
   
<link rel="stylesheet" href="../aaa_style.css">
<script type="text/javascript" src ="../aaa_oldforums.js"></script>
</head>
<body>
<div id="wrap" class="wrap">
<a id="top" class="top-anchor" accesskey="t"></a>

<div id="inner-wrap">
<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks clear-after" role="menubar">
<li class="scroll-breadcrumbs breadcrumbs">
<span class="crumb"><a href="./index.html" accesskey="h" data-navbar-reference="index"><span>antiX - oldforums archive</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./new-users-f22/index.html"><span>New Users</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./new-users-general-questions-f16/index.html"><span>New Users &amp; General Questions</span></a></span>
</li>
</ul>

<div id="page-body" class="page-body" role="main">
<div class="postprofile_container postprofile_Left">
<div>
<div class="topictitleheader"><span class="statictopictitle">topic title: </span><span class="topic-titleb"><a href="./migrating-to-systemd-but-can-t-shut-down-in-my-own-t4034.html">Migrating to systemd but can't shut down in my own name</a></div>
<div class="pagination">
7 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>


<div class="viewtopic_wrapper">
<div id="p_27037" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile27037">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 9</span></div>

</div>
</div>
<span class="username">hazel</span>
</dt>
<dd class="profile-joined">Joined: 23 Nov 2012</dd>
</dl>
<div class="postbody">
<div id="post_content27037">
<time datetime="2012-11-24T19:23">posted: 2012-11-24 &nbsp; 19:23</time>
<span class="permalink"><a href="./migrating-to-systemd-but-can-t-shut-down-in-my-own-t4034.html#p27037" title="permalink">#1</a></span>

<div class="content">After installing AntiX12, I noticed that systemd was included and decided to migrate to it. I used it before in Arch and I liked it. I made a service file for slim and I can now now boot straight into graphics. But I can't power off or reboot in my own name; I have to use sudo.<br>
<br>
When I try it as myself I get the error"Failed to issue method call: Access denied"<br>
The journal shows the following message from dbus:<br>
<br>
Nov 18 18:13:37 Scenic dbus-daemon[394]: dbus[394]: [system] Rejected send message, 2 matched rules; type="method_call", sender=":1.21" (uid=1000 pid=1693 comm="systemctl poweroff") interface="org.freedesktop.systemd1.Manager" member="StartUnit" error name="(unset)" requested_reply="0" destination="org.freedesktop.systemd1" (uid=0 pid=1 comm="/bin/systemd")<br>
Nov 18 18:13:37 Scenic dbus[394]: [system] Rejected send message, 2 matched rules; type="method_call", sender=":1.21" (uid=1000 pid=1693 comm="systemctl poweroff") interface="org.freedesktop.systemd1.Manager" member="StartUnit" error name="(unset)" requested_reply="0" destination="org.freedesktop.systemd1" (uid=0 pid=1 comm="/bin/systemd")<br>
<br>
It looks as if I have broken some matching rule or other but I don't know if the fault lies with dbus itself or with policykit or even consolekit. I have noticed that both these daemons need to be running or there is an appreciable hiatus while systemd starts them. And that strikes me as very odd because systemd is supposed to have replaced consolekit with its own logind daemon.<br>
<br>
In Arch I could shutdown as myself and there was definitely no run-time dependence on consolekit. I have been comparing configuration files with the Arch ones (because I saved my Arch /etc precisely to help with this kind of problem) but so far I have found no differences that seem relevant, and I haven't found a similar problem reported on Google either.<br>
<br>
Is it a configuration problem or has it got something to do with the way Debian builds systemd? I downloaded the source to check on build config options but again, I couldn't see anything relevant.</div>
</div>
</div>

</div>
</div>
<div id="p_27055" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile27055">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 609</span></div>

</div>
</div>
<span class="username">dark-D</span>
</dt>
<dd class="profile-joined">Joined: 02 Jun 2008</dd>
</dl>
<div class="postbody">
<div id="post_content27055">

<time datetime="2012-11-26T10:52">posted: 2012-11-26 &nbsp; 10:52</time>
<span class="permalink"><a href="./migrating-to-systemd-but-can-t-shut-down-in-my-own-t4034.html#p27055" title="permalink">#2</a></span>

<div class="content">debian is far behind archlinux when it comes to development. even in experimental systemd and dependencies are not up-to-date. debian keeps a paranoid way of updating the software, one that i am not in terms with. as for your question my suggestion is to edit the exitantx.sh located in / usr/local/bin and replace the entries with sudo halt or sudo reboot for shutdown and reboot. if you want hibernate and suspend you need to add them to / etc/sudoers and modify the script yet again. this is the simplest solution i can think of. if you want a suggestion on how to use the dbus method of shutdown reboot included in antix wait for others to help. good luck.</div>
</div>
</div>

</div>
</div>
<div id="p_27059" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile27059">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 9</span></div>
 
</div>
</div>
<span class="username">hazel</span>
</dt>
<dd class="profile-joined">Joined: 23 Nov 2012</dd>
</dl>
<div class="postbody">
<div id="post_content27059">

<time datetime="2012-11-26T12:35">posted: 2012-11-26 &nbsp; 12:35</time>
<span class="permalink"><a href="./migrating-to-systemd-but-can-t-shut-down-in-my-own-t4034.html#p27059" title="permalink">#3</a></span>

<div class="content">Curiously I don't have that exit script. Using sudo or gksu with the systemd poweroff and reboot commands is the obvious workaround and that's what I'm currently doing, so it isn't really a practical problem, but I do get irritated when programs don't do what it says on the tin.<br>
<br>
I <em>have</em> found the consolkit dependency: consolekit keeps a wholly unnecessary (in my opinion) log of system startups and shutdowns so it gets called in by the relevant systemd targets. But I don't think that has anything to do with the denial of access.</div>
</div>
</div>

</div>
</div>
<div id="p_27061" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile27061">
<dt class="has-profile-rank has-avatar avatar-username">
<span class="username">anticapitalista</span>
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 5,955</span></div>

</div>
</div>
</dt>
<dd class="profile-rank">Site Admin</dd>
<dd class="profile-joined">Joined: 11 Sep 2007</dd>
</dl>
<div class="postbody">
<div id="post_content27061">

<time datetime="2012-11-26T13:45">posted: 2012-11-26 &nbsp; 13:45</time>
<span class="permalink"><a href="./migrating-to-systemd-but-can-t-shut-down-in-my-own-t4034.html#p27061" title="permalink">#4</a></span>

<div class="content">That script is in antiX-base and full versions (you can install it if you like with apt-get install exit-antix).<br>
<br>
About systemd, it is certainly way behind in Debian compared to Arch and other distros already usng systemd.<br>
<br>
These links might be of some use, perhaps.<br>
<br>

<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://wiki.debian.org/systemd"<br>linktext was:"http://wiki.debian.org/systemd"<br>====================================<br>
<br>
<br>

<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://www.holgerschurig.de/linux/systemd.html"<br>linktext was:"http://www.holgerschurig.de/linux/systemd.html"<br>====================================<br>
</div>
</div>
</div>

</div>
</div>
<div id="p_27069" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile27069">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 9</span></div>

</div>
</div>
<span class="username">hazel</span>
</dt>
<dd class="profile-joined">Joined: 23 Nov 2012</dd>
</dl>
<div class="postbody">
<div id="post_content27069">

<time datetime="2012-11-27T12:41">posted: 2012-11-27 &nbsp; 12:41</time>
<span class="permalink"><a href="./migrating-to-systemd-but-can-t-shut-down-in-my-own-t4034.html#p27069" title="permalink">#5</a></span>

<div class="content">Yes, I found both of those. Neither mentions my specific problem but the second one is an excellent guide for creating one's own service files.<br>
<br>
I've decided to let this drop. After all, you need root access to shut down under sysvinit too, and I still think systemd is worth using for its speed alone.</div>
</div>
</div>

</div>
</div>
<div id="p_27153" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile27153">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 96</span></div>

</div>
</div>
<span class="username">melodie</span>
</dt>
<dd class="profile-joined">Joined: 15 Feb 2008</dd>
</dl>
<div class="postbody">
<div id="post_content27153">

<time datetime="2012-12-04T20:35">posted: 2012-12-04 &nbsp; 20:35</time>
<span class="permalink"><a href="./migrating-to-systemd-but-can-t-shut-down-in-my-own-t4034.html#p27153" title="permalink">#6</a></span>

<div class="content">Hi hazel,<br>
<br>
Do you have acpid installed ? (thinking of this page: 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"https://wiki.archlinux.org/index.php/Systemd"<br>linktext was:"https://wiki.archlinux.org/index.php/Systemd"<br>====================================<br>
 )</div>
</div>
</div>

</div>
</div>
<div id="p_27158" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile27158">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
 <div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 9</span></div>

</div>
</div>
<span class="username">hazel</span>
</dt>
<dd class="profile-joined">Joined: 23 Nov 2012</dd>
</dl>
<div class="postbody">
<div id="post_content27158">

<time datetime="2012-12-05T17:50">posted: 2012-12-05 &nbsp; 17:50</time>
<span class="permalink"><a href="./migrating-to-systemd-but-can-t-shut-down-in-my-own-t4034.html#p27158" title="permalink">#7</a></span>

<div class="content">No, I didn't bother to install it. I have a traditional desktop machine running on mains electricity, so I don't feel I need to bother with things like hibernation. Though I do vaguely remember reading that some people who use systemd on laptops have problems with that too.</div>
</div>
</div>

</div>
</div>
</div>
<div class="action-bar bar-bottom">

<div class="pagination">
7 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>
</div>
</div>
</div>
<div class="scrollToTopText"><a href="#top">goto top of page</a></div>

</div>
</body></html>
