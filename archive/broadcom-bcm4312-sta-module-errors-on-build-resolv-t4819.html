<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>Broadcom BCM4312 sta module Errors on build [Resolved] - antiX oldforums archive</title>
     

<link rel="stylesheet" href="../aaa_style.css">
</head>
<body>

<div id="wrap" class="wrap">
<a id="top" class="top-anchor" accesskey="t"></a>

<div id="inner-wrap">

<li class="scroll-breadcrumbs breadcrumbs">
<span class="crumb"><a href="./index.html" accesskey="h" data-navbar-reference="index"><span>antiX oldforumums archive</span></a>
 &raquo; &raquo; 
</span>
<span class="crumb"><a href="./general-f21/index.html"><span>General</span></a>
 &raquo; &raquo; 
</span>
<span class="crumb"><a href="./hardware-f13/index.html"><span>Hardware</span></a></span>
</li>
</ul>

<div id="page-body" class="page-body" role="main">
<div class="postprofile_container postprofile_Left">
<div>
<h2 class="topic-title" style="display: inline-block;"><a href="./broadcom-bcm4312-sta-module-errors-on-build-resolv-t4819.html">Broadcom BCM4312 sta module Errors on build [Resolved]</a></h2>
<div class="pagination">
7 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>

<div class="action-bar bar-top">
</div>
<div class="viewtopic_wrapper">
<div id="p_33021" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile33021">
<dt class="no-profile-rank has-avatar avatar-username">
<dd class="detail-title-numposts">Posts: 21</dd>
<span class="username">Jon_J</span>
</dt>
<dd class="profile-joined">Joined: 21 Jan 2014</dd>
</dl>
<div class="postbody">
<div id="post_content33021">

<time datetime="2014-01-24T16:34">posted: 2014-01-24  &nbsp; 16:34</time>
<span class="permalink"><a href="./broadcom-bcm4312-sta-module-errors-on-build-resolv-t4819.html#p33021" title="permalink">#1</a></span>

<div class="content"><strong>The WL driver is not needed for this chip, I fixed it in post #5</strong><br>
<br>
Hi, I have a Dell mini10 netbook and just installed the newest beta MX-14_13.97_386-xfce.iso<br>
I have a Broadcom BCM4312 wireless and the included b43 module doesn't seem to work.<br>
So I read the below thread.<br>
cannot-connect-to-wifi-networks-with-ceni-or-wicd-t3397.html?hilit=bcm4312<br>
Then I went to 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"https://wiki.debian.org/wl#Wheezy"<br>linktext was:"https://wiki.debian.org/wl#Wheezy"<br>====================================<br>
<br>
I followed instructions to get the broadcom-sta module installed.<br>
Below is output from my attempt to install the broadcom-sta module <br>
(sorry, I couldn't get any of the forum formatting options to work, must be a no-script setting I have in my browser) <br>
Near the bottom is an Error, Am I using the wrong kernel?<br>
I tried looking at the suggested log, but is doesn't exist on my machine after this failed attempt.<br>
Consult /var/lib/dkms/broadcom-sta/5.100.82.112/build/make.log for more information.<br>
<br>
# apt-get install linux-headers-$(uname -r|sed 's,[^-]*-[^-]*-,,') broadcom-sta-dkms<br>
Reading package lists... Done<br>
Building dependency tree <br>
Reading state information... Done<br>
The following packages were automatically installed and are no longer required:<br>
libavcodec54 libavformat54 libavutil52<br>
Use 'apt-get autoremove' to remove them.<br>
The following extra packages will be installed:<br>
linux-headers-3.2.0-4-686-pae linux-headers-3.2.0-4-common linux-kbuild-3.2<br>
The following NEW packages will be installed:<br>
broadcom-sta-dkms linux-headers-3.2.0-4-686-pae linux-headers-3.2.0-4-common linux-headers-686-pae linux-kbuild-3.2<br>
0 upgraded, 5 newly installed, 0 to remove and 2 not upgraded.<br>
Need to get 6,607 kB of archives.<br>
After this operation, 34.0 MB of additional disk space will be used.<br>
Do you want to continue [Y/n]? y<br>
Get:1 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://ftp.us.debian.org/debian/"<br>linktext was:"http://ftp.us.debian.org/debian/"<br>====================================<br>
 wheezy/non-free broadcom-sta-dkms all 5.100.82.112-8 [2,208 kB]<br>
Get:2 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://ftp.us.debian.org/debian/"<br>linktext was:"http://ftp.us.debian.org/debian/"<br>====================================<br>
 wheezy/main linux-headers-3.2.0-4-common i386 3.2.51-1 [3,561 kB]<br>
Get:3 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://ftp.us.debian.org/debian/"<br>linktext was:"http://ftp.us.debian.org/debian/"<br>====================================<br>
 wheezy/main linux-kbuild-3.2 i386 3.2.17-1 [233 kB] <br>
Get:4 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://ftp.us.debian.org/debian/"<br>linktext was:"http://ftp.us.debian.org/debian/"<br>====================================<br>
 wheezy/main linux-headers-3.2.0-4-686-pae i386 3.2.51-1 [601 kB] <br>
Get:5 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://ftp.us.debian.org/debian/"<br>linktext was:"http://ftp.us.debian.org/debian/"<br>====================================<br>
 wheezy/main linux-headers-686-pae i386 3.2+46 [4,454 B] <br>
Fetched 6,607 kB in 9s (676 kB/s) <br>
Selecting previously unselected package broadcom-sta-dkms.<br>
(Reading database ... 95173 files and directories currently installed.)<br>
Unpacking broadcom-sta-dkms (from .../broadcom-sta-dkms_5.100.82.112-8_all.deb) ...<br>
Selecting previously unselected package linux-headers-3.2.0-4-common.<br>
Unpacking linux-headers-3.2.0-4-common (from .../linux-headers-3.2.0-4-common_3.2.51-1_i386.deb) ...<br>
Selecting previously unselected package linux-kbuild-3.2.<br>
Unpacking linux-kbuild-3.2 (from .../linux-kbuild-3.2_3.2.17-1_i386.deb) ...<br>
Selecting previously unselected package linux-headers-3.2.0-4-686-pae.<br>
Unpacking linux-headers-3.2.0-4-686-pae (from .../linux-headers-3.2.0-4-686-pae_3.2.51-1_i386.deb) ...<br>
Selecting previously unselected package linux-headers-686-pae.<br>
Unpacking linux-headers-686-pae (from .../linux-headers-686-pae_3.2+46_i386.deb) ...<br>
Setting up broadcom-sta-dkms (5.100.82.112-8) ...<br>
Loading new broadcom-sta-5.100.82.112 DKMS files...<br>
First Installation: checking all kernels...<br>
Building only for 3.12-0.bpo.1-686-pae<br>
Building initial module for 3.12-0.bpo.1-686-pae<br>
Error! Bad return status for module build on kernel: 3.12-0.bpo.1-686-pae (i686)<br>
Consult /var/lib/dkms/broadcom-sta/5.100.82.112/build/make.log for more information.<br>
Setting up linux-headers-3.2.0-4-common (3.2.51-1) ...<br>
Setting up linux-kbuild-3.2 (3.2.17-1) ...<br>
Setting up linux-headers-3.2.0-4-686-pae (3.2.51-1) ...<br>
Examining / etc/ kernel/header_postinst.d.<br>
run-parts: executing / etc/kernel/header_postinst.d/dkms 3.2.0-4-686-pae<br>
: Unable to find an initial ram disk that I know how to handle.<br>
Will not try to make an initrd.<br>
Setting up linux-headers-686-pae (3.2+46) ...</div>

<div class="notice">
Last edited by <b>Jon_J</b> on 29 Jan 2014, 04:04, edited 2 times in total.
</div>

</div>
</div>

</div>
</div>
<div id="p_33024" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile33024">
<dt class="has-profile-rank has-avatar avatar-username">
<span class="username">anticapitalista</span>
<div class="avatar-username-inner">
<dd class="detail-title-numposts">Posts: 5,959</dd>
</div>
</dt>
<dd class="profile-rank">Site Admin</dd>
<dd class="profile-joined">Joined: 11 Sep 2007</dd>
</dl>
<div class="postbody">
<div id="post_content33024">

<time datetime="2014-01-24T16:51">posted: 2014-01-24  &nbsp; 16:51</time>
<span class="permalink"><a href="./broadcom-bcm4312-sta-module-errors-on-build-resolv-t4819.html#p33024" title="permalink">#2</a></span>

<div class="content">It is using the wrong headers. MX-14-beta1 uses 3.12 kernel from Debian backports.<br>
<br>
Try <br>
apt-get install -t wheezy-backports linux-headers-$(uname -r|sed 's,[^-]*-[^-]*-,,') broadcom-sta-dkms</div>

</div>
</div>

</div>
</div>
<div id="p_33046" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile33046">
<dt class="no-profile-rank has-avatar avatar-username">
<dd class="detail-title-numposts">Posts: 21</dd>
<span class="username">Jon_J</span>
</dt>
<dd class="profile-joined">Joined: 21 Jan 2014</dd>
</dl>
<div class="postbody">
<div id="post_content33046">

<time datetime="2014-01-24T23:32">posted: 2014-01-24  &nbsp; 23:32</time>
<span class="permalink"><a href="./broadcom-bcm4312-sta-module-errors-on-build-resolv-t4819.html#p33046" title="permalink">#3</a></span>

<div class="content"><blockquote><div><cite>anticapitalista wrote:</cite>It is using the wrong headers. MX-14-beta1 uses 3.12 kernel from Debian backports.<br>
<br>
Try <br>
apt-get install -t wheezy-backports linux-headers-$(uname -r|sed 's,[^-]*-[^-]*-,,') broadcom-sta-dkms</div></blockquote>
I tried installing this again, 3 times.<br>
First I just tried using the above command and modprobe was unable to find"wl"<br>
So I looked around in the filesystem and found wl.ko listed under the wrong kernel and I couldn't find it anywhere else.<br>
I thought since I downloaded the wrong headers initially, this wasn't going to work.<br>
<br>
I formatted the partition and re-installed MX-14_13.97 so I could start fresh.<br>
On my 2nd try, I left out a space between sed and 's (the forum makes spaces hard to see sometimes.)<br>
This gave me an error, I didn't have the headers. I tried again, and got the headers. Still got the same Error.<br>
So I figured this is a one shot deal, and if you don't have the headers along with the broadcom-sta-dkms file, it won't compile.<br>
So I installed MX-14_13.97 a third time and made sure I typed every thing correctly. I checked this 3 times before I hit [Enter]<br>
Below is the output with the error. I'm sure this is the same error I got above in my previous 2 attempts.
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>root@mx1:/home/jon# apt-get install -t wheezy-backports linux-headers-$(uname -r|sed 's,[^-]*-[^-]*-,,') broadcom-sta-dkms
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following NEW packages will be installed:
  broadcom-sta-dkms linux-headers-686-pae
0 upgraded, 2 newly installed, 0 to remove and 10 not upgraded.
Need to get 2,213 kB of archives.
After this operation, 6,215 kB of additional disk space will be used.
Get:1 http://ftp.us.debian.org/debian/ wheezy/non-free broadcom-sta-dkms all 5.100.82.112-8 [2,208 kB]
Get:2 http://ftp.us.debian.org/debian/ wheezy-backports/main linux-headers-686-pae i386 3.12+55~bpo70+1 [4,800 B]
Fetched 2,213 kB in 5s (383 kB/s)                 
Selecting previously unselected package broadcom-sta-dkms.
(Reading database ... 95113 files and directories currently installed.)
Unpacking broadcom-sta-dkms (from .../broadcom-sta-dkms_5.100.82.112-8_all.deb) ...
Selecting previously unselected package linux-headers-686-pae.
Unpacking linux-headers-686-pae (from .../linux-headers-686-pae_3.12+55~bpo70+1_i386.deb) ...
Setting up broadcom-sta-dkms (5.100.82.112-8) ...
Loading new broadcom-sta-5.100.82.112 DKMS files...
First Installation: checking all kernels...
Building only for 3.12-0.bpo.1-686-pae
Building initial module for 3.12-0.bpo.1-686-pae
Error! Bad return status for module build on kernel: 3.12-0.bpo.1-686-pae (i686)
Consult /var/lib/dkms/broadcom-sta/5.100.82.112/build/make.log for more information.
Setting up linux-headers-686-pae (3.12+55~bpo70+1) ...</code></pre></div>
Thank you for your help,<br>
Jon<br>
<br>
Edit: It generated a log this time.
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>DKMS make.log for broadcom-sta-5.100.82.112 for kernel 3.12-0.bpo.1-686-pae (i686)
Fri Jan 24 17:10:28 CST 2014
/bin/sh: 1: [: Illegal number: 
/bin/sh: 1: [: Illegal number: 
Wireless Extension is the only possible API for this kernel version
Using Wireless Extension API
KBUILD_NOPEDANTIC=1 make -C /lib/modules/3.12-0.bpo.1-686-pae/build M=/var/lib/dkms/broadcom-sta/5.100.82.112/build
make[1]: Entering directory `/usr/src/linux-headers-3.12-0.bpo.1-686-pae'
CFG80211 API is prefered for this kernel version
Using CFG80211 API
Kernel architecture is X86_32
  LD      /var/lib/dkms/broadcom-sta/5.100.82.112/build/built-in.o
  CC [M]  /var/lib/dkms/broadcom-sta/5.100.82.112/build/src/shared/linux_osl.o
  CC [M]  /var/lib/dkms/broadcom-sta/5.100.82.112/build/src/wl/sys/wl_linux.o
/var/lib/dkms/broadcom-sta/5.100.82.112/build/src/wl/sys/wl_linux.c: In function ‘wl_tkip_printstats’:
/var/lib/dkms/broadcom-sta/5.100.82.112/build/src/wl/sys/wl_linux.c:2975:7: warning: passing argument 1 of ‘wl-&gt;tkipmodops-&gt;print_stats’ from incompatible pointer type [enabled by default]
/var/lib/dkms/broadcom-sta/5.100.82.112/build/src/wl/sys/wl_linux.c:2975:7: note: expected ‘struct seq_file *’ but argument is of type ‘char *’
/var/lib/dkms/broadcom-sta/5.100.82.112/build/src/wl/sys/wl_linux.c:2978:4: warning: passing argument 1 of ‘wl-&gt;tkipmodops-&gt;print_stats’ from incompatible pointer type [enabled by default]
/var/lib/dkms/broadcom-sta/5.100.82.112/build/src/wl/sys/wl_linux.c:2978:4: note: expected ‘struct seq_file *’ but argument is of type ‘char *’
/var/lib/dkms/broadcom-sta/5.100.82.112/build/src/wl/sys/wl_linux.c: In function ‘wl_reg_proc_entry’:
/var/lib/dkms/broadcom-sta/5.100.82.112/build/src/wl/sys/wl_linux.c:3185:2: error: implicit declaration of function ‘create_proc_entry’ [-Werror=implicit-function-declaration]
/var/lib/dkms/broadcom-sta/5.100.82.112/build/src/wl/sys/wl_linux.c:3185:22: warning: assignment makes pointer from integer without a cast [enabled by default]
/var/lib/dkms/broadcom-sta/5.100.82.112/build/src/wl/sys/wl_linux.c:3190:16: error: dereferencing pointer to incomplete type
/var/lib/dkms/broadcom-sta/5.100.82.112/build/src/wl/sys/wl_linux.c:3191:16: error: dereferencing pointer to incomplete type
/var/lib/dkms/broadcom-sta/5.100.82.112/build/src/wl/sys/wl_linux.c:3192:16: error: dereferencing pointer to incomplete type
cc1: some warnings being treated as errors
make[4]: *** [/var/lib/dkms/broadcom-sta/5.100.82.112/build/src/wl/sys/wl_linux.o] Error 1
make[3]: *** [_module_/var/lib/dkms/broadcom-sta/5.100.82.112/build] Error 2
make[2]: *** [sub-make] Error 2
make[1]: *** [all] Error 2
make[1]: Leaving directory `/usr/src/linux-headers-3.12-0.bpo.1-686-pae'
make: *** [all] Error 2
</code></pre></div></div>

</div>
</div>

</div>
</div>
<div id="p_33063" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile33063">
<dt class="no-profile-rank has-avatar avatar-username">
<dd class="detail-title-numposts">Posts: 21</dd>
<span class="username">Jon_J</span>
</dt>
<dd class="profile-joined">Joined: 21 Jan 2014</dd>
</dl>
<div class="postbody">
<div id="post_content33063">

<ul class="post-buttons">
 </ul>
<time datetime="2014-01-25T15:00">posted: 2014-01-25  &nbsp; 15:00</time>
<span class="permalink"><a href="./broadcom-bcm4312-sta-module-errors-on-build-resolv-t4819.html#p33063" title="permalink">#4</a></span>

<div class="content">I tried to get my bcm4312 card working again, but I couldn't make head or tails about the errors given above.<br>
I did a search on the Mepis board and someone mentioned a pkg found in symatic specifically for the bcm4312, it's called"firmware-b43-lpphy-installer 1:015-14.1" It seemed to install, but gave an error at the end, I don't remember now what the error was. I still didn't have a workable wifi connection.<br>
While I was in symatic I also found"broadcom-sta-common" and"broadcom-sta-source" I installed these and it removed"broadcom-sta-dkms" (which wasn't working anyway). It also had errors, it had many errors referring to python.<br>
At this point I think I'll just go back and install"antiX-13.2_386-full" as this version worked out of the box for my gma500 video and bcm4312 wifi chip. I have no idea how antiX-13.2 made the wifi work, but it was using b43 when I checked with lsmod.</div>

</div>
</div>

</div>
</div>
<div id="p_33154" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile33154">
<dt class="no-profile-rank has-avatar avatar-username">
<dd class="detail-title-numposts">Posts: 21</dd>
<span class="username">Jon_J</span>
</dt>
<dd class="profile-joined">Joined: 21 Jan 2014</dd>
</dl>
<div class="postbody">
<div id="post_content33154">

<time datetime="2014-01-29T03:54">posted: 2014-01-29  &nbsp; 03:54</time>
<span class="permalink"><a href="./broadcom-bcm4312-sta-module-errors-on-build-resolv-t4819.html#p33154" title="permalink">#5</a></span>

<div class="content">I got it working this time in MX-14_13.97 <span class="emoticon"> __{{emoticon}}__ </span><br>
I really liked the"Look &amp; Feel" of MX-14_13.97, so I did a fresh install.<br>
Once it booted, and before I did anything else, I plugged in my ethernet cable and went to symatic and refreshed it.<br>
After symatic was updated I could find"firmware-b43-lpphy-installer 1:015-14.1"<br>
I installed this and shut down my mini10. I also unplugged my ethernet cable after the computer shut off.<br>
When I booted back to my desktop, it took a little while for my wifi to get up and running. dmesg says it tried several things that it isn't capable of doing before finally connecting.<br>
So this issue is resolved for me now. I wish I would have known this before I tried the bcm-sta wl thing, it would have been a lot more efficient way for me to get the latest version of antiX on this bugged netbook.<br>
Another note: the firmware loaded for my TV tuner card but not wifi when I first installed MX-14_13.97<br>
Jon</div>

</div>
</div>

</div>
</div>
<div id="p_33198" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile33198">
<dt class="no-profile-rank has-avatar avatar-username">
<dd class="detail-title-numposts">Posts: 667</dd>
<span class="username">jdmeaux1952</span>
</dt>
<dd class="profile-joined">Joined: 01 Nov 2013</dd>
</dl>
<div class="postbody">
<div id="post_content33198">

<time datetime="2014-02-01T02:28">posted: 2014-02-01  &nbsp; 02:28</time>
<span class="permalink"><a href="./broadcom-bcm4312-sta-module-errors-on-build-resolv-t4819.html#p33198" title="permalink">#6</a></span>

<div class="content">Somebody posted this on another topic elsewhere here.<br>
<br>

<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"https://wiki.debian.org/bcm43xx"<br>linktext was:"https://wiki.debian.org/bcm43xx"<br>====================================<br>
<br>
<br>
Maybe it will help.</div>

</div>
</div>

</div>
</div>
<div id="p_33200" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile33200">
<dt class="no-profile-rank has-avatar avatar-username">
<dd class="detail-title-numposts">Posts: 21</dd>
<span class="username">Jon_J</span>
</dt>
<dd class="profile-joined">Joined: 21 Jan 2014</dd>
</dl>
<div class="postbody">
<div id="post_content33200">

<time datetime="2014-02-01T05:56">posted: 2014-02-01  &nbsp; 05:56</time>
<span class="permalink"><a href="./broadcom-bcm4312-sta-module-errors-on-build-resolv-t4819.html#p33200" title="permalink">#7</a></span>

<div class="content"><blockquote><div><cite>jdmeaux1952 wrote:</cite>Somebody posted this on another topic elsewhere here.<br>
<br>

<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"https://wiki.debian.org/bcm43xx"<br>linktext was:"https://wiki.debian.org/bcm43xx"<br>====================================<br>
<br>
<br>
Maybe it will help.</div></blockquote>
Thank you,<br>
I'm using MX-14 beta2 now. A lot more wireless modules are included in this version, including the"wl" module for my BCM4312.<br>
<br>
Jon</div>

</div>
</div>

</div>
</div>

</div>
<div class="action-bar bar-bottom">
<div class="pagination">
7 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>
</div>

<div class="scrollToTopText"><a href="#top">Back to top</a></div> </div>
</div>

</div>
</body></html>
