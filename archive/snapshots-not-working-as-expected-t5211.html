<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>Snapshots not working as expected - antiX oldforums archive</title>
   
<link rel="stylesheet" href="../aaa_style.css">
<script type="text/javascript" src ="../aaa_oldforums.js"></script>
</head>
<body>
<div id="wrap" class="wrap">
<a id="top" class="top-anchor" accesskey="t"></a>

<div id="inner-wrap">
<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks clear-after" role="menubar">
<li class="scroll-breadcrumbs breadcrumbs">
<span class="crumb"><a href="./index.html" accesskey="h" data-navbar-reference="index"><span>antiX - oldforums archive</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./orphaned-posts-f27/index.html"><span>Orphaned Posts</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./releases-old-f44/index.html"><span>Releases (Old)</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./antix-13-luddite-f49/index.html"><span>antiX-13 Luddite</span></a></span>
</li>
</ul>

<div id="page-body" class="page-body" role="main">
<div class="postprofile_container postprofile_Left">
<div>
<div class="topictitleheader"><span class="statictopictitle">topic title: </span><span class="topic-titleb"><a href="./snapshots-not-working-as-expected-t5211.html">Snapshots not working as expected</a></div>
<div class="pagination">
15 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>

<div class="action-bar bar-top">
</div>
<div class="viewtopic_wrapper">
<div id="p_36500" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile36500">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 91</span></div>

</div>
</div>
<span class="username">dirkd</span>
</dt>
<dd class="profile-joined">Joined: 30 May 2014</dd>
</dl>
<div class="postbody">
<div id="post_content36500">
<time datetime="2014-07-24T07:06">posted: 2014-07-24 &nbsp; 07:06</time>
<span class="permalink"><a href="./snapshots-not-working-as-expected-t5211.html#p36500" title="permalink">#1</a></span>

<div class="content">There's a lot I liked about Antix when I first gave it a try. But what captured my imagination was the promise to make a snapshot of an installed system, including new applications. I'm sure I read somewhere that the result would be an 'installable image'. But although I managed to make the snapshot and transfer the resulting .iso to a bootable USB-key, I don't see how I can install that image to another computer. The option to 'install', that was present in the original Antix distribution image has disappeared. There's some logic in that, because the snapshot was - of course - made on a laptop where Antix was already installed. Still, I had expected that burning the .iso to an USB-key would restore the 'install'-option.<br>
<br>
Am I making a mistake, or do I misunderstand the purpose of snapshots?<br>
<br>
Another unexpected behaviour of transferring the snapshot to an USB-key was that some information seems missing in the snapshot. When booting from the new USB-key, I find all new applications I installed. Most of them work from the live USB-key (unfortunately, SAGE is an exception). I made some new users and passwords, which are also preserved when booting from USB. Unfortunately, their desktop environments got lost in the process of making a snapshot. I spent some time in customizing the desktop, with launchers for the new applications, and all these icons are missing when booting from USB.<br>
<br>
Any suggestions? Or am I asking for the impossible? It would be a disillusion, when at first everything seemed to work so smoothly.<br>
<br>
Still, I have to congratulate the Antix people. It's a distro that really stands out.</div>
</div>
</div>

</div>
</div>
<div id="p_36507" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile36507">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content36507">

<time datetime="2014-07-24T12:48">posted: 2014-07-24 &nbsp; 12:48</time>
<span class="permalink"><a href="./snapshots-not-working-as-expected-t5211.html#p36507" title="permalink">#2</a></span>

<div class="content">antiX 13.2 has a commandline installer that will install snapshot images. this is included in the snapshot image. I believe the command is" cli-installer". The graphical installer for antiX-14 will also include this feature, but its not included in the 13 installer at this time. the snapshot stuff is still evolving...<br>
<br>
I don't know why your user configurations weren't preserved. on the snapshots I've done, my user environment was preserved, with the exception of my wallpaper, which I forgot were stored on a separate data partition, which is not included in the snapshot. The live fstab is different than the installed fstab in that it gets rebuilt every boot. <br>
<br>
the aufs filesystem that the live uses is sometimes incompatible with certain apps. I've run into this with netflix-desktop on my liveUSB keys, although on the liveUSB w/ persistence its fairly simple to overcome with a separate HOME persistence file.<br>
<br>
the persistence features on the live cd/usb are really getting a big ease-of-use enhancement in antiX-14. you can see some of the new easy to use features in MX-14.2, as the new stuff has been incorporated into MX already.</div>
</div>
</div>

</div>
</div>
<div id="p_36516" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile36516">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 91</span></div>

</div>
</div>
<span class="username">dirkd</span>
</dt>
<dd class="profile-joined">Joined: 30 May 2014</dd>
</dl>
<div class="postbody">
<div id="post_content36516">
 
<time datetime="2014-07-25T12:59">posted: 2014-07-25 &nbsp; 12:59</time>
<span class="permalink"><a href="./snapshots-not-working-as-expected-t5211.html#p36516" title="permalink">#3</a></span>

<div class="content">Thank you for your reply, but I'm afraid I need some more help.<br>
<br>
I tried the cli-installer, but didn't get far. I wanted to test on a virtual machine, but couldn't boot a virtual-box vm from USB. I then copied the snapshot .iso-file and coupled it to the virtual CD in virtual box. I could boot, chose the cli-installer, started it, and then things went wrong. The installer offered to repartition the virtual harddrive, and seemed to do so. It found the drive, labeled it as sda, and partitioned it in root, home and swap partitions. But when installing to sda1 it showed no hard drive activity at all, and complained that it couldn't write/extend/... a whole lot of files. It seemed to me that Antix tried to install itself on the virtual CD-drive, in stead of the hard drive.<br>
<br>
I would appreciate it too, if you could elaborate a little bit about home and root persistance. There are quite some options you can choose there, and I'm not always sure what their meaning is. When transferring to USB I chose both home and root persistence, but not sure if that made any difference.</div>
</div>
</div>

</div>
</div>
<div id="p_36518" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile36518">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content36518">

<time datetime="2014-07-25T14:05">posted: 2014-07-25 &nbsp; 14:05</time>
<span class="permalink"><a href="./snapshots-not-working-as-expected-t5211.html#p36518" title="permalink">#4</a></span>

<div class="content">It is possible that you did not in fact write the changes to the virtual box drive's mbr/partition tables. I recommend setting up the partitions with gparted (on the regular antix iso) ahead of time, then running the cli-installer. The cli-installer in antiX 13.2 is very basic and originally designed for installing the cli-only antiX-core.<br>
<br>
As for persistence options, they aren't really meant for snapshot iso's. What is cool with liveUSB w/persistence is that you can set up all your programs ahead of time on the liveUSB, and then they will carry over to the install when you run it. By default you will lose any user customizatoins that are stored in your home folder, unless you copy them over yourself later or put them in <em>/</em>etc/skel ahead of time.<br>
<br>
I've got a couple of videos. The first is from antiX 13, and I state in the video that I just use root persistence because that option will store everything. Since that video, I've switched to having both a root and a home persistence file. Its slightly faster, as home isn't compressed, and since aufs isn't used on the home side, things like Netflix-Desktop will work that way as well (won't work with just root persistence, although the app will carry through to a new install).<br>
<br>
Once you have your apps installed, you can then run a remaster on the drive (available in remastercc) which will take the root persistence file and incorporate it into the main linuxfs file (which is where the base antix system is stored). this has the advantage of using less ram, less drive space, and a faster boot time. You don't have to incorporate the home persistence file in the remaster unless you want too. I usually leave it out. I don't have any videos showing the remaster operation, but its pretty easy.<br>
<br>
antix 13 - <span data-s9e-mediaembed="youtube" style="display:inline-block;width:100%;max-width:640px"><span style="display:block;overflow:hidden;position:relative;padding-bottom:56.25%"><iframe allowfullscreen="" scrolling="no" style="background:url(https://i.ytimg.com/vi/il_oZt4AY-E/hqdefault.jpg) 50% 50% / cover;border:0;height:100%;left:0;position:absolute;width:100%" src="https://www.youtube.com/embed/il_oZt4AY-E"></iframe></span></span> (2 metheds shown here, antix2usb and"setup live persistence" from the control center) around 10 minutes in is where we turn an existing liveUSB made with unetbootin into a liveUSB w/ persistence.<br>
<br>
mx 14 (shows the root and home system) <span data-s9e-mediaembed="youtube" style="display:inline-block;width:100%;max-width:640px"><span style="display:block;overflow:hidden;position:relative;padding-bottom:56.25%"><iframe allowfullscreen="" scrolling="no" style="background:url(https://i.ytimg.com/vi/W__qWfacOZs/hqdefault.jpg) 50% 50% / cover;border:0;height:100%;left:0;position:absolute;width:100%" src="https://www.youtube.com/embed/W__qWfacOZs"></iframe></span></span></div>
</div>
</div>

</div>
</div>
<div id="p_36520" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile36520">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,444</span></div>

</div>
</div>
<span class="username">skidoo</span>
</dt>
<dd class="profile-joined">Joined: 09 Feb 2012</dd>
</dl>
<div class="postbody">
<div id="post_content36520">

<time datetime="2014-07-25T14:59">posted: 2014-07-25 &nbsp; 14:59</time>
<span class="permalink"><a href="./snapshots-not-working-as-expected-t5211.html#p36520" title="permalink">#5</a></span>

<div class="content">IIRC, during installation to HDD (yes, because doing so"makes sense") the installer-related files (plus live-init and syslinux booloader) are withheld from the destination.<br>
If so, <span style="color: blue">apt-get install antix-installer</span> would reinsert the installer script. Might need to manually recreate a desktop"install antiX" icon, if desired.<br>
Afterward, performing a snapshot (of the HDD-installed OS) should yield a faithful copy, with the install script intact.<br>
The installer script might not (probably won't) preserve additionally-created user accounts, though.<br>
<br>
The"remaster" utility (accessed from antiX ControlCentre GUI) is a bit different from"snapshot". <br>
It might (the docs, or someone else, can clarify) auto-download the missing-after-install utilities and re-inject those into the destination copy.<br>
I've never tested whether the remastering utility preserves extra user accounts, but I doubt it is designed to do so.<br>
<br>
If you're willing to quickly experiment:<br>
Instead of first"installing" the OS prior to creating multiple user account and installing apps, try this:<br>
<br>
From a liveUSB:<br>
-- setup Root Persistence<br>
-- install SAGE<br>
-- create a couple new user accounts<br>
<br>
That working base, as a jumping-off point, will enable you to test whether install-to-HDD preserves extra user accounts<br>
(and whether the the installed SAGE configuration transfers properly. I'd expect it would).<br>
Separately, you're free to (skim the docs and) try out the"snapshot" and"antix2usb" and/or"remaster" utilities.<br>
<br>
"Why _root_ persistence?" That's a fine question but, for now, to get started... just do it.<br>
IMO, mixing in variables like separate home partition, multiple user accounts, potential VM quirks... at the outset, just invites extra confusion.</div>
</div>
</div>

</div>
</div>
<div id="p_36523" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile36523">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 91</span></div>

</div>
</div>
<span class="username">dirkd</span>
</dt>
<dd class="profile-joined">Joined: 30 May 2014</dd>
</dl>
<div class="postbody">
<div id="post_content36523">

<time datetime="2014-07-25T15:50">posted: 2014-07-25 &nbsp; 15:50</time>
<span class="permalink"><a href="./snapshots-not-working-as-expected-t5211.html#p36523" title="permalink">#6</a></span>

<div class="content">Thank you both. I'm beginning to understand the process of snapshots and remastering much better now. I since discovered that booting to the desktop environment and then running the cli-installer worked better, but still not good enough. The hard disk was used, an image of the OS installed, but after finishing I couldn't boot from the hard drive.<br>
<br>
I think I'll start over. I'll watch the video's, then I'll try skidoo's approach.</div>
</div>
</div>

</div>
</div>
<div id="p_36529" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile36529">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 91</span></div>

</div>
</div>
<span class="username">dirkd</span>
</dt>
<dd class="profile-joined">Joined: 30 May 2014</dd>
</dl>
<div class="postbody">
<div id="post_content36529">

<time datetime="2014-07-25T20:08">posted: 2014-07-25 &nbsp; 20:08</time>
<span class="permalink"><a href="./snapshots-not-working-as-expected-t5211.html#p36529" title="permalink">#7</a></span>

<div class="content">I watched the YouTube video, and found it very instructive. I also came across the FAQ-page about frugal install, which seemed very promising (speedwise). But just to be sure: how is a frugal install converted back to a bootable USB, without loosing the customizations made? If I understand the video about root persistence correctly, running antix2usb just copies the original iso, without customizations.<br>
<br>
In the mean time, I tried booting a virtual-box machine from the original Antix distribution USB stick. It couldn't boot the kernel, with the same error message I got before, when booting the system installed from my snapshot. It seems the virtual hardware of virtualbox is not compatible with the kernel used in Antix. Is that possible? I'm now installing VMware, since that program gives you a choice of different hardware to use with you virtual machines.</div>
</div>
</div>

</div>
</div>
<div id="p_36536" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile36536">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 91</span></div>

</div>
</div>
<span class="username">dirkd</span>
</dt>
<dd class="profile-joined">Joined: 30 May 2014</dd>
</dl>
<div class="postbody">
<div id="post_content36536">

<time datetime="2014-07-28T08:22">posted: 2014-07-28 &nbsp; 08:22</time>
<span class="permalink"><a href="./snapshots-not-working-as-expected-t5211.html#p36536" title="permalink">#8</a></span>

<div class="content">Still struggling with Antix Snapshots...<br>
<br>
I found the configuration file snapshot_exclude.list, and that mentions explicitly<br>
<br>
- home/*/Desktop/*<br>
<br>
so, that explains why my Desktop customizations were not copied over to my snapshot.<br>
<br>
I'm still puzzled why SAGE is nog working though. I can see that a few hundred files and about 20 folders from the SAGE folder, which is installed in /opt/, are not copied over to the snapshot. But SAGE is a gigantic 4GB folder, and I can't pinpoint exactly which files/folders are not copied. Any suggestions?<br>
<br>
I tried to attach the snapshot_exclude.list file, but the forum software doesn't seem to let me do so.<br>
<br>
So except for this SAGE puzzle, snapshots seem to work for me. As a warning for others testing with virtual machines: don't use Virtualbox: the kernel used with antix 13.2 doesn't boot on the virtual hardware. Using VMware, you can adapt the virtual hardware to the kernel version, and I had no problems booting from the snapshot .iso file.<br>
<br>
@skidoo: I tried to reinstall the graphical antix installer as you suggested ( apt-get install antix-installer ), but the package antix-installer was not found.</div>
</div>
</div>

</div>
</div>
<div id="p_36537" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile36537">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content36537">

<time datetime="2014-07-28T10:14">posted: 2014-07-28 &nbsp; 10:14</time>
<span class="permalink"><a href="./snapshots-not-working-as-expected-t5211.html#p36537" title="permalink">#9</a></span>

<div class="content">i'm glad its moving in the right direction!<br>
<br>
fyi - after release of 13, anti did discover the bug with the kernel and virtualbox (actually any compiled driver). another kernel was made available. on the news page (antix.mepis.org) check out the post 12 November 2013 for details.</div>
</div>
</div>

</div>
</div>
<div id="p_36538" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile36538">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 91</span></div>

</div>
</div>
<section class="desktop-hide">
 <a href="#" class="username">dirkd</a> </section>
</dt>
<dd class="profile-joined">Joined: 30 May 2014</dd>
</dl>
<div class="postbody">
<div id="post_content36538">

<time datetime="2014-07-28T11:54">posted: 2014-07-28 &nbsp; 11:54</time>
<span class="permalink"><a href="./snapshots-not-working-as-expected-t5211.html#p36538" title="permalink">#10</a></span>

<div class="content">I think I pinpointed the problem. In the file snapshot_exlude.list there's an entry<br>
<br>
- media/*<br>
<br>
and sure enough, the SAGE folder has buried deep within it a folder ...../media/ that is left empty in the copy of the filesystem. Surely what is meant is that the contents of the folder /media/ should be left out from the new squashfs filesystem. As it is now ANY folder media/ is left empty. I will try editing the snapshot_exclude.list file, but each experiment takes about 4 hours on the old laptop I use.<br>
<br>
In the mean time: is there anyone who is knowledgeable about the syntax used in this file? This is the original exlude.list file:<br>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code># rsync excludes file for antixsnapshot and antixsnapshot-gui
# version 0.2.7.7 (23.05.2013)

- dev/*
- cdrom/*
- media/*
- swapfile
- mnt/*
- sys/*
- proc/*
- tmp/*
- /live
- boot/grub/menu.lst
- boot/grub/device.map
- etc/udev/rules.d/70-persistent-cd.rules
- etc/udev/rules.d/70-persistent-net.rules
- etc/fstab
- etc/mtab
- home/snapshot
- root/.bash_history
- var/log/*.log
- var/log/*.gz
- var/log/*.old
- var/cache/apt/archives/*.deb
- var/cache/apt/*.bin
- var/lib/apt/lists/*
- var/cache/debconf/*-old
- var/lib/dpkg/*-old
- lost+found
- run/acpid.socket
- run/dbus/system_bus_socket
- usr/share/doc/*

# Entries below this can be edited by the user. If you have any large
# files or directories, you should exclude them from being copied
# by adding them to this list.

- home/*/.mozilla/firefox/*/Cache/*
- home/*/.mozilla/seamonkey/*/Cache/*
- home/*/.adobe
- home/*/.macromedia
- home/*/.thumbnails/large/*
- home/*/.thumbnails/normal/*
- home/*/.Trash*
- home/*/.local/share/Trash/*
#- home/*/.cache
- home/*/.gvfs
- home/*/.bash_history
- home/*/.recently-used
- home/*/.recently-used.xbel
- home/*/.VirtualBox
- home/*/VirtualBox VMs
- home/*/Desktop/*

# Examples:
#- home/*/Downloads/*
#- home/*/Music/*
#- home/*/Pictures/*
#- home/*/Videos/*
# To exclude all hidden files and directories in your home, uncomment
# the next line. You will lose custom desktop configs if you do.
#- home/*/.[a-z,A-Z,0-9]*
</code></pre></div>
I would like to prefix each entry with an"/", so that all folders would refer to the rootfolders only. Is this permissible? The comments seem to explicitly warn not to edit the first section. But surely the behaviour with the media/ folder in SAGE qualifies as some sort of bug, doesn't it?</div>
</div>
</div>

</div>
</div>
<div id="p_36540" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile36540">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 91</span></div>

</div>
</div>
<span class="username">dirkd</span>
</dt>
<dd class="profile-joined">Joined: 30 May 2014</dd>
</dl>
<div class="postbody">
<div id="post_content36540">

<time datetime="2014-07-28T17:24">posted: 2014-07-28 &nbsp; 17:24</time>
<span class="permalink"><a href="./snapshots-not-working-as-expected-t5211.html#p36540" title="permalink">#11</a></span>

<div class="content">Succes! This really opens up many possibilities. Up to now, making a live-CD for SAGE was a job for specialists. With Antix I can roll my own, and complement SAGE with some other math programs, suitable for beginning students. Keeping up to date with new versions of SAGE seems relatively straightforward. Thanks everyone for the advice.<br>
<br>
<br>
<br>
I gather a new version of Antix is in the works. Maybe in that new version, the snapshot_exclude.list file can be corrected. Do I have to contact someone, or does this post in the forum suffice?</div>

</div>
</div>

</div>
</div>
<div id="p_36541" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile36541">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content36541">

<time datetime="2014-07-28T18:28">posted: 2014-07-28 &nbsp; 18:28</time>
<span class="permalink"><a href="./snapshots-not-working-as-expected-t5211.html#p36541" title="permalink">#12</a></span>

<div class="content">how did you edit the excludes list? This will be informative for the future.</div>
</div>
</div>

</div>
</div>
<div id="p_36542" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile36542">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 91</span></div>

</div>
</div>
<span class="username">dirkd</span>
</dt>
<dd class="profile-joined">Joined: 30 May 2014</dd>
</dl>
<div class="postbody">
<div id="post_content36542">

<time datetime="2014-07-28T19:54">posted: 2014-07-28 &nbsp; 19:54</time>
<span class="permalink"><a href="./snapshots-not-working-as-expected-t5211.html#p36542" title="permalink">#13</a></span>

<div class="content"><blockquote><div><cite>dolphin_oracle wrote:</cite>how did you edit the excludes list? This will be informative for the future.</div></blockquote>
As I said in the previous post I prefixed each and every entry with a"/", thus
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>- /dev/* </code></pre></div>in stead of
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>- dev/*</code></pre></div>etc., etc.,.. Of course I left the entry
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>- /live </code></pre></div>untouched, as it had a leading slash already. Also I commented out the entry
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>- home/*/Desktop/*</code></pre></div>so as to include the launchers on the desktop in the snapshot, but that is of course inessential.</div>
</div>
</div>

</div>
</div>
<div id="p_36550" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile36550">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,444</span></div>

</div>
</div>
<span class="username">skidoo</span>
</dt>
<dd class="profile-joined">Joined: 09 Feb 2012</dd>
</dl>
<div class="postbody">
<div id="post_content36550">

<time datetime="2014-07-29 &nbsp; 15:19">posted: 2014-07-29 &nbsp; 15:19</time>
<span class="permalink"><a href="./snapshots-not-working-as-expected-t5211.html#p36550" title="permalink">#14</a></span>

<div class="content">For the"excludes list", I've never found a document explaining the reason/rationale for each entry in the default list.<br>
Although I've personalized my list so that it's much more granular, I've learned to respect that the default list reflects sane (safe/necessary) exclusions.<br>
<br>
/ media path is listed b/c that location serves as a mountpoint.<br>
Above, with that in mind, I advised avoiding complexity (separate homefs, etc) while learning to use the snapshot utility. <br>
Yeah, if sage files are pathed under <strong>/</strong>media, or contain ambiguously-named (vs the pattern employed) subdirectories ...luckily you figured that out.<br>
<br>
/ dev<br>
This gets populated dynamically and, across boots, we can't (er, shouldn't) presume that devices will be consistently recognized in the same order<br>
<br>
/ live<br>
Well, there's"live" and"live-boot" and... to avoid recursion, some paths need to be excluded.<br>
During live session, some paths are seen/mounted twice (read-only, and again in the aufs layer).<br>
<br>
The leading forward slash for each of the various line item matching patterns... for certain paths, adding the leading slash could introduce/create problems.<br>
That same exclude list is sourced by multiple scripts (are you/we certain none of the scripts will choke when parsing the leading slash character?)<br>
For instance (memory is is foggy but)"remaster" script sources the same excludes_list and (but) it treats the patterns as paths relative to the script's working directory rather than the filesystem's root.<br>
<br>
^----- I'm pointing out the above in response to this:<br>

<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://ask.sagemath.org/question/23606/copying-the-sage-installation-directory-with-rsync/"<br>linktext was:"http://ask.sagemath.org/question/23606/ ... ith-rsync/"<br>====================================<br>
<br>
Although I don't agree with the decision to use SAME excludes list for multiple scripts, I'm explaining that the default patterns are"by design"; they don't reflect"sloppiness".<br>
The devs are pretty slick; in response to your post explaining the problem you encountered, maybe they'll change away from utilizing a single"shared" excludes list.<br>
<br>
Likewise (not that you asked) presence of the trailing asterisk in many of the default patterns is"by design". <br>
Result is preservation of existing directory, empty, with its creation timestamp and its permissions intact.<br>
<br>
Four hours per run?!? In my usage, creating a snapshot + iso (fs contains about 3Gb files-on-disk) takes only 7 -- 20 minutes.<br>
Does SAGE really add"4Gb worth" of files?!? What is the size of your resultant iso?<br>
I'm wondering whether duplicates (as a byproduct of editing your excludes_list) is bloating your snapshot size.<br>
<br>
A related consideration: it's advisable to"perform a cleanup" prior to creating a snapshot.<br>
For starters, install and run the"bleachbit" app (twice -- once as root user, again as normal user)(to purge your browser filecache).<br>
Presence of unwanted debs in /var/cache/apt/archives represents another, potentially huge, bloat item (path).<br>
If bleachbit neglects to clean the deb archive path, you can fallback to using commandline"apt-get clean"</div>
</div>
</div>

</div>
</div>
<div id="p_36554" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile36554">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 91</span></div>

</div>
</div>
<span class="username">dirkd</span>
</dt>
<dd class="profile-joined">Joined: 30 May 2014</dd>
</dl>
<div class="postbody">
<div id="post_content36554">

<time datetime="2014-07-30T22:02">posted: 2014-07-30 &nbsp; 22:02</time>
<span class="permalink"><a href="./snapshots-not-working-as-expected-t5211.html#p36554" title="permalink">#15</a></span>

<div class="content">I appreciate that there are many, many things one has to think about before changing configurationfiles. I'm really impressed by the people who are able to setup this snapshot system. So when I mentioned a sloppy configuration file, I didn't mean to be derisive or something. I only wanted to make clear that the system, as it is now, doesn't work as it was intended, when SAGE is involved at least. And I'm sure that other similar mistakes will occur in other setups.<br>
<br>
I haven't tried the effect of the edited excluse list on 'remaster', but when I do, I'll report here.<br>
<br>
And yes, SAGE is quite a behemoth. 4GB for version 6.0, 4.2GB for version 6.2 and there's no end in sight. Luckily, a big percentage of that is text in one form or another, so it can be squashed well. In fact, it installs itself from an .iso file of about 700Mb, so what I do, ironically, is unpack 700Mb to 4GB, than squashing it again to fuse it with Antix. The resulting image is just over 3GB (14GB used on disk before taking the snapshot). Of course, the old laptop I use is 10 years old, that doesn't help much, speedwise.<br>
<br>
Next snapshot I will cleanup, as you suggest. I don't expect much of it though. I think the system as it is is pretty clean, given that I started from scratch.</div>
</div>
</div>

</div>
</div>
</div>
<div class="action-bar bar-bottom">

<div class="pagination">
15 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>
</div>
</div>
</div>
<div class="scrollToTopText"><a href="#top">goto top of page</a></div>

</div>
</body></html>
