<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>update-menu fails if synaptic is launched &quot;synaptic-pkexec&quot; - antiX oldforums archive</title>
   
<link rel="stylesheet" href="../aaa_style.css">
<script type="text/javascript" src ="../aaa_oldforums.js"></script>
</head>
<body>
<div id="wrap" class="wrap">
<a id="top" class="top-anchor" accesskey="t"></a>

<div id="inner-wrap">
<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks clear-after" role="menubar">
<li class="scroll-breadcrumbs breadcrumbs">
<span class="crumb"><a href="./index.html" accesskey="h" data-navbar-reference="index"><span>antiX - oldforums archive</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./antix-development-f24/index.html"><span>antiX-development</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./development-f6/index.html"><span>Development</span></a></span>
</li>
</ul>

<div id="page-body" class="page-body" role="main">
<div class="postprofile_container postprofile_Left">
<div>
<div class="topictitleheader"><span class="statictopictitle">topic title: </span><span class="topic-titleb"><a href="./update-menu-fails-if-synaptic-is-launched-synaptic-t6704.html">update-menu fails if synaptic is launched &quot;synaptic-pkexec&quot;</a></div>
<div class="pagination">
9 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>


<div class="viewtopic_wrapper">
<div id="p_49132" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile49132">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,445</span></div>

</div>
</div>
<span class="username">skidoo</span>
</dt>
<dd class="profile-joined">Joined: 09 Feb 2012</dd>
</dl>
<div class="postbody">
<div id="post_content49132">
<time datetime="2016-11-19T08:05">posted: 2016-11-19 &nbsp; 08:05</time>
<span class="permalink"><a href="./update-menu-fails-if-synaptic-is-launched-synaptic-t6704.html#p49132" title="permalink">#1</a></span>

<div class="content">auto-completion kicked in when I typed"synaptic" in Alt+F2 runbox tonight<br>
(guessing my fat-fingered typing hit the tab key)<br>
I wound up launching"synaptic-pkexec"<br>
<br>
post-install error message reported"not all actions could be completed... not found, /usr/local/lib/desktop-menu/desktop-menu-apt-update line14"<br>
that line reads:
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>        desktop-menu --write-out-global;</code></pre></div>
Works fine when"synaptic" is launched; consistently fails (repeatable) when"synaptic-pkexec" is used.<br>
<br>
antix16 also ships a /usr/bin/gparted-pkexec file.<br>
I haven't checked but am guessing that launching"gparted-pkexec" may cause similar problems.</div>
</div>
</div>

</div>
</div>
<div id="p_49137" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile49137">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,062</span></div>

</div>
</div>
<span class="username">Dave</span>
</dt>
<dd class="profile-joined">Joined: 20 Jan 2010</dd>
</dl>
<div class="postbody">
<div id="post_content49137">

<time datetime="2016-11-20T05:04">posted: 2016-11-20 &nbsp; 05:04</time>
<span class="permalink"><a href="./update-menu-fails-if-synaptic-is-launched-synaptic-t6704.html#p49137" title="permalink">#2</a></span>

<div class="content">Does pkexec have local/bin in its path?</div>
</div>
</div>

</div>
</div>
<div id="p_49138" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile49138">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,445</span></div>

</div>
</div>
<span class="username">skidoo</span>
</dt>
<dd class="profile-joined">Joined: 09 Feb 2012</dd>
</dl>
<div class="postbody">
<div id="post_content49138">

<time datetime="2016-11-20T06:43">posted: 2016-11-20 &nbsp; 06:43</time>
<span class="permalink"><a href="./update-menu-fails-if-synaptic-is-launched-synaptic-t6704.html#p49138" title="permalink">#3</a></span>

<div class="content">Coincidentally, in the past day, topic appeared in MX forum"antix 16: I can't run synaptic in a terminal?"<br>

<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://forum.mxlinux.org/viewtopic.php?f=40&amp;t=40931"<br>linktext was:"http://forum.mxlinux.org/viewtopic.php?f=40&amp;t=40931"<br>====================================<br>
<br>
<br>
In case my earlier post was unclear, I'm accustomed to Alt+F2 typing synaptic. the"pkexec" bit happened by accident.<br>
<br>
Contrary to what timkb4cq posted in the MX thread (topic title said antix16. He tested in antix, not MX?)<br>
in my testing, synaptic-pkexec launched from terminal yields same (see screencap) menu-update error<br>
<img src="http://i.imgur.com/wO5AWNd.png" class="postimage" alt="Image"></div>
</div>
</div>

</div>
</div>
<div id="p_49139" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile49139">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,445</span></div>

</div>
</div>
<span class="username">skidoo</span>
</dt>
<dd class="profile-joined">Joined: 09 Feb 2012</dd>
</dl>
<div class="postbody">
<div id="post_content49139">

<time datetime="2016-11-20T06:52">posted: 2016-11-20 &nbsp; 06:52</time>
<span class="permalink"><a href="./update-menu-fails-if-synaptic-is-launched-synaptic-t6704.html#p49139" title="permalink">#4</a></span>

<div class="content">Aha, declaring the absolute path to /usr/local/bin/desktop-menu<br>
within the /usr/local/lib/desktop-menu/desktop-menu-apt-update script does resolve the issue.<br>
<br>
<img src="http://i.imgur.com/kLjM71c.png" class="postimage" alt="Image"></div>
</div>
</div>

</div>
</div>
<div id="p_49140" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile49140">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 521</span></div>

</div>
</div>
<span class="username">Shay</span>
</dt>
<dd class="profile-joined">Joined: 20 Apr 2015</dd>
</dl>
<div class="postbody">
<div id="post_content49140">

<time datetime="2016-11-20T15:15">posted: 2016-11-20 &nbsp; 15:15</time>
<span class="permalink"><a href="./update-menu-fails-if-synaptic-is-launched-synaptic-t6704.html#p49140" title="permalink">#5</a></span>

<div class="content">Got curious<br>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>$ synaptic-pkexec
==== AUTHENTICATING FOR com.ubuntu.pkexec.synaptic ===
Authentication is required to run the Synaptic Package Manager
Authenticating as: jim
Password: 
polkit-agent-helper-1: error response to PolicyKit daemon: GDBus.Error:org.freedesktop.PolicyKit1.Error.Failed: No session for cookie
==== AUTHENTICATION FAILED ===
Error executing command as another user: Not authorized

This incident has been reported.
</code></pre></div>
This did open synaptic, but ????
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>$ su
Password: 
root@antix16:/home/jim# synaptic-pkexec

** (synaptic:18447): WARNING **: Error retrieving accessibility bus address: org.freedesktop.DBus.Error.ServiceUnknown: The name org.a11y.Bus was not provided by any .service files
</code></pre></div></div>

</div>
</div>

</div>
</div>
<div id="p_49141" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile49141">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,445</span></div>

</div>
</div>
<span class="username">skidoo</span>
</dt>
<dd class="profile-joined">Joined: 09 Feb 2012</dd>
</dl>
<div class="postbody">
<div id="post_content49141">

<time datetime="2016-11-20T21:24">posted: 2016-11-20 &nbsp; 21:24</time>
<span class="permalink"><a href="./update-menu-fails-if-synaptic-is-launched-synaptic-t6704.html#p49141" title="permalink">#6</a></span>

<div class="content">Shay, your first case represents the predictable result when other than the expected password is entered.<br>
<br>
The second, it's a low-grade PITA warning &amp; isn't specific to pkexec nor synaptic.<br>
Can avoid seeing that warning by installing 220kb"Accessibility Toolkit" debian package (at-spi2-core).<br>
sudo dpkg-query -S org.a11y.Bus<br>
^---} shows at-spi2-core as the provider of of the etc...org.a11y.Bus.service file</div>

</div>
</div>

</div>
</div>
<div id="p_49142" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile49142">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 521</span></div>

</div>
</div>
<span class="username">Shay</span>
</dt>
<dd class="profile-joined">Joined: 20 Apr 2015</dd>
</dl>
<div class="postbody">
<div id="post_content49142">

<time datetime="2016-11-21T01:18">posted: 2016-11-21 &nbsp; 01:18</time>
<span class="permalink"><a href="./update-menu-fails-if-synaptic-is-launched-synaptic-t6704.html#p49142" title="permalink">#7</a></span>

<div class="content">Well the correct password was used, but I prefer going the su route.<br>
The PITA, well I can live with it for now.</div>
</div>
</div>

</div>
</div>
<div id="p_49143" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile49143">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 64</span></div>

</div>
</div>
<span class="username">reverseDog</span>
</dt>
<dd class="profile-joined">Joined: 13 Jul 2016</dd>
</dl>
<div class="postbody">
<div id="post_content49143">

<time datetime="2016-11-21T09:37">posted: 2016-11-21 &nbsp; 09:37</time>
<span class="permalink"><a href="./update-menu-fails-if-synaptic-is-launched-synaptic-t6704.html#p49143" title="permalink">#8</a></span>

<div class="content">For me"synaptic-pkexec" strangely enough runs fine on live CD. But with antiX-16 <em>installed</em> I at first got the same authentication error Shay did. Only after installing a graphical authentication agent was I able to successfully pass Policykit authentication (mate-polkit for instance does the job just fine).<br>
<br>
As for the PITA (had to look that up <span class="emoticon"> __{{emoticon}}__ </span> ): It seems to occur with all, and only with, programs that run on GTK-3. Which GTK a program is based on can be checked with ldd:
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>$ ldd /usr/sbin/synaptic | grep gtk
    libgtk-3.so.0 =&gt; /usr/lib/i386-linux-gnu/libgtk-3.so.0 (0xb6cf3000)</code></pre></div></div>
</div>
</div>

</div>
</div>
<div id="p_49148" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile49148">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 521</span></div>

</div>
</div>
<span class="username">Shay</span>
</dt>
<dd class="profile-joined">Joined: 20 Apr 2015</dd>
</dl>
<div class="postbody">
<div id="post_content49148">

<time datetime="2016-11-21T15:23">posted: 2016-11-21 &nbsp; 15:23</time>
<span class="permalink"><a href="./update-menu-fails-if-synaptic-is-launched-synaptic-t6704.html#p49148" title="permalink">#9</a></span>

<div class="content"><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>$ ldd /usr/sbin/synaptic | grep gtk
    libgtk-3.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libgtk-3.so.0 (0x00007f1fdebdc000)
</code></pre></div>
32-64 bit difference it seems.</div>
</div>
</div>

</div>
</div>
</div>
<div class="action-bar bar-bottom">

<div class="pagination">
9 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>
</div>
</div>
</div>
<div class="scrollToTopText"><a href="#top">goto top of page</a></div>

</div>
</body></html>
