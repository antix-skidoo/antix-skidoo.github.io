<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>Startx Fails with Error - antiX oldforums archive</title>
   
<link rel="stylesheet" href="../aaa_style.css">
<script type="text/javascript" src ="../aaa_oldforums.js"></script>
</head>
<body>
<div id="wrap" class="wrap">
<a id="top" class="top-anchor" accesskey="t"></a>

<div id="inner-wrap">
<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks clear-after" role="menubar">
<li class="scroll-breadcrumbs breadcrumbs">
<span class="crumb"><a href="./index.html" accesskey="h" data-navbar-reference="index"><span>antiX - oldforums archive</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./new-users-f22/index.html"><span>New Users</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./new-users-general-questions-f16/index.html"><span>New Users &amp; General Questions</span></a></span>
</li>
</ul>

<div id="page-body" class="page-body" role="main">
<div class="postprofile_container postprofile_Left">
<div>
<div class="topictitleheader"><span class="statictopictitle">topic title: </span><span class="topic-titleb"><a href="./startx-fails-with-error-t7215.html">Startx Fails with Error</a></div>
<div class="pagination">
10 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>


<div class="viewtopic_wrapper">
<div id="p_53442" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile53442">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 7</span></div>

</div>
</div>
<span class="username">patrick</span>
</dt>
<dd class="profile-joined">Joined: 19 Sep 2017</dd>
</dl>
<div class="postbody">
<div id="post_content53442">
<time datetime="2017-10-01T00:58">posted: 2017-10-01 &nbsp; 00:58</time>
<span class="permalink"><a href="./startx-fails-with-error-t7215.html#p53442" title="permalink">#1</a></span>

<div class="content">Antix 17 beta 3 Net Install, terminal only system, that is, no desktop GUI or apps, etc., before installing xorg and openbox.  No errors.  Reboot.  Login as user.  Startx fails with"Access Denied" to X Server., but works if you run startx as root.  Antix 16.2 installed the same way, user run startx works just fine.<br>
<br>
Bug because 17 is a Beta or something else?<br>
<br>
Installed in VirtualBox 5.1.28 with 5.1.28 Extension Pack on a Debian Wheezy 64-bit host, fully up-to-date, 3.2.0-4-amd64 kernel.  No Guest Additions installed.  No point.  <br>
<br>
Thanks.<br>
<br>
 Patrick</div>
</div>
</div>

</div>
</div>
<div id="p_53445" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile53445">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,308</span></div>

</div>
</div>
<span class="username">BitJam</span>
</dt>
<dd class="profile-joined">Joined: 31 Aug 2009</dd>
</dl>
<div class="postbody">
<div id="post_content53445">

<time datetime="2017-10-01T01:59">posted: 2017-10-01 &nbsp; 01:59</time>
<span class="permalink"><a href="./startx-fails-with-error-t7215.html#p53445" title="permalink">#2</a></span>

<div class="content">This thread explains the problem: 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://debian.2.n7.nabble.com/Bug-833182-xserver-xorg-core-regression-on-Intel-HD-Graphics-drmSetMaster-Permission-denied-td39 01124.html"<br>linktext was:"xserver-xorg-core regression on Intel HD Graphics: drmSetMaster(): Permission denied."<br>====================================<br>
<br>
<a href="http://debian.2.n7.nabble.com/Bug-833182-xserver-xorg-core-regression-on-Intel-HD-Graphics-drmSetMaster-Permission-denied-td390 1124.html" class="postlink"></a><br>
<br>
I regularly use startx as a normal use on my Gentoo system.   <br>
<br>
I made some progress on a antiX-pre-rc1_386-full live system (booting into runlevel 3) by running:
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>make-xorg-conf intel | sudo tee /etc/X11/xorg.conf</code></pre></div>
X would start but then the system would freeze and I  need to use the big red switch.   <br>
<br>
On my Gentoo system /usr/bin/Xorg is suid so X runs as root even when I run startx as a normal user.  I tried running:
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>sudo chmod u+x /usr/bin/Xorg</code></pre></div>
but that didn't change anything.   I think the problem is upstream with Debian and/or X.org and/or freedesktop.org.   You can probably explore this further but it might be faster/easier to install slim or lightdm or some other display manager that you can start as an init.d service.</div>
</div>
</div>

</div>
</div>
<div id="p_53462" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile53462">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 7</span></div>

</div>
</div>
<span class="username">patrick</span>
</dt>
<dd class="profile-joined">Joined: 19 Sep 2017</dd>
</dl>
<div class="postbody">
<div id="post_content53462">

<time datetime="2017-10-01T18:22">posted: 2017-10-01 &nbsp; 18:22</time>
<span class="permalink"><a href="./startx-fails-with-error-t7215.html#p53462" title="permalink">#3</a></span>

<div class="content"><blockquote><div><cite>BitJam wrote:</cite>
This thread explains the problem: 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://debian.2.n7.nabble.com/Bug-833182-xserver-xorg-core-regression-on-Intel-HD-Graphics-drmSetMaster-Permission-denied-td39 01124.html"<br>linktext was:"xserver-xorg-core regression on Intel HD Graphics: drmSetMaster(): Permission denied."<br>====================================<br>
<br>
<a href="http://debian.2.n7.nabble.com/Bug-833182-xserver-xorg-core-regression-on-Intel-HD-Graphics-drmSetMaster-Permission-denied-td390 1124.html" class="postlink"></a><br>
<br>
I regularly use startx as a normal use on my Gentoo system.   <br>
<br>
I made some progress on a antiX-pre-rc1_386-full live system (booting into runlevel 3) by running:
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>make-xorg-conf intel | sudo tee /etc/X11/xorg.conf</code></pre></div>
X would start but then the system would freeze and I  need to use the big red switch.   <br>
<br>
On my Gentoo system /usr/bin/Xorg is suid so X runs as root even when I run startx as a normal user.  I tried running:
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>sudo chmod u+x /usr/bin/Xorg</code></pre></div>
but that didn't change anything.   I think the problem is upstream with Debian and/or X.org and/or freedesktop.org.   You can probably explore this further but it might be faster/easier to install slim or lightdm or some other display manager that you can start as an init.d service.
</div></blockquote>
Thanks for your quick response, advice and the bug link.  Although, I don't think the bug report applies (and it's a year old), but I'll read it more thoroughly later.  I might glean something useful.<br>
<br>
My thinking now is this startx failure is an Antix 17 Beta glitch and not an upstream Debian Stretch or xorg problem.  I've tested Stretch in VirtualBox under numerous configurations -- systemd init, sysv and runit inits with and without systemd components -- installed the same way as I did Antix and never experienced any startx problems.<br>
<br>
I don't want to install a display manager as I want the system to boot to a standard terminal and not X as many times I only need a terminal.  And to be as"light' and fast as possible.  Traditional Desktops which I abandoned about 6 years ago are such leviathans and CPU gluttons, and no more useful than a good window manager and a single panel.<br>
<br>
Thanks, again.<br>
<br>
Patrick</div>
</div>
</div>

</div>
</div>
<div id="p_53465" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile53465">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,445</span></div>

</div>
</div>
<span class="username">skidoo</span>
</dt>
<dd class="profile-joined">Joined: 09 Feb 2012</dd>
</dl>
<div class="postbody">
<div id="post_content53465">

<time datetime="2017-10-01T21:37">posted: 2017-10-01 &nbsp; 21:37</time>
<span class="permalink"><a href="./startx-fails-with-error-t7215.html#p53465" title="permalink">#4</a></span>

<div class="content">I web-searched this and found multiple reputed causes/solutions.<br>
Further, the troubleshooting varies, depending whether the exact error was"Access denied" (vs"connection refused").<br>
<em>debian startx access denied</em><br>
KMS is mentioned, nomodeset is mentioned, as is xorg and (vs) x11 and...
<blockquote class="uncited"><div>Antix 17 Beta glitch and not an upstream Debian Stretch or xorg problem</div></blockquote>
...and you'll find bug reports similar/identical to yours are spread across users of debian9 and recent ubuntu (which suggests"is upstream, not just a antix17beta quirk")</div>
</div>
</div>

</div>
</div>
<div id="p_53471" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile53471">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,308</span></div>

</div>
</div>
<span class="username">BitJam</span>
</dt>
<dd class="profile-joined">Joined: 31 Aug 2009</dd>
</dl>
<div class="postbody">
<div id="post_content53471">

<time datetime="2017-10-01T22:15">posted: 2017-10-01 &nbsp; 22:15</time>
<span class="permalink"><a href="./startx-fails-with-error-t7215.html#p53471" title="permalink">#5</a></span>

<div class="content"><blockquote><div><cite>patrick wrote:</cite>Thanks for your quick response, advice and the bug link.  Although, I don't think the bug report applies (and it's a year old), but I'll read it more thoroughly later.  I might glean something useful.</div></blockquote>
I found that bug report and others by running startx as the demo user on antiX-17-pre-rc1 live and looking in the Xorg.0.log file for error messages.
<blockquote class="uncited"><div>My thinking now is this startx failure is an Antix 17 Beta glitch and not an upstream Debian Stretch or xorg problem.  I've tested Stretch in VirtualBox under numerous configurations -- systemd init, sysv and runit inits with and without systemd components -- installed the same way as I did Antix and never experienced any startx problems.</div></blockquote>
Very interesting.  It could well be we're at fault but AFAIK we don't do anything extra with this stuff, we just install the Debian packages.  This is especially true if you started with the core system.   That's why the best I have to offer is to try it here and the Google the error messages from the log file.   One reason I am suspicious of upstream is that it seems almost every year it is a struggle to cope with the changes they make which make it harder to boot OOTB on older systems, but that is an emotional argument, not a rational one.
<blockquote class="uncited"><div>I don't want to install a display manager as I want the system to boot to a standard terminal and not X as many times I only need a terminal.  And to be as"light' and fast as possible.</div></blockquote>
I personally use startx instead of a display manager and what you want is in accord with the antiX"lean and mean" motto.<br>
<br>
My hope is that maybe most of this can be fixed with a well-placed chown -R or chmod -R command.   Having similar systems that work may make debugging easier.  Another approach is to run Xorg with the strace command.  It generates a copious list of all system calls which will show all the files that are being accessed.  It's likely that the problem boils down to some of those files having the wrong ownership or permissions.</div>
</div>
</div>

</div>
</div>
<div id="p_53475" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile53475">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,308</span></div>

</div>
</div>
<span class="username">BitJam</span>
</dt>
<dd class="profile-joined">Joined: 31 Aug 2009</dd>
</dl>
<div class="postbody">
<div id="post_content53475">

<time datetime="2017-10-01T22:35">posted: 2017-10-01 &nbsp; 22:35</time>
<span class="permalink"><a href="./startx-fails-with-error-t7215.html#p53475" title="permalink">#6</a></span>

<div class="content">I continued to follow up on the"modeset drmsetmaster failed permission denied" error message.  The second hit is from June this year: 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"https://www.linuxquestions.org/questions/gentoo-87/exceptionally-frustrated-funtoo-noob-4175607353/"<br>linktext was:"[Solved] Exceptionally frustrated funtoo noob"<br>====================================<br>
<br>
<a href="https://www.linuxquestions.org/questions/gentoo-87/exceptionally-frustrated-funtoo-noob-4175607353/" class="postlink"></a><br>
One suggestion is to run:
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>X :3 -configure
sudo cp xorg.conf.new /etc/X11/xorg.conf
startx</code></pre></div>
This works around the aforementioned bug in the modesetting driver and X starts but then the system freezes.   Basically the same result as when I used"make-xorg-conf intel" to make an xorg.conf file.</div>
</div>
</div>

</div>
</div>
<div id="p_53477" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile53477">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 7</span></div>

</div>
</div>
<span class="username">patrick</span>
</dt>
<dd class="profile-joined">Joined: 19 Sep 2017</dd>
</dl>
<div class="postbody">
<div id="post_content53477">

<time datetime="2017-10-01T23:44">posted: 2017-10-01 &nbsp; 23:44</time>
<span class="permalink"><a href="./startx-fails-with-error-t7215.html#p53477" title="permalink">#7</a></span>

 <div class="content"><blockquote><div><cite>skidoo wrote:</cite>
I web-searched this and found multiple reputed causes/solutions.<br>
Further, the troubleshooting varies, depending whether the exact error was"Access denied" (vs"connection refused").<br>
<em>debian startx access denied</em><br>
KMS is mentioned, nomodeset is mentioned, as is xorg and (vs) x11 and...
<blockquote class="uncited"><div>Antix 17 Beta glitch and not an upstream Debian Stretch or xorg problem</div></blockquote>
...and you'll find bug reports similar/identical to yours are spread across users of debian9 and recent ubuntu (which suggests"is upstream, not just a antix17beta quirk")
</div></blockquote>
I rechecked:  The error is"Connection Refused" by X Server NOT"Access Denied."  Sorry.<br>
<br>
Well, whatever is causing this with Antix 17 Beta is not causing it in Debian Stretch regardless of the init used (systemd, sysvinit or runit) or whether systemd components are present or purged after setting up sysvinit or runit.<br>
<br>
Of course, this could be a VirtualBox glitch.  I've had it happen.  Do a real install on a hard drive and everything is fine.<br>
<br>
Patrick</div>
</div>
</div>

</div>
</div>
<div id="p_53478" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile53478">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 7</span></div>

</div>
</div>
<span class="username">patrick</span>
</dt>
<dd class="profile-joined">Joined: 19 Sep 2017</dd>
</dl>
<div class="postbody">
<div id="post_content53478">

<time datetime="2017-10-02T00:03">posted: 2017-10-02 &nbsp; 00:03</time>
<span class="permalink"><a href="./startx-fails-with-error-t7215.html#p53478" title="permalink">#8</a></span>

<div class="content"><blockquote><div><cite>BitJam wrote:</cite>
<blockquote><div><cite>patrick wrote:</cite>Thanks for your quick response, advice and the bug link.  Although, I don't think the bug report applies (and it's a year old), but I'll read it more thoroughly later.  I might glean something useful.</div></blockquote>
I found that bug report and others by running startx as the demo user on antiX-17-pre-rc1 live and looking in the Xorg.0.log file for error messages.
<blockquote class="uncited"><div>My thinking now is this startx failure is an Antix 17 Beta glitch and not an upstream Debian Stretch or xorg problem.  I've tested Stretch in VirtualBox under numerous configurations -- systemd init, sysv and runit inits with and without systemd components -- installed the same way as I did Antix and never experienced any startx problems.</div></blockquote>
Very interesting.  It could well be we're at fault but AFAIK we don't do anything extra with this stuff, we just install the Debian packages.  This is especially true if you started with the core system.   That's why the best I have to offer is to try it here and the Google the error messages from the log file.   One reason I am suspicious of upstream is that it seems almost every year it is a struggle to cope with the changes they make which make it harder to boot OOTB on older systems, but that is an emotional argument, not a rational one.
<blockquote class="uncited"><div>I don't want to install a display manager as I want the system to boot to a standard terminal and not X as many times I only need a terminal.  And to be as"light' and fast as possible.</div></blockquote>
I personally use startx instead of a display manager and what you want is in accord with the antiX"lean and mean" motto.<br>
<br>
My hope is that maybe most of this can be fixed with a well-placed chown -R or chmod -R command.   Having similar systems that work may make debugging easier.  Another approach is to run Xorg with the strace command.  It generates a copious list of all system calls which will show all the files that are being accessed.  It's likely that the problem boils down to some of those files having the wrong ownership or permissions.
</div></blockquote>
I mentioned in another reply that this startx problem could be a VirtualBox glitch.  I've had similar"problems" happen before.  But for now I installed lightdm, and X and Openbox load and work fine after logging in.  True, I don't boot to a terminal, but I'm just testing and evaluating now.  My Wheezy system is headed for End Of Life May 2018, and I want to get a replacement system installed and ready to go by that time.  Whether that will be Antix 17 or Debian Stretch with or without systemd stuff or something else entirely remains to be seen.<br>
<br>
Patrick</div>
<div class="postcontent_footer">

</div>
</div>
</div>

</div>
</div>
<div id="p_53487" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile53487">
<dt class="has-profile-rank has-avatar avatar-username">
<span class="username">anticapitalista</span>
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 5,955</span></div>

</div>
</div>
</dt>
<dd class="profile-rank">Site Admin</dd>
<dd class="profile-joined">Joined: 11 Sep 2007</dd>
</dl>
<div class="postbody">
<div id="post_content53487">

<time datetime="2017-10-02T07:57">posted: 2017-10-02 &nbsp; 07:57</time>
<span class="permalink"><a href="./startx-fails-with-error-t7215.html#p53487" title="permalink">#9</a></span>

<div class="content">Installing xserver-xorg-legacy fixes it for me.</div>
</div>
</div>

</div>
</div>
<div id="p_53494" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile53494">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 7</span></div>

</div>
</div>
<span class="username">patrick</span>
</dt>
<dd class="profile-joined">Joined: 19 Sep 2017</dd>
</dl>
<div class="postbody">
<div id="post_content53494">

<time datetime="2017-10-02T19:44">posted: 2017-10-02 &nbsp; 19:44</time>
<span class="permalink"><a href="./startx-fails-with-error-t7215.html#p53494" title="permalink">#10</a></span>

<div class="content"><blockquote><div><cite>anticapitalista wrote:</cite>
Installing xserver-xorg-legacy fixes it for me.
</div></blockquote>
I'll look into that.  My primary system and host for VirtualBox tests was built almost 11 years ago, but has been upgraded numerous times since.  Even so, most would consider it an antique, but if it ain't broke, don't fix it.<br>
<br>
Patrick</div>
</div>
</div>

</div>
</div>
</div>
<div class="action-bar bar-bottom">

<div class="pagination">
10 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>
</div>
</div>
</div>
<div class="scrollToTopText"><a href="#top">goto top of page</a></div>

</div>
</body></html>
