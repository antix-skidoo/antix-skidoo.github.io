<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>antiX-14-a3.2 mini-release -- Testers Needed! - Page 3 - antiX oldforums archive</title>
   
<link rel="stylesheet" href="../aaa_style.css">
<script type="text/javascript" src ="../aaa_oldforums.js"></script>
</head>
<body>
<div id="wrap" class="wrap">
<a id="top" class="top-anchor" accesskey="t"></a>

<div id="inner-wrap">
<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks clear-after" role="menubar">
<li class="scroll-breadcrumbs breadcrumbs">
<span class="crumb"><a href="./index.html" accesskey="h" data-navbar-reference="index"><span>antiX - oldforums archive</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./orphaned-posts-f27/index.html"><span>Orphaned Posts</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./development-old-f39/index.html"><span>Development (Old)</span></a></span>
</li>
</ul>

<div id="page-body" class="page-body" role="main">
<div class="postprofile_container postprofile_Left">
<div>
<div class="topictitleheader"><span class="statictopictitle">topic title: </span><span class="topic-titleb"><a href="./antix-14-a3-2-mini-release-testers-needed-t5381-s30.html">antiX-14-a3.2 mini-release -- Testers Needed!</a></div>
<div class="pagination">
63 posts
<ul>
<li class="arrow previous"><span class="jumptopagez">jump to page: </span><a class="button button-icon-only" href="./antix-14-a3-2-mini-release-testers-needed-t5381-s15.html" rel="prev" role="button"><span class="sr-only">Previous</span></a></li>
<li><a class="button" href="./antix-14-a3-2-mini-release-testers-needed-t5381.html" role="button">1</a></li>
<li><a class="button" href="./antix-14-a3-2-mini-release-testers-needed-t5381-s15.html" role="button">2</a></li>
<li class="active"><span>3</span></li>
<li><a class="button" href="./antix-14-a3-2-mini-release-testers-needed-t5381-s45.html" role="button">4</a></li>
<li><a class="button" href="./antix-14-a3-2-mini-release-testers-needed-t5381-s60.html" role="button">5</a></li>
<li class="arrow next"><a class="button button-icon-only" href="./antix-14-a3-2-mini-release-testers-needed-t5381-s45.html" rel="next" role="button"><span class="sr-only">Next</span></a></li>
</ul>
</div>
</div>

<div class="action-bar bar-top">
</div>
<div class="viewtopic_wrapper">
<div id="p_38144" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile38144">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content38144">
<time datetime="2014-11-17T17:23">posted: 2014-11-17 &nbsp; 17:23</time>
<span class="permalink"><a href="./antix-14-a3-2-mini-release-testers-needed-t5381-s30.html#p38144" title="permalink">#31</a></span>

<div class="content">@dave concerning the gtk problem <br>
<br>
maybe this will help.<br>
<br>
desktop-defaults-run is running using the root account's gtk settings. any app running with desktop-defaults-run will launch with whatever the gtk theme is for the root account, which at the moment happens to be Raleigh.<br>
<br>
apps launched directly by the user through the application menu (rox-term instead of terminal for instance) launch with the user's gtk settings.<br>
<br>
***edit*** interestingly I don't seem to be able to change the root account's gtk theme with appearance. The changes don't take effect.</div>
</div>
</div>

</div>
</div>
<div id="p_38146" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile38146">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,062</span></div>

</div>
</div>
<section class="desktop-hide">
<a href="#" class="username">Dave</a>  </section>
</dt>
<dd class="profile-joined">Joined: 20 Jan 2010</dd>
</dl>
<div class="postbody">
<div id="post_content38146">

<time datetime="2014-11-17T17:55">posted: 2014-11-17 &nbsp; 17:55</time>
<span class="permalink"><a href="./antix-14-a3-2-mini-release-testers-needed-t5381-s30.html#p38146" title="permalink">#32</a></span>

<div class="content">Now that is really strange that desktop-defaults-run is running as root. Does it even ask for a password?<br>
I have never had it ask for the root password.... But I cannot test at the moment and verify. They do all seem to be gtk 3 though?<br>
<br>
For the root account you will need to have bashrc load /usr/local/lib/desktop-session/desktop-session-xdg-dirs.sh<br>
It needs the export for gtk2, but I do not have one for gtk3....</div>
</div>
</div>

</div>
</div>
<div id="p_38148" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile38148">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content38148">

<time datetime="2014-11-17T18:05">posted: 2014-11-17 &nbsp; 18:05</time>
<span class="permalink"><a href="./antix-14-a3-2-mini-release-testers-needed-t5381-s30.html#p38148" title="permalink">#33</a></span>

<div class="content"><blockquote><div><cite>Dave wrote:</cite>Now that is really strange that desktop-defaults-run is running as root. Does it even ask for a password?<br>
I have never had it ask for the root password.... But I cannot test at the moment and verify. They do all seem to be gtk 3 though?<br>
<br>
For the root account you will need to have bashrc load /usr/local/lib/desktop-session/desktop-session-xdg-dirs.sh<br>
It needs the export for gtk2, but I do not have one for gtk3....</div></blockquote>
apps don't launch as root and no password is asked for, but it is using the Raleigh theme, which is the root accounts (or maybe default?) theme.</div>
</div>
</div>

</div>
</div>
<div id="p_38153" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile38153">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,308</span></div>

</div>
</div>
<span class="username">BitJam</span>
</dt>
<dd class="profile-joined">Joined: 31 Aug 2009</dd>
</dl>
<div class="postbody">
<div id="post_content38153">

<time datetime="2014-11-17T19:45">posted: 2014-11-17 &nbsp; 19:45</time>
<span class="permalink"><a href="./antix-14-a3-2-mini-release-testers-needed-t5381-s30.html#p38153" title="permalink">#34</a></span>

<div class="content"><blockquote><div><cite>skidoo wrote:</cite>here are fbgrab images </div></blockquote><strong><span style="color: darkblue">Brilliant!</span></strong> Thank you. I will send you some new configs to try.
<blockquote class="uncited"><div>(er, fbcat)(why is fbcat not pre-installed? it's only 59Kb)</div></blockquote>Didn't know about fbcat. Thanks.</div>
</div>
</div>

</div>
</div>
<div id="p_38174" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile38174">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content38174">

<time datetime="2014-11-18T15:43">posted: 2014-11-18 &nbsp; 15:43</time>
<span class="permalink"><a href="./antix-14-a3-2-mini-release-testers-needed-t5381-s30.html#p38174" title="permalink">#35</a></span>

<div class="content">the gtk theme issue I mentioned earlier also occurs on the a3 (not a3.2) liveCD, and on an installed system. It almost seems random. I haven't been able to figure out when the problem comes up, but I think its when the filemanagers launch.<br>
<br>
Also, I think the filemanager-switching with the desktops is overly complicated. It made sense back when there wasn't a desktop-session app running but not so much now. Plus since you have to enable a switch in a .conf file to make filemanager selected in desktop-defaults actually become the default. The whole desktop-defaults system makes sense except for the filemanager selection. I think the auto-filemanager switch with the desktop environment needs done away with in favor of the selection in desktop-defaults.</div>
</div>
</div>

</div>
</div>
<div id="p_38175" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile38175">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content38175">

<time datetime="2014-11-18T18:51">posted: 2014-11-18 &nbsp; 18:51</time>
<span class="permalink"><a href="./antix-14-a3-2-mini-release-testers-needed-t5381-s30.html#p38175" title="permalink">#36</a></span>

<div class="content">development video of the gtk theme issue I've been babbling about.<br>
<br>
this video is unlisted on my channel. <span data-s9e-mediaembed="youtube" style="display:inline-block;width:100%;max-width:640px"><span style="display:block;overflow:hidden;position:relative;padding-bottom:56.25%"><iframe allowfullscreen="" scrolling="no" style="background:url(https://i.ytimg.com/vi/LWfCqDwoakw/hqdefault.jpg) 50% 50% / cover;border:0;height:100%;left:0;position:absolute;width:100%" src="https://www.youtube.com/embed/LWfCqDwoakw"></iframe></span></span></div>
</div>
</div>

</div>
</div>
<div id="p_38182" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile38182">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,062</span></div>

</div>
</div>
<span class="username">Dave</span>
</dt>
<dd class="profile-joined">Joined: 20 Jan 2010</dd>
</dl>
<div class="postbody">
<div id="post_content38182">

<time datetime="2014-11-19T03:55">posted: 2014-11-19 &nbsp; 03:55</time>
<span class="permalink"><a href="./antix-14-a3-2-mini-release-testers-needed-t5381-s30.html#p38182" title="permalink">#37</a></span>

<div class="content">Digging and Digging and Digging... but gtk issues still persist.<br>
Could you try a bit of a hack for now?<br>
<br>
Edit /usr/local/bin/desktop-defaults-run <br>
@ line #4 enter
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>export GTK2_RC_FILES="$HOME/.gtkrc-2.0"
</code></pre></div>
However this will only fix the problem of the gtk theme not being found for anything started with desktop-defaults.<br>
This problem was a massive PITA and now has come up again, so I do not know how much trust I put into this being the full solution. <br>
<br>
I have read countless posts online that seem to have the same problem, but now instead of truely fixing the problem the"fix" is to copy entire themes to ~/.gtk.... or throw the above export line into several .desktop files, scripts, startups, etc.... <br>
<br>
If you would like to see a real mess remove the above export line from the bottom of /usr/local/lib/desktop-session/desktop-session-xdg-dirs.sh.<br>
<br>
This seems to be related to certain programs as they are seemingly orphaned. (PPID = 1). Any that are based on desktop-session or another process like the Window Manager, have the export from desktop-session-xdg-dirs.sh and open gtk correctly.<br>
<br>
Now on that note, the above hack does not seem to patch it 100% either as it only refers to gtk2 not gtk3 items... however I cannot find an similar export line for gtk3 so that leaves them hanging with the default raleigh theme...<br>
<br>
On that note, researching the ability to use gtk(2)(3) apps standalone seems to be done away with for some reason (intentional or not I do not know). Visiting various IRC channels seems to suggest that nobody is really sure why the various gtkrc's / gtk.ini files are being ignored. So I thought well lxappearance still allows for the options, but why then does lxde not have this issue? Well it seems that lxde session has a built in xsettings daemon (good for moniter, fonts, icons, colors, mouse, keyboard,sound,etc settings). So lxde has the option but only for the sake of making lxappearance standalone, because in reality lxde does not use the rc/ini files directly. This made me investigate further into how xfce does gtk handling, and why Jerry did not have any bash exported variables to make it work in MX. And as it seems xfce is using an xsettings daemon as well (xfsettingsd). KDE, GNOME, MATE, UNITY, etc... all xsettings daemons. <br>
<br>
So installing xsettingsd as a test and setting up a config (~/.xsettingsd) like so....
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Net/DoubleClickTime 400
Net/DoubleClickDistance 5
Net/DndDragThreshold 8
Net/CursorBlink 1
Net/CursorBlinkTime 1200
Net/ThemeName"MediterraneanDark"
Net/IconThemeName"hicolor"
Net/SoundThemeName"default"
Net/EnableEventSounds 0
Net/EnableInputFeedbackSounds 0
Xft/Antialias 1
Xft/Hinting 1
Xft/HintStyle"hintslight"
Xft/RGBA"rgb"
Xft/DPI 98304
Gtk/CanChangeAccels 1
Gtk/ColorPalette"black:white:gray50:red:purple:blue:light blue:green:yellow:orange:lavender:brown:goldenrod4:dodger blue:pink:light green:gray10:gray30:gray75:gray90"
Gtk/FontName"Liberation Sans 10"
Gtk/IconSizes""
Gtk/KeyThemeName""
Gtk/ToolbarStyle"icons"
Gtk/ToolbarIconSize 3
Gtk/IMPreeditStyle""
Gtk/IMStatusStyle""
Gtk/MenuImages 1
Gtk/ButtonImages 1
Gtk/MenuBarAccel"F10"
Gtk/CursorThemeName""
Gtk/CursorThemeSize 0
Gtk/IMModule""
</code></pre></div>
and adding xsettingsd &amp; to desktop-session startup seems to make everything look correct and a little more crisp.<br>
<br>
Now xsettingsd has not GUI for configuration and lxappearance does not work with it. So this is not really usable (and it is one more thing running that really should not be) . However after a few more days research it seems that gtk is loosing the option to run independent in favor of needing a xsettings daemon. In the same fashion as sysv-init being supported as an alternate init system to systemd, it is becoming extremely difficult to use...<br>
<br>
Though it does seem overwhelmingly due to the desktop* scripts. Removing the export from /usr/local/lib/desktop-session-xdg-dirs.sh will show the true colors... as will doing a fresh install of 13.2 and updating it to testing / sid. (At least here). So if there is any other information that anyone can come up with to try to see how to make it work as before (like in antiX 13.2 *NOT UPDATED*). It would be extremely appreciated. Otherwise I think we will have to move to using a minimal xsettings daemon.<br>
I have not looked into how any other minimal system finds a solution to this. Maybe that is the next direction to look.</div>
</div>
</div>

</div>
</div>
<div id="p_38183" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile38183">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,062</span></div>

</div>
</div>
<span class="username">Dave</span>
</dt>
<dd class="profile-joined">Joined: 20 Jan 2010</dd>
</dl>
<div class="postbody">
<div id="post_content38183">

<time datetime="2014-11-19T04:07">posted: 2014-11-19 &nbsp; 04:07</time>
<span class="permalink"><a href="./antix-14-a3-2-mini-release-testers-needed-t5381-s30.html#p38183" title="permalink">#38</a></span>

<div class="content"><blockquote><div><cite>dolphin_oracle wrote:</cite>the gtk theme issue I mentioned earlier also occurs on the a3 (not a3.2) liveCD, and on an installed system. It almost seems random. I haven't been able to figure out when the problem comes up, but I think its when the filemanagers launch.<br>
<br>
Also, I think the filemanager-switching with the desktops is overly complicated. It made sense back when there wasn't a desktop-session app running but not so much now. Plus since you have to enable a switch in a .conf file to make filemanager selected in desktop-defaults actually become the default. The whole desktop-defaults system makes sense except for the filemanager selection. I think the auto-filemanager switch with the desktop environment needs done away with in favor of the selection in desktop-defaults.</div></blockquote>
Turning on the override in the config produces the desired result?<br>
If so do you think this should be the default?<br>
And on that note which file manager should be set default?<br>
<br>
I would be ok with removing the auto switching entirely, but I though it was desired to have the same file manager as desktop option.<br>
I don't know about everyone else here but personally I would strongly dislike having to reset defaults on each live cd boot, rather than choosing another session. This was one of the driving motivators, because it was very unamusing to boot space-icewm option and having to change every menu item from rox to space. Now that might not be such a big deal anymore because the one spot changes all, but..... that is just my opinion. ( Probably similar in feeling to the startup window stuff and having to close it every boot.)</div>
</div>
</div>

</div>
</div>
<div id="p_38188" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile38188">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>

<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content38188">

<time datetime="2014-11-19T10:53">posted: 2014-11-19 &nbsp; 10:53</time>
<span class="permalink"><a href="./antix-14-a3-2-mini-release-testers-needed-t5381-s30.html#p38188" title="permalink">#39</a></span>

<div class="content"><blockquote class="uncited"><div>Turning on the override in the config produces the desired result?<br>
If so do you think this should be the default?<br>
And on that note which file manager should be set default?<br>
<br>
I would be ok with removing the auto switching entirely, but I though it was desired to have the same file manager as desktop option.<br>
I don't know about everyone else here but personally I would strongly dislike having to reset defaults on each live cd boot, rather than choosing another session. This was one of the driving motivators, because it was very unamusing to boot space-icewm option and having to change every menu item from rox to space. Now that might not be such a big deal anymore because the one spot changes all, but..... that is just my opinion. ( Probably similar in feeling to the startup window stuff and having to close it every boot.)
</div></blockquote>
can the default be set to antiX-Filemanager.sh, so that you can choose rox, spacefm, or antiX-Filemanager (or switch with desktop, or whatever) from desktop-defaults. This would get rid of the need for the override, and have the default be the switching, but when another choice is set in desktop-defaults, it will automatically"stick".<br>
<br>
for me, choice of desktop doesn't necessarily mean I want to switch file-managers, and its jarring if you don't expect it, but wasn't a big deal in 13 since there wasn't an app purporting to set the default file-manager. Now that there is an app for setting the default file manager, the choices of that app should really be respected without having to dig into a .conf file to flip a switch.</div>
</div>
</div>

</div>
</div>
<div id="p_38191" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile38191">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,062</span></div>

</div>
</div>
<span class="username">Dave</span>
</dt>
<dd class="profile-joined">Joined: 20 Jan 2010</dd>
</dl>
<div class="postbody">
<div id="post_content38191">

<time datetime="2014-11-19T15:20">posted: 2014-11-19 &nbsp; 15:20</time>
<span class="permalink"><a href="./antix-14-a3-2-mini-release-testers-needed-t5381-s30.html#p38191" title="permalink">#40</a></span>

<div class="content">Hmm interesting...<br>
yes I can separate them again and give it a go, but that does duplicate some code.<br>
Seeing how they did the same thing antiX-FileManager.sh and now desktop-defaults i did combine them and made it configurable... I will relook into it though. Maybe the config file could be exchanged for just a .desktop file set as the default.</div>
</div>
</div>

</div>
</div>
<div id="p_38202" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile38202">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content38202">

<time datetime="2014-11-19T21:16">posted: 2014-11-19 &nbsp; 21:16</time>
<span class="permalink"><a href="./antix-14-a3-2-mini-release-testers-needed-t5381-s30.html#p38202" title="permalink">#41</a></span>

<div class="content"><blockquote class="uncited"><div>Edit /usr/local/bin/desktop-defaults-run<br>
@ line #4 enter<br>
Code:<br>
export GTK2_RC_FILES="$HOME/.gtkrc-2.0"<br>
<br>
<br>
However this will only fix the problem of the gtk theme not being found for anything started with desktop-defaults.<br>
This problem was a massive PITA and now has come up again, so I do not know how much trust I put into this being the full solution. </div></blockquote>
well, at a minimum it cleared up the problem for desktop-default-run. apps run that way now launch with the correct gtk theme.</div>
</div>
</div>
<div class="back2top">

</div>
</div>
</div>
<div id="p_38208" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile38208">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,062</span></div>

</div>
</div>
<section class="desktop-hide">
 <a href="#" class="username">Dave</a> </section>
</dt>
<dd class="profile-joined">Joined: 20 Jan 2010</dd>
</dl>
<div class="postbody">
<div id="post_content38208">

<time datetime="2014-11-20T04:19">posted: 2014-11-20 &nbsp; 04:19</time>
<span class="permalink"><a href="./antix-14-a3-2-mini-release-testers-needed-t5381-s30.html#p38208" title="permalink">#42</a></span>

<div class="content">@ D.O.<br>
If you would like to try the updated desktop-defaults-run have a look here<br>

<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"https://github.com/antiX-Linux/desktop-defaults"<br>linktext was:"https://github.com/antiX-Linux/desktop-defaults"<br>====================================<br>
<br>
<br>
You should be able to download<br>
/usr/local/bin/desktop-defaults-run<br>
/usr/share/applications/antix/desktop-defaults-follow-fm.desktop<br>
/usr/share/desktop-defaults/file-manager.desktop<br>
<br>
and copy them into that location on the system.<br>
running desktop-defaults-run -fm should use the selected (the new .desktop and the changed symlink make it follow by default)<br>
running desktop-defaults-run -fm --follow should follow the session (or running the new .desktop file)<br>
<br>
Related to this
<blockquote><div><cite>dolphin_oracle wrote:</cite><blockquote class="uncited"><div>Edit /usr/local/bin/desktop-defaults-run<br>
@ line #4 enter<br>
Code:<br>
export GTK2_RC_FILES="$HOME/.gtkrc-2.0"<br>
<br>
<br>
However this will only fix the problem of the gtk theme not being found for anything started with desktop-defaults.<br>
This problem was a massive PITA and now has come up again, so I do not know how much trust I put into this being the full solution. </div></blockquote>
well, at a minimum it cleared up the problem for desktop-default-run. apps run that way now launch with the correct gtk theme.</div></blockquote>
Do you feel that this"fixes" the gtk problem well enough ?</div>
</div>
</div>

</div>
</div>
<div id="p_38212" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile38212">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content38212">

<time datetime="2014-11-20T16:52">posted: 2014-11-20 &nbsp; 16:52</time>
<span class="permalink"><a href="./antix-14-a3-2-mini-release-testers-needed-t5381-s30.html#p38212" title="permalink">#43</a></span>

<div class="content"><blockquote class="uncited"><div>Do you feel that this"fixes" the gtk problem well enough ?</div></blockquote>
I think yes. At least, I haven't been able to launch an app via any other method (command line, run box, etc...) and duplicate the problem since adding that export line.</div>
</div>
</div>

</div>
</div>
<div id="p_38213" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile38213">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,445</span></div>

</div>
</div>
<span class="username">skidoo</span>
</dt>
<dd class="profile-joined">Joined: 09 Feb 2012</dd>
</dl>
<div class="postbody">
<div id="post_content38213">

<time datetime="2014-11-21T00:51">posted: 2014-11-21 &nbsp; 00:51</time>
<span class="permalink"><a href="./antix-14-a3-2-mini-release-testers-needed-t5381-s30.html#p38213" title="permalink">#44</a></span>

<div class="content"><blockquote class="uncited"><div> 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://permalink.gmane.org/gmane.linux.file-systems.aufs.user/1393"<br>linktext was:"http://permalink.gmane.org/gmane.linux. ... .user/1393"<br>====================================<br>
<br>
"If there are something left under your .wh..wh.plnk or .wh..wh..tmp, it is an unexpected situation for aufs and may be a problem."<br>
-- Junjiro R. Okajima (aufs author/maintainer)</div></blockquote> dynamic root persistence, semi-automatic mode<br>
I discovered ~68Mb of files sitting in /live/aufs-ram/.wh..wh.plnk/<br>
<br>
While skimming the content in some of the files pathed here, I found a reference to"mtpaint" (an app I never use).<br>
I've arrived at this guess, as to the scenario which produced the stranded files:<br>
<br>
= = = = =<br>
<br>
In testing the 14-a3.2 mini-release this time, I had initially chosen a TINY (smallest offered) rootfs size.<br>
When BitJam asked for"fbgrab" screencaps, I installed fbcat package... followed by (dunno another way to convert PPM to jpg)<br>
imagemagick package, plus its boatload of dependent packages. <br>
<br>
At shutdown, the persist-save operation failed, due to insufficent space (changes currently held in RAM exceeded size of rootfs container).<br>
Mumbling"aw, crap...duh!" I rebooted, resized the rootfs, installed fbcat+imagemagick again &amp; successfully performed persist-save.<br>
<br>
Log from the imagemagick install shows
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Removed the following packages:
libjpeg62

Upgraded the following packages:
. . .
mtpaint (3.40-2+b1) to 3.40-2+b2
. . .</code></pre></div>I'm calling this a"bug". <br>
68Mb isn't earth-shattering, but the stranded files unnecessarily bloat the rootfs<br>
&amp; could accumulate, resulting from multiple (failed) persist-resize operations.<br>
<br>
<span style="color: blue">edit:<br>
I deleted the files from"plnk" directory immediately after reporting this (Nov21) and have been monitoring it for new files.<br>
Today, mid-session, one new file appeared.<br>
filename is <strong>10383.875271</strong></span><span style="color: red"> the name probably indicates"dirInode.fileInode", but IDK how to match that against current inodes </span><br>
<span style="color: blue">filesize is <strong>139 bytes</strong><br>
permission/owner: <strong>-rw-r--r-- root:root</strong><br>
lastModified: <strong>2014-10-08 07:22</strong><br>
<br>
file contains these 4 lines plaintext</span>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>root mlocate 2755 /usr/bin/mlocate
root ssl-cert 710   / etc/ssl/private
root games 2755    /usr/games/gweled
root crontab 2755   /usr/bin/crontab</code></pre></div>
FWIW, during this install, I've not used crontab nor gweled (nor messed with etc/ssl)<br>
[/color]<br>
<br>
==================<br>
<br>
update:<br>
<br>
<strong>Someone else should verify this. AFAIK, it is consistently repeatable:</strong><br>
<br>
On a freshly installed iso, setup dynamic root persistence, semi-automatic mode.<br>
Inspect <span style="color: red">/live/aufs-ram/.wh..wh.plnk/</span> and note that it is an empty dir.<br>
From terminal, or via synaptic (same result either way)"apt install aspell" to upgrade that package<br>
and, immidiately afterward, note that stranded files now exist in the .wh..wh.plnk directory.<br>
At shutdown, perform a persist-save.<br>
Upon reboot, note that the stranded files remain (are persisted).<br>
<br>
I've determined that files are getting written to the plnk directory during every / any package upgrade operation.<br>
Using the aspell example, I determined that one of the stranded files is a copy (md5sum identical) to <strong>/</strong>usr/bin/aspell-input<br>
and, across several tests (upgrading various packages) I've determined that the plnk directory can be (and should be) removed prior to performing a persist-save.<br>
<br>
<span style="color: silver">TODO: check whether files accumulated in plnk directory of my antix 13.2 pendrive</span><br>
<br>
FWIW, after emptying the plnk dir, I've tested manually editing <strong>/</strong>usr/bin/aspell-input and the manual edit does not cause appearance of a new entry in the plnk directory.</div>
<div class="notice">
Last edited by <b>skidoo</b> on 27 Nov 2014, 05:30, edited 2 times in total.
</div>
</div>
</div>

</div>
</div>
<div id="p_38272" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile38272">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,445</span></div>

</div>
</div>
<span class="username">skidoo</span>
</dt>
<dd class="profile-joined">Joined: 09 Feb 2012</dd>
</dl>
<div class="postbody">
<div id="post_content38272">

<time datetime="2014-11-25T00:16">posted: 2014-11-25 &nbsp; 00:16</time>
<span class="permalink"><a href="./antix-14-a3-2-mini-release-testers-needed-t5381-s30.html#p38272" title="permalink">#45</a></span>

<div class="content">@BitJam<br>
here are <strong>second-time-around (revised templates)</strong> fbgrab images<br>
<br>
all these look perfect in Ctrl+Alt+F5 consoles<br>
1920x1080 
1600x900 
1440x900 
...but for the latter 2, during live init, the text is still overflowing past the bottom decorative frame.<br>
I tried tweaking the template values, but doing so only seemed to affect the (screencapped) terminal output.<br>
(? the initramfs contains an overriding bootsplash default template?)<br>
<br>
tgz file contained a"verbose-1366x768.png" ( <span style="color: red">note: a"silent-" imagefile for that resolution was absent, so I copied one into place</span> )<br>
but it seems my system doesn't support a 1366x768 mode.
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>/var/log/splash-all.log

"FBIOCONDECOR_SETSTATE failed, error code 22"</code></pre></div></div>
</div>
</div>

</div>
</div>
</div>
<div class="action-bar bar-bottom">

<div class="pagination">
63 posts
<ul>
<li class="arrow previous"><span class="jumptopagez">jump to page: </span><a class="button button-icon-only" href="./antix-14-a3-2-mini-release-testers-needed-t5381-s15.html" rel="prev" role="button"><span class="sr-only">Previous</span></a></li>
<li><a class="button" href="./antix-14-a3-2-mini-release-testers-needed-t5381.html" role="button">1</a></li>
<li><a class="button" href="./antix-14-a3-2-mini-release-testers-needed-t5381-s15.html" role="button">2</a></li>
<li class="active"><span>3</span></li>
<li><a class="button" href="./antix-14-a3-2-mini-release-testers-needed-t5381-s45.html" role="button">4</a></li>
<li><a class="button" href="./antix-14-a3-2-mini-release-testers-needed-t5381-s60.html" role="button">5</a></li>
<li class="arrow next"><a class="button button-icon-only" href="./antix-14-a3-2-mini-release-testers-needed-t5381-s45.html" rel="next" role="button"><span class="sr-only">Next</span></a></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="scrollToTopText"><a href="#top">goto top of page</a></div>

</div>
</body></html>
