<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>antiX-15-rc1.1: Serious errors caused by &quot;eject&quot; [Solved] - Page 2 - antiX oldforums archive</title>
   
<link rel="stylesheet" href="../aaa_style.css">
<script type="text/javascript" src ="../aaa_oldforums.js"></script>
</head>
<body>
<div id="wrap" class="wrap">
<a id="top" class="top-anchor" accesskey="t"></a>

<div id="inner-wrap">
<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks clear-after" role="menubar">
<li class="scroll-breadcrumbs breadcrumbs">
<span class="crumb"><a href="./index.html" accesskey="h" data-navbar-reference="index"><span>antiX - oldforums archive</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./orphaned-posts-f27/index.html"><span>Orphaned Posts</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./development-old-f39/index.html"><span>Development (Old)</span></a></span>
</li>
</ul>

<div id="page-body" class="page-body" role="main">
<div class="postprofile_container postprofile_Left">
<div>
<div class="topictitleheader"><span class="statictopictitle">topic title: </span><span class="topic-titleb"><a href="./antix-15-rc1-1-serious-errors-caused-by-eject-solv-t5692-s15.html">antiX-15-rc1.1: Serious errors caused by &quot;eject&quot; [Solved]</a></div>
<div class="pagination">
29 posts
<ul>
<li class="arrow previous"><span class="jumptopagez">jump to page: </span><a class="button button-icon-only" href="./antix-15-rc1-1-serious-errors-caused-by-eject-solv-t5692.html" rel="prev" role="button"><span class="sr-only">Previous</span></a></li>
<li><a class="button" href="./antix-15-rc1-1-serious-errors-caused-by-eject-solv-t5692.html" role="button">1</a></li>
<li class="active"><span>2</span></li>
</ul>
</div>
</div>

<div class="action-bar bar-top">
</div>
<div class="viewtopic_wrapper">
<div id="p_41505" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile41505">
<dt class="has-profile-rank has-avatar avatar-username">
<span class="username">anticapitalista</span>
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 5,955</span></div>

</div>
</div>
</dt>
<dd class="profile-rank">Site Admin</dd>
<dd class="profile-joined">Joined: 11 Sep 2007</dd>
</dl>
<div class="postbody">
<div id="post_content41505">
<time datetime="2015-06-28T23:25">posted: 2015-06-28 &nbsp; 23:25</time>
<span class="permalink"><a href="./antix-15-rc1-1-serious-errors-caused-by-eject-solv-t5692-s15.html#p41505" title="permalink">#16</a></span>

<div class="content">Also, booting on real hardware a live cd without toram, on reboot, the media is ejected as it should. <br>
On installed system, eject works fine.</div>
</div>
</div>

</div>
</div>
<div id="p_41506" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile41506">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
 <div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,308</span></div>

</div>
</div>
<span class="username">BitJam</span>
</dt>
<dd class="profile-joined">Joined: 31 Aug 2009</dd>
</dl>
<div class="postbody">
<div id="post_content41506">

<time datetime="2015-06-28T23:31">posted: 2015-06-28 &nbsp; 23:31</time>
<span class="permalink"><a href="./antix-15-rc1-1-serious-errors-caused-by-eject-solv-t5692-s15.html#p41506" title="permalink">#17</a></span>

<div class="content">I verified that antiX-15-beta1 fails if you boot to X and tell toram-eject to eject.<br>
<br>
One trick I've found is that the programs under /live/bin/ still work. So I set"PATH=/live/bin" after the system got borked and I could still run dmesg and tail. I've attached a screen shot of the some of the error messages in dmesg. The rest are similar.</div>
</div>
</div>

</div>
</div>
<div id="p_41507" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile41507">
<dt class="has-profile-rank has-avatar avatar-username">
<span class="username">anticapitalista</span>
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 5,955</span></div>

</div>
</div>
</dt>
<dd class="profile-rank">Site Admin</dd>
<dd class="profile-joined">Joined: 11 Sep 2007</dd>
</dl>
<div class="postbody">
<div id="post_content41507">

<time datetime="2015-06-28T23:32">posted: 2015-06-28 &nbsp; 23:32</time>
<span class="permalink"><a href="./antix-15-rc1-1-serious-errors-caused-by-eject-solv-t5692-s15.html#p41507" title="permalink">#18</a></span>

<div class="content">More info:<br>
<br>
Boot liveusb with toram option.<br>
Insert a video dvd at desktop<br>
Open a terminal and type mplayer /dev/sr0 - dvd plays.<br>
Stop dvd and in teminal type eject, dvd ejects and no issues rebooting or opening other apps.</div>
</div>
</div>

</div>
</div>
<div id="p_41508" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile41508">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,308</span></div>

</div>
</div>
<span class="username">BitJam</span>
</dt>
<dd class="profile-joined">Joined: 31 Aug 2009</dd>
</dl>
<div class="postbody">
<div id="post_content41508">

<time datetime="2015-06-28T23:37">posted: 2015-06-28 &nbsp; 23:37</time>
<span class="permalink"><a href="./antix-15-rc1-1-serious-errors-caused-by-eject-solv-t5692-s15.html#p41508" title="permalink">#19</a></span>

<div class="content">I Googled the first error message"vfs busy inodes on changed media or resized disk" and 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://thebigbyte.blogspot.com/2010/02/vfs-busy-inodes-on-changed-media-or.html"<br>linktext was:"the first hit"<br>====================================<br>
 says:<blockquote class="uncited"><div>It means your cdrom drive has been ejected without unmounting.</div></blockquote> <br>
We've been using lazy umount (-l) in the initrd to umount /live/boot-dev if it no longer needs to be mounted. I've always disliked doing this. <br>
<br>
I can try disabling the umount in the live initrd and see if I can umount and eject successfully from the command line after we have booted.</div>
</div>
</div>

</div>
</div>
<div id="p_41509" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile41509">
<dt class="has-profile-rank has-avatar avatar-username">
<span class="username">anticapitalista</span>
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 5,955</span></div>

</div>
</div>
</dt>
<dd class="profile-rank">Site Admin</dd>
<dd class="profile-joined">Joined: 11 Sep 2007</dd>
</dl>
<div class="postbody">
<div id="post_content41509">

<time datetime="2015-06-29T00:01">posted: 2015-06-29 &nbsp; 00:01</time>
<span class="permalink"><a href="./antix-15-rc1-1-serious-errors-caused-by-eject-solv-t5692-s15.html#p41509" title="permalink">#20</a></span>

<div class="content">BTW - MX-14.4 doesn't work either with toram and eject once at desktop</div>
</div>
</div>

</div>
</div>
<div id="p_41510" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile41510">
<dt class="has-profile-rank has-avatar avatar-username">
<span class="username">anticapitalista</span>
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 5,955</span></div>

</div>
</div>
</dt>
<dd class="profile-rank">Site Admin</dd>
<dd class="profile-joined">Joined: 11 Sep 2007</dd>
</dl>
<div class="postbody">
<div id="post_content41510">

<time datetime="2015-06-29T00:07">posted: 2015-06-29 &nbsp; 00:07</time>
<span class="permalink"><a href="./antix-15-rc1-1-serious-errors-caused-by-eject-solv-t5692-s15.html#p41510" title="permalink">#21</a></span>

<div class="content">antiX-13.2 does work correctly. (64bit no CONFIG_APM in the kernel)</div>
</div>
</div>

</div>
</div>
<div id="p_41515" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile41515">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,028</span></div>

</div>
</div>
<span class="username">SamK</span>
</dt>
<dd class="profile-joined">Joined: 21 Aug 2011</dd>
</dl>
<div class="postbody">
<div id="post_content41515">

<time datetime="2015-06-29T15:35">posted: 2015-06-29 &nbsp; 15:35</time>
<span class="permalink"><a href="./antix-15-rc1-1-serious-errors-caused-by-eject-solv-t5692-s15.html#p41515" title="permalink">#22</a></span>

<div class="content">Apologies for cluttering the thread. Topic moved to RC1.1.</div>
<div class="notice">
Last edited by <b>SamK</b> on 29 Jun 2015, 18:12, edited 2 times in total.
</div>
</div>
</div>

</div>
</div>
<div id="p_41516" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile41516">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content41516">

<time datetime="2015-06-29T16:03">posted: 2015-06-29 &nbsp; 16:03</time>
<span class="permalink"><a href="./antix-15-rc1-1-serious-errors-caused-by-eject-solv-t5692-s15.html#p41516" title="permalink">#23</a></span>

<div class="content">samk, you got the wrong thread. can you move your post to the rc1.1 feedback thread?</div>
</div>
</div>

</div>
</div>
<div id="p_41520" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile41520">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,308</span></div>

</div>
</div>
<span class="username">BitJam</span>
</dt>
<dd class="profile-joined">Joined: 31 Aug 2009</dd>
</dl>
<div class="postbody">
<div id="post_content41520">

<time datetime="2015-06-29T19:06">posted: 2015-06-29 &nbsp; 19:06</time>
<span class="permalink"><a href="./antix-15-rc1-1-serious-errors-caused-by-eject-solv-t5692-s15.html#p41520" title="permalink">#24</a></span>

<div class="content">I've solved the problem. I plan to make a new initd.gz for rc1.1 available later today.</div>
</div>
</div>

</div>
</div>
<div id="p_41521" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile41521">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content41521">

<time datetime="2015-06-29T19:11">posted: 2015-06-29 &nbsp; 19:11</time>
<span class="permalink"><a href="./antix-15-rc1-1-serious-errors-caused-by-eject-solv-t5692-s15.html#p41521" title="permalink">#25</a></span>

<div class="content"><blockquote><div><cite>BitJam wrote:</cite>I've solved the problem. I plan to make a new initd.gz for rc1.1 available later today.</div></blockquote>
what was it?, if you don't mind me asking.</div>
<div class="postcontent_footer">

</div>
</div>
</div>

</div>
</div>
<div id="p_41522" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile41522">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,308</span></div>

</div>
</div>
<span class="username">BitJam</span>
</dt>
<dd class="profile-joined">Joined: 31 Aug 2009</dd>
</dl>
<div class="postbody">
<div id="post_content41522">

<time datetime="2015-06-29T19:18">posted: 2015-06-29 &nbsp; 19:18</time>
<span class="permalink"><a href="./antix-15-rc1-1-serious-errors-caused-by-eject-solv-t5692-s15.html#p41522" title="permalink">#26</a></span>

<div class="content">I will explain later. I've got a bunch of stuff to do and my English-language module hasn't really kicked in yet today.</div>
</div>
</div>

</div>
</div>
<div id="p_41523" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile41523">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content41523">

<time datetime="2015-06-29T19:21">posted: 2015-06-29 &nbsp; 19:21</time>
<span class="permalink"><a href="./antix-15-rc1-1-serious-errors-caused-by-eject-solv-t5692-s15.html#p41523" title="permalink">#27</a></span>

<div class="content"><blockquote><div><cite>BitJam wrote:</cite>I will explain later. I've got a bunch of stuff to do and my English-language module hasn't really kicked in yet today.</div></blockquote>
cool beans.</div>
</div>
</div>

</div>
</div>
<div id="p_41524" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile41524">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,308</span></div>

</div>
</div>
<span class="username">BitJam</span>
</dt>
<dd class="profile-joined">Joined: 31 Aug 2009</dd>
</dl>
<div class="postbody">
<div id="post_content41524">

<time datetime="2015-06-29T19:32">posted: 2015-06-29 &nbsp; 19:32</time>
<span class="permalink"><a href="./antix-15-rc1-1-serious-errors-caused-by-eject-solv-t5692-s15.html#p41524" title="permalink">#28</a></span>

<div class="content">There was a toram bug fix about a year ago that caused this new bug. The problem is that I needed to mount /live/boot-dev/antiX/linuxfs *before* running the"toram" code. This is what kept making it impossible to fully umount the boot device. There is no way to order everything to get rid of all the bugs. <br>
<br>
I fixed it this time by unmounting /live/boot-dev/antiX/linuxfs after a successful toram copy and then mounting /live/to-ram/linuxfs. This fixed the problem and should prevent me from re-creating old bugs had I moved the to-ram code to a place earlier in the boot process.<br>
<br>
I also removed the dastardly"umount -l" (lazy umount) which had been masking this problem. I replaced it with a loop that tries to do a normal umount for 2.5 seconds before giving up. I needed to do a similar thing in the build-iso script a few years ago.<br>
<br>
The problem should be fixed. If it is not fixed (perhaps in some use cases) then an error will be reported and the boot device will not be unmounted so the toram-eject script will not run.<br>
<br>
BTW: the new initrd will run toram-eject in CLI mode if we've done a successful toram and the boot device is a LiveCD/DVD and we are in runlevel 3. I don't know if this will disable running toram-eject in GUI mode (but if not then this will be easy to fix). I start X from runlevel 3 with the command (as root):<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>telinit 5</code></pre></div></div>
</div>
</div>

</div>
</div>
<div id="p_41525" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile41525">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,308</span></div>

</div>
</div>
<span class="username">BitJam</span>
</dt>
<dd class="profile-joined">Joined: 31 Aug 2009</dd>
</dl>
<div class="postbody">
<div id="post_content41525">

<time datetime="2015-06-29T19:45">posted: 2015-06-29 &nbsp; 19:45</time>
<span class="permalink"><a href="./antix-15-rc1-1-serious-errors-caused-by-eject-solv-t5692-s15.html#p41525" title="permalink">#29</a></span>

<div class="content">I uploaded an updated rc1.1 initrd.gz on 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"https://www.dropbox.com/sh/4o0rfipwoi3usqb/AAD_9EXCnwJ4I284Ijg4UKwba?dl=0"<br>linktext was:"dropbox"<br>====================================<br>
.<br>
<br>
BTW, there is a minor bug in the toram-eject script which causes it to print the title twice in CLI mode. This bug is fixed elsewhere so you will still see it if you use"toram" combined with runlevel 3.</div>
</div>
</div>

</div>
</div>
</div>
<div class="action-bar bar-bottom">

<div class="pagination">
29 posts
<ul>
<li class="arrow previous"><span class="jumptopagez">jump to page: </span><a class="button button-icon-only" href="./antix-15-rc1-1-serious-errors-caused-by-eject-solv-t5692.html" rel="prev" role="button"><span class="sr-only">Previous</span></a></li>
<li><a class="button" href="./antix-15-rc1-1-serious-errors-caused-by-eject-solv-t5692.html" role="button">1</a></li>
<li class="active"><span>2</span></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="scrollToTopText"><a href="#top">goto top of page</a></div>

</div>
</body></html>
