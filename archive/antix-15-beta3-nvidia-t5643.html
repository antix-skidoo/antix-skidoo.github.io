<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>antiX-15 beta3 nvidia - antiX oldforums archive</title>
   
<link rel="stylesheet" href="../aaa_style.css">
<script type="text/javascript" src ="../aaa_oldforums.js"></script>
</head>
<body>
<div id="wrap" class="wrap">
<a id="top" class="top-anchor" accesskey="t"></a>

<div id="inner-wrap">
<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks clear-after" role="menubar">
<li class="scroll-breadcrumbs breadcrumbs">
<span class="crumb"><a href="./index.html" accesskey="h" data-navbar-reference="index"><span>antiX - oldforums archive</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./orphaned-posts-f27/index.html"><span>Orphaned Posts</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./development-old-f39/index.html"><span>Development (Old)</span></a></span>
</li>
</ul>

<div id="page-body" class="page-body" role="main">
<div class="postprofile_container postprofile_Left">
<div>
<div class="topictitleheader"><span class="statictopictitle">topic title: </span><span class="topic-titleb"><a href="./antix-15-beta3-nvidia-t5643.html">antiX-15 beta3 nvidia</a></div>
<div class="pagination">
11 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>

<div class="action-bar bar-top">
</div>
<div class="viewtopic_wrapper">
<div id="p_40968" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile40968">
<dt class="has-profile-rank has-avatar avatar-username">
<span class="username">anticapitalista</span>
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 5,955</span></div>

</div>
</div>
</dt>
<dd class="profile-rank">Site Admin</dd>
<dd class="profile-joined">Joined: 11 Sep 2007</dd>
</dl>
<div class="postbody">
<div id="post_content40968">
<time datetime="2015-06-05T21:31">posted: 2015-06-05 &nbsp; 21:31</time>
<span class="permalink"><a href="./antix-15-beta3-nvidia-t5643.html#p40968" title="permalink">#1</a></span>

<div class="content">Could testers with nvidia (old and new) post feedback on whether it is ok in this build. On my box, using sgfxi -f fails, but using smxi and choosing the debian way with siduction repos enabled works.<br>
<br>
Please post your feedback and any tricks/tips/advice</div>
</div>
</div>

</div>
</div>
<div id="p_40972" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile40972">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 521</span></div>

</div>
</div>
<span class="username">Shay</span>
</dt>
<dd class="profile-joined">Joined: 20 Apr 2015</dd>
</dl>
<div class="postbody">
<div id="post_content40972">

<time datetime="2015-06-05T23:24">posted: 2015-06-05 &nbsp; 23:24</time>
<span class="permalink"><a href="./antix-15-beta3-nvidia-t5643.html#p40972" title="permalink">#2</a></span>

<div class="content">Run fine and All I did was select the time zone.<br>
<br>
Graphics: Card: NVIDIA G86M [Quadro NVS 135M] bus-ID: 01:00.0<br>
Display Server: X.Org 1.16.4 drivers: nouveau (unloaded: fbdev,vesa)<br>
Resolution: 1440x900@60.00hz<br>
GLX Renderer: Gallium 0.4 on NV86<br>
GLX Version: 3.0 Mesa 10.3.2 Direct Rendering: Yes<br>
<br>
Machine: System: Dell product: Latitude D630<br>
Mobo: Dell model: 0WM416 Bios: Dell v: A07 date: 01/30/2008</div>
</div>
</div>

</div>
</div>
<div id="p_40978" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile40978">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 765</span></div>

</div>
</div>
<span class="username">rust collector</span>
</dt>
<dd class="profile-joined">Joined: 27 Dec 2011</dd>
</dl>
<div class="postbody">
<div id="post_content40978">

<time datetime="2015-06-06T18:58">posted: 2015-06-06 &nbsp; 18:58</time>
<span class="permalink"><a href="./antix-15-beta3-nvidia-t5643.html#p40978" title="permalink">#3</a></span>

<div class="content">Do you mean the nvidia-nvidia driver, or nouveau? <br>
<br>
When I tried to start sgxfi, I was told it looks like it is not a debian/ubuntu/arch install. <br>
But, if it is the proper nvidia driver you mean, I will try it later</div>
</div>
</div>

</div>
</div>
<div id="p_40979" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile40979">
<dt class="has-profile-rank has-avatar avatar-username">
<span class="username">anticapitalista</span>
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 5,955</span></div>

</div>
</div>
</dt>
<dd class="profile-rank">Site Admin</dd>
<dd class="profile-joined">Joined: 11 Sep 2007</dd>
</dl>
<div class="postbody">
<div id="post_content40979">

<time datetime="2015-06-06T19:09">posted: 2015-06-06 &nbsp; 19:09</time>
<span class="permalink"><a href="./antix-15-beta3-nvidia-t5643.html#p40979" title="permalink">#4</a></span>

<div class="content">proper nvidia driver</div>
</div>
</div>

</div>
</div>
<div id="p_40981" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile40981">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 765</span></div>

</div>
</div>
<span class="username">rust collector</span>
</dt>
<dd class="profile-joined">Joined: 27 Dec 2011</dd>
</dl>
<div class="postbody">
<div id="post_content40981">

<time datetime="2015-06-06T21:47">posted: 2015-06-06 &nbsp; 21:47</time>
<span class="permalink"><a href="./antix-15-beta3-nvidia-t5643.html#p40981" title="permalink">#5</a></span>

<div class="content">Test one: <br>
a core install, smxi would not start, sgfxi would not start.<br>
Changed line 1 in etc/lsb-release from antix to debian, and it starts fine.<br>
<br>
Selected the debian-nvidia option, and it needed a reboot, then running sgfxi again, I did, and it seems to work fine?<br>
<br>
I did not mess with repos and such.<br>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>$ inxi -G
Graphics:  Card: NVIDIA G71GLM [Quadro FX 1500M]
           Display Server: X.org 1.16.4 driver: nvidia Resolution: 319x90
</code></pre></div></div>
</div>
</div>

</div>
</div>
<div id="p_40989" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile40989">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 765</span></div>

</div>
</div>
<span class="username">rust collector</span>
</dt>
<dd class="profile-joined">Joined: 27 Dec 2011</dd>
</dl>
<div class="postbody">
<div id="post_content40989">

<time datetime="2015-06-07T13:11">posted: 2015-06-07 &nbsp; 13:11</time>
<span class="permalink"><a href="./antix-15-beta3-nvidia-t5643.html#p40989" title="permalink">#6</a></span>

<div class="content">test2, <br>
A full install. <br>
sgfxi and smxi did not work, edited etc/lsb-release to say debian, and etc/debian-version to say 8<br>
(which I am not sure if is the right number)<br>
Now both start ok.<br>
<br>
Used sgfxi and the"driver with xorg.conf" installed, but, again it needed a reboot. <br>
Looks like it works, (something looks different) but no, it went to the vesa driver. <br>
<br>
Going to try the debian-nvidia driver now.<br>
<span style="color: #FF0040">update</span><br>
That also failed. <br>
What would make the full install different to the core version, when it comes to this?</div>
</div>
</div>

</div>
</div>
<div id="p_40994" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile40994">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 88</span></div>

</div>
</div>
<span class="username">kmathern</span>
</dt>
<dd class="profile-joined">Joined: 25 Aug 2012</dd>
</dl>
<div class="postbody">
<div id="post_content40994">

<time datetime="2015-06-07T15:44">posted: 2015-06-07 &nbsp; 15:44</time>
<span class="permalink"><a href="./antix-15-beta3-nvidia-t5643.html#p40994" title="permalink">#7</a></span>

<div class="content">The 173xx &amp; 96xx nvidia legacy drivers which supported older nvidia cards were removed from the repos while Jessie was in development because they lack support for the 1.16 Xorg version that Jessie is using. <em>(and you won't really get a better result with those cards using smxi/sgfxi)</em> <br>
<br>
In Jessie those old nvidia cards are pretty much limited to using either the nouveau driver or the vesa or fbdev non-kms drivers.<br>
<br>
The following cards used to use the 173xx driver <em>(the output of the command below)</em><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>wget -qO- http://us.download.nvidia.com/XFree86/Linux-x86/304.125/README/supportedchips.html | html2text | grep 173.*xx -A99 | grep 96.*xx -B99 | grep -v xx</code></pre></div>
And these cards used to use the 96xx legacy driver <em>(the output of the command below)</em><div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>wget -qO- http://us.download.nvidia.com/XFree86/Linux-x86/304.125/README/supportedchips.html | html2text | grep 96.*xx -A99 | grep 71.*xx -B99 | grep -v xx</code></pre></div></div>
</div>
</div>

</div>
</div>
<div id="p_41000" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile41000">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,445</span></div>

</div>
</div>
<span class="username">skidoo</span>
</dt>
<dd class="profile-joined">Joined: 09 Feb 2012</dd>
</dl>
<div class="postbody">
<div id="post_content41000">

<time datetime="2015-06-07T16:38">posted: 2015-06-07 &nbsp; 16:38</time>
<span class="permalink"><a href="./antix-15-beta3-nvidia-t5643.html#p41000" title="permalink">#8</a></span>

<div class="content">live, semi-automatic dynamic root persistence<br>
<br>
sgfxi would not proceed, complained unknown distro until I edited both etc/debian-release amd etc/lsb-release<br>
(or I pointlessly tried editing, or creating, the first one... but sgfxi was checking for"debian" in the other?)
<blockquote class="uncited"><div>advice:<span style="color: green"><br>
(from sgfxi script, line 2452)<br>
<br>
errorData="This does not appear to be a Debian/Ubuntu/Arch based system!<br>
If you know that it is\nand received this error, please let the maintainer know and he'll try to correct the distro identification failure.<br>
Post on the script forums: 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://techpatterns.com/forums/forum-33.html"<br>linktext was:"http://techpatterns.com/forums/forum-33.html"<br>====================================<br>
 with your system information,<br>
including the contents of these files, if present: <em>/</em>etc/issue <em>/</em>etc/debian_version <em>/</em>etc/lsb-release"</span><br>
<br>
What would be a suitable check condition?<br>
if (lsb-release exists, and contains substring 'antix')... ?</div></blockquote>
Then, when sgfxi had completed its first run (preinstallation?) and advised a shutdown/restart...<br>
this (reported, and a fix is pending) bug in the current shutdown script(s) prevented the changes from being saved
<blockquote class="uncited"><div>. . .<br>
persist-autosave: Possibly save persistent information<br>
<em>/</em>var<em>/</em>local<em>/</em>bin<em>/</em>persist-config: line 144: local: can only be used in a function</div></blockquote>(after which the system is unresponsive until rebooted)<br>
<br>
So, grabbing at straws, I hacked the persist-autosave scriptfile ~~ just removed the several instances of"local" from the var=value lines.<br>
Afterward, sgfxi successfully installed nvidia driver<blockquote class="uncited"><div>Graphics: Card: NVIDIA GT215 [GeForce GT 240]<br>
Display Server: X.Org 1.16.4 driver: nvidia<br>
Resolution: 1920x1080@60.00hz<br>
GLX Renderer: GeForce GT 240/PCIe/SSE2<br>
GLX Version: 3.3.0 NVIDIA 340.76</div></blockquote>It's working OK, as far as I can tell (I usually just stick with noveau).<br>
To test, I played a couple youtube videos &amp; visited 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://jsdo.it"<br>linktext was:"http://jsdo.it"<br>====================================<br>
 and ran some of the WebGL demos<br>
<br>
Are there any side-effects, repercussions, from creating/editing the files debian_release and lsb-release ?<br>
( sgfxi errorscreen also mentioned"<em>/</em>etc/issue" )<br>
The sgfxi installation steps span reboots, so a wrapper script (move those files, run sgfxi, restore those files) is probably not feasible, eh?<br>
<br>
The"driver installation" operation balooned (added 320Mb to) the size of my persistence file.<br>
I was expecting to see SOME increase, so in advance I uppded the size of the persistence container, but I wasn't expecting THAT much.<br>
During sgfxi's `pre-installation` run, I saw lines mentioning"build-tools" and whatnot scrolling up the screen...<br>
I suppose I'll check the apt, er, dpkg logs; I'm inclined to remove the extra packages which were needed during install.<br>
advice? If antiX devs create a sgfxi wrapper script, consider including a user choice to have those extra build packages purged.<br>
<br>
As a testing followup, I intended to purge the 'nouveau' packages... but cannot do so. They're part of Xserver metapackage or somesuch.<br>
<br>
initramfs needed to be rebuilt when the driver was installed.<br>
How large is that ? (I haven't checked)<br>
and... until/unless I perform a snapshot operation, are multiple copies (initramfs? kernel?) taking up space on the pendrive?<br>
(I'm now trying to determine/understand what comprises the additional 320Mb storage overhead.)<br>
<span style="color: green">So far, I've determined that it's PARTIALLY due to the previously-reported"aufs plnk" live persistence bug<br>
and I'll followup by posting to the current development discussion.</span><br>
<br>
advice:<br>
Persistence user needs to know approx how much additional savefile space will be required<br>
so that s/he can, in advance of upgrading driver, increase the savefile size if necessary.<br>
(Here, I'm suggesting a message displayed to screen via what I'm envisioning as a 'wrapper script'.)<br>
I'm now fairly certain this was a roadblock during my prior attempts (previous builds) but at the time didn't realize the reason for the failure.<br>
OTOH, during those prior runs, I don't recall sgfxi displaying onscreen clues about specific problem files (lsb-release, debian_release)</div>
</div>
</div>

</div>
</div>
<div id="p_41009" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile41009">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 173</span></div>

</div>
</div>
<span class="username">DeepDayze</span>
</dt>
<dd class="profile-joined">Joined: 09 Sep 2011</dd>
</dl>
<div class="postbody">
<div id="post_content41009">

<ul class="post-buttons">
 </ul>
<time datetime="2015-06-07T22:56">posted: 2015-06-07 &nbsp; 22:56</time>
<span class="permalink"><a href="./antix-15-beta3-nvidia-t5643.html#p41009" title="permalink">#9</a></span>

<div class="content">For the issues with smxi and sgfxi maybe h2 (the developer and maintainer of sgfxi and smxi) should be aware that AntiX is a Debian distro so that he can add support for AntiX in his scripts.</div>
</div>
</div>

</div>
</div>
<div id="p_41011" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile41011">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 88</span></div>

</div>
</div>
<span class="username">kmathern</span>
</dt>
<dd class="profile-joined">Joined: 25 Aug 2012</dd>
</dl>
<div class="postbody">
<div id="post_content41011">

<time datetime="2015-06-08T01:19">posted: 2015-06-08 &nbsp; 01:19</time>
<span class="permalink"><a href="./antix-15-beta3-nvidia-t5643.html#p41011" title="permalink">#10</a></span>

<div class="content"><blockquote><div><cite>DeepDayze wrote:</cite>For the issues with smxi and sgfxi maybe h2 (the developer and maintainer of sgfxi and smxi) should be aware that AntiX is a Debian distro so that he can add support for AntiX in his scripts.</div></blockquote>
sgfxi gets past the distro type testing it does if I create a <span style="font-size: 100%; line-height: normal">/</span>etc/debian_version file with the following: <em>(and I didn't need to make any changes to the <span style="font-size: 100%; line-height: normal">/</span>etc/lsb-release file)</em><blockquote class="uncited"><div>$ cat <span style="font-size: 100%; line-height: normal">/</span>etc/debian_version<br>
8.0</div></blockquote>
antiX-15-beta2 had a <span style="font-size: 100%; line-height: normal">/</span>etc/debian_version file, but it looks like it's been replaced by the <span style="font-size: 100%; line-height: normal">/</span>etc/devuan_version file in antiX-15-beta3<blockquote class="uncited"><div>$ cat <span style="font-size: 100%; line-height: normal">/</span>etc/devuan_version<br>
jessie</div></blockquote>
So I think either the <span style="font-size: 100%; line-height: normal">/</span>etc/debian_version file needs to be added back to antiX-15, or maybe h2 needs to add support for Devuan distros to smxi/sgfxi.</div>
</div>
</div>

</div>
</div>
<div id="p_41034" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile41034">
<dt class="has-profile-rank has-avatar avatar-username">
<span class="username">anticapitalista</span>
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 5,955</span></div>

</div>
</div>
</dt>
<dd class="profile-rank">Site Admin</dd>
<dd class="profile-joined">Joined: 11 Sep 2007</dd>
</dl>
<div class="postbody">
<div id="post_content41034">

<time datetime="2015-06-09T14:59">posted: 2015-06-09 &nbsp; 14:59</time>
<span class="permalink"><a href="./antix-15-beta3-nvidia-t5643.html#p41034" title="permalink">#11</a></span>

<div class="content">I asked h2 to make the change to smxi/sgfxi/inxi to recognise devuan and he did.<br>
Installing nvidia via sgfxi works as it has always done on my nox now.<br>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>inxi -G
Graphics:  Card: NVIDIA G98 [GeForce 8400 GS Rev. 2]
           Display Server: X.Org 1.16.4 driver: nvidia
           Resolution: 1280x1024@60.02hz
           GLX Renderer: GeForce 8400 GS/PCIe/SSE2
           GLX Version: 3.3.0 NVIDIA 340.76
</code></pre></div></div>
</div>
</div>

</div>
</div>
</div>
<div class="action-bar bar-bottom">

<div class="pagination">
11 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>
</div>
</div>
</div>
<div class="scrollToTopText"><a href="#top">goto top of page</a></div>

</div>
</body></html>
