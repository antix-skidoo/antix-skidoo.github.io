<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>failling to boot newer version of kernel on btrfs antix 13 - antiX oldforums archive</title>
   
<link rel="stylesheet" href="../aaa_style.css">
<script type="text/javascript" src ="../aaa_oldforums.js"></script>
</head>
<body>
<div id="wrap" class="wrap">
<a id="top" class="top-anchor" accesskey="t"></a>

<div id="inner-wrap">
<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks clear-after" role="menubar">
<li class="scroll-breadcrumbs breadcrumbs">
<span class="crumb"><a href="./index.html" accesskey="h" data-navbar-reference="index"><span>antiX - oldforums archive</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./orphaned-posts-f27/index.html"><span>Orphaned Posts</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./releases-old-f44/index.html"><span>Releases (Old)</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./antix-13-luddite-f49/index.html"><span>antiX-13 Luddite</span></a></span>
</li>
</ul>

<div id="page-body" class="page-body" role="main">
<div class="postprofile_container postprofile_Left">
<div>
<div class="topictitleheader"><span class="statictopictitle">topic title: </span><span class="topic-titleb"><a href="./failling-to-boot-newer-version-of-kernel-on-btrfs--t5943.html">failling to boot newer version of kernel on btrfs antix 13</a></div>
<div class="pagination">
13 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>

<div class="action-bar bar-top">
</div>
<div class="viewtopic_wrapper">
<div id="p_43204" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile43204">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 7</span></div>

</div>
</div>
<span class="username">Eimant</span>
</dt>
<dd class="profile-joined">Joined: 21 Sep 2015</dd>
</dl>
<div class="postbody">
<div id="post_content43204">
<time datetime="2015-09-21T16:18">posted: 2015-09-21 &nbsp; 16:18</time>
<span class="permalink"><a href="./failling-to-boot-newer-version-of-kernel-on-btrfs--t5943.html#p43204" title="permalink">#1</a></span>

<div class="content">I tried to update from kernel 3.7.10-antix.3-486-smp to 3.16.0-0.bpo.4-686-pae on raid 0 btrfs filesystem but it fails to boot. I've uploaded screenshots of loading screen and grub loading options.<br>
I tried to use btrfs device scan, btrfsck --repair,btrfs check --repair btrfs-zero-log but they didin't fixed it.<br>
Anyone have an idea how to fix it?</div>
</div>
</div>

</div>
</div>
<div id="p_43205" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile43205">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 7</span></div>

</div>
</div>
<span class="username">Eimant</span>
</dt>
<dd class="profile-joined">Joined: 21 Sep 2015</dd>
</dl>
<div class="postbody">
<div id="post_content43205">

<time datetime="2015-09-21T16:29">posted: 2015-09-21 &nbsp; 16:29</time>
<span class="permalink"><a href="./failling-to-boot-newer-version-of-kernel-on-btrfs--t5943.html#p43205" title="permalink">#2</a></span>

<div class="content">Also btw I'm using raid 0 for performance and more comfortable file managing and data safety isin't important for me on drives I use for raid 0 more important files I'l backup on non raid drive.</div>
</div>
</div>

</div>
</div>
<div id="p_43206" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile43206">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 325</span></div>

</div>
</div>
<span class="username">male</span>
</dt>
<dd class="profile-joined">Joined: 04 Nov 2011</dd>
</dl>
<div class="postbody">
<div id="post_content43206">

<time datetime="2015-09-21T19:22">posted: 2015-09-21 &nbsp; 19:22</time>
<span class="permalink"><a href="./failling-to-boot-newer-version-of-kernel-on-btrfs--t5943.html#p43206" title="permalink">#3</a></span>

<div class="content">My English skills are not sufficient for an exact explanation<br>
<br>
1. grub2 can only"read-only" to btrfs <br>
<br>
2. Is your GRUB version old (1.99-27 + deb) Currently 2.02 ~ beta2-28 <br>
<br>
3. antix at sdb1, kernel 3.7.10 ... which is (hd1, msdos1) <br>
the 3.16 PAE kernel is with them set root = (hd4, msdos1) ? RAID?<br>
<br>
Do not use a btrfs <br>
use the current grub2 <span class="emoticon"> __{{emoticon}}__ </span></div>
</div>
</div>

</div>
</div>
<div id="p_43211" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile43211">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 7</span></div>

</div>
</div>
<span class="username">Eimant</span>
</dt>
<dd class="profile-joined">Joined: 21 Sep 2015</dd>
</dl>
<div class="postbody">
<div id="post_content43211">

<time datetime="2015-09-22T12:15">posted: 2015-09-22 &nbsp; 12:15</time>
<span class="permalink"><a href="./failling-to-boot-newer-version-of-kernel-on-btrfs--t5943.html#p43211" title="permalink">#4</a></span>

<div class="content">Thanks for the reply but updating grub didin't solved my issue the title(though I can still boot the old kernel) says sdb1 instead of sde1/sdd1 (devices are usb flash drive and micro sd card)because I haven't changed the title. Kernel(I mannualy edited menu entry because grub failed to detect the kernel but it detected the old one) is actually on raid sdd1/sde1(devices are micro sd card and usb flash drive).<br>
same kernel boots up on other nearly same antix installation but with ext4 filesystem.<br>
I want to use btrfs since it supports file system compression and raid<br>
also I want to update kernel for more stable btrfs drivers and better performance.</div>
</div>
</div>

</div>
</div>
<div id="p_43214" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile43214">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,444</span></div>

</div>
</div>
<span class="username">skidoo</span>
</dt>
<dd class="profile-joined">Joined: 09 Feb 2012</dd>
</dl>
<div class="postbody">
<div id="post_content43214">

<time datetime="2015-09-22T16:37">posted: 2015-09-22 &nbsp; 16:37</time>
<span class="permalink"><a href="./failling-to-boot-newer-version-of-kernel-on-btrfs--t5943.html#p43214" title="permalink">#5</a></span>

<div class="content">
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"https://www.google.com/?gws_rd=ssl#q=linux+btrfs+fsck+died+with+exit+status+8"<br>linktext was:"https://www.google.com/?gws_rd=ssl#q=li ... t+status+8"<br>====================================<br>
<br>
<br>
Thread: Fsck died on bootup exit status 8<br>

<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://ubuntuforums.org/showthread.php?t=1043160"<br>linktext was:"http://ubuntuforums.org/showthread.php?t=1043160"<br>====================================<br>
<br>
<br>
linux software raid, raid levels, LVM, btrfs and Kali Linux<br>

<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://blog.sjas.de/posts/linux-software-raid-raid-levels-LVM-btrfs-and-Kali-Linux.html"<br>linktext was:"http://blog.sjas.de/posts/linux-softwar ... Linux.html"<br>====================================<br>
</div>
</div>
</div>

</div>
</div>
<div id="p_43218" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile43218">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 7</span></div>

</div>
</div>
<span class="username">Eimant</span>
</dt>
<dd class="profile-joined">Joined: 21 Sep 2015</dd>
</dl>
<div class="postbody">
<div id="post_content43218">

<time datetime="2015-09-23T17:52">posted: 2015-09-23 &nbsp; 17:52</time>
<span class="permalink"><a href="./failling-to-boot-newer-version-of-kernel-on-btrfs--t5943.html#p43218" title="permalink">#6</a></span>

<div class="content">I've tried checking thoose links but I haven't found solution for my issue.<br>
Anyone has any more ideas or perhaps I should try asking on btrfs irc or mailling?</div>
</div>
</div>

</div>
</div>
<div id="p_43499" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile43499">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 307</span></div>

</div>
</div>
<span class="username">eugen-b</span>
</dt>
<dd class="profile-joined">Joined: 23 Aug 2015</dd>
</dl>
<div class="postbody">
<div id="post_content43499">

<time datetime="2015-10-16">posted: 19:25</time>
<span class="permalink"><a href="./failling-to-boot-newer-version-of-kernel-on-btrfs--t5943.html#p43499" title="permalink">#7</a></span>

<div class="content">I cannot think of any solution yet, but can you tell me which devices are set up as RAID0? There are also other kernel versions availabe now, 4.1 or liquorix 4.2. I didn't try RAID with btrfs myself.</div>
</div>
</div>

</div>
</div>
<div id="p_43508" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile43508">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 7</span></div>

</div>
</div>
<span class="username">Eimant</span>
</dt>
<dd class="profile-joined">Joined: 21 Sep 2015</dd>
</dl>
<div class="postbody">
<div id="post_content43508">

<time datetime="2015-10-17T15:54">posted: 2015-10-17 &nbsp; 15:54</time>
<span class="permalink"><a href="./failling-to-boot-newer-version-of-kernel-on-btrfs--t5943.html#p43508" title="permalink">#8</a></span>

<div class="content">Devices are 64 gb micro sd card connected using micro sd to usb adapter 32 gb partition and 32 gb usb flash drive.I managed to solve boot up issue but I was getting parent transid failures,csum errors,filesystem was forced mounted read only<br>
I've tried fixing it with btrfs rescue zero-log and it isin't mountable anymore.I'l try to recreate array I didin't had anything important anyway.</div>
</div>
</div>

</div>
</div>
<div id="p_43512" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile43512">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,444</span></div>

</div>
</div>
<span class="username">skidoo</span>
</dt>
<dd class="profile-joined">Joined: 09 Feb 2012</dd>
</dl>
<div class="postbody">
<div id="post_content43512">

<time datetime="2015-10-17T20:28">posted: 2015-10-17 &nbsp; 20:28</time>
<span class="permalink"><a href="./failling-to-boot-newer-version-of-kernel-on-btrfs--t5943.html#p43512" title="permalink">#9</a></span>

<div class="content"><blockquote class="uncited"><div>I mannualy edited menu entry because grub failed to detect the kernel but it detected the old one) is actually on raid sdd1/sde1(devices are micro sd card and usb flash drive).</div></blockquote>Does the grub entry consider UUIDs? If not, there's no guarantee that the same device will be assigned to"sde1" each boot.<br>
That might account for the"9 times out of 10" symptom you described.<br>
If the micro sd card is an older/slower Class2 or Class4 card, that might explain the suspected"timeout" issue I mentioned.<br>
If your ports old/slow USB1.1, that might be the limiting factor instead.<br>
<blockquote class="uncited"><div>can you tell me which devices are set up as RAID0?</div></blockquote>???<br>
All of them? Okay, well, first of all there's Steve, waaaay up there on the shelf... and Suzie, she's the cute l'il Maxxtor...<br>
Seriously, how can you expect someone to know the answer?<br>
According to the screenshots,"job control turned off"...so, the seemingly obvious answer is"none".</div>
</div>
</div>

</div>
</div>
<div id="p_43533" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile43533">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 7</span></div>

</div>
</div>
<span class="username">Eimant</span>
</dt>
<dd class="profile-joined">Joined: 21 Sep 2015</dd>
</dl>
<div class="postbody">
<div id="post_content43533">

<time datetime="2015-10-18T19:16">posted: 2015-10-18 &nbsp; 19:16</time>
<span class="permalink"><a href="./failling-to-boot-newer-version-of-kernel-on-btrfs--t5943.html#p43533" title="permalink">#10</a></span>

<div class="content">UUID Is specifed in grub,micro sd card is class 10 I think,usb port is 2.0<br>
Both of the devices were in raid.<br>
I deleted the array and tried to boot with mdadm soft raid at first it failed but I managed to make it bootable by regenerating mdadm.conf file and running <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>update-initramfs -u -k all</code></pre></div> while in chroot but then I had troubles with csum errors,parent transid errors and a huge list of other erros so I deleted that array and atm trying to do it(raid) with btrfs built in raid.<br>
here are some portions from error log while I was trying to fix partition on mdadm( I think from btrfs check)<br>
I've tried to use <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>btrfs check btrfs check --init-csum-tree,btrfs check --init-extent-tree, btrfs check --check-data-csum,btrfs check --repair , btrfs rescue chunk-recover ,btrfs rescue super-recover,btrfs rescue zero-log(after using it btrfs partition became unmountable so I deleted it afterwards)
I think running btrfs check --init-csum-tree was temporary fixing uncorectable csum erros detected by btrfs scrub
</code></pre></div>
root 5 inode 300565 errors 2001, no inode item, link count wrong<br>
unresolved ref dir 188550 index 0 namelen 8 name f_000160 filetype 1 errors 6, no dir index, no inode ref<br>
root 5 inode 300566 errors 2001, no inode item, link count wrong<br>
unresolved ref dir 188550 index 0 namelen 8 name f_000161 filetype 1 errors 6, no dir index, no inode ref<br>
root 5 inode 300573 errors 2001, no inode item, link count wrong<br>
unresolved ref dir 188582 index 0 namelen 46 name https_people.directory.live.com_0.localstorage filetype 1 errors 6, no dir index, no inode ref<br>
root 5 inode 300574 errors 2001, no inode item, link count wrong<br>
unresolved ref dir 188582 index 0 namelen 54 name https_people.directory.live.com_0.localstorage-journal filetype 1 errors 6, no dir index, no inode ref<br>
<br>
parent transid verify failed on 576012288 wanted 3603 found 3082<br>
Ignoring transid failure<br>
parent transid verify failed on 576012288 wanted 3603 found 3082<br>
Ignoring transid failure<br>
parent transid verify failed on 576012288 wanted 3603 found 3082<br>
Ignoring transid failure<br>
 parent transid verify failed on 576012288 wanted 3603 found 3082<br>
<br>
<br>
The full list was very long.</div>
</div>
</div>

</div>
</div>
<div id="p_43770" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile43770">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 307</span></div>

</div>
</div>
<span class="username">eugen-b</span>
</dt>
<dd class="profile-joined">Joined: 23 Aug 2015</dd>
</dl>
<div class="postbody">
<div id="post_content43770">

<time datetime="2015-11-12T10:50">posted: 2015-11-12 &nbsp; 10:50</time>
<span class="permalink"><a href="./failling-to-boot-newer-version-of-kernel-on-btrfs--t5943.html#p43770" title="permalink">#11</a></span>

<div class="content"><blockquote><div><cite>Eimant wrote:</cite>Devices are 64 gb micro sd card connected using micro sd to usb adapter 32 gb partition and 32 gb usb flash drive.I managed to solve boot up issue but I was getting parent transid failures,csum errors,filesystem was forced mounted read only<br>
I've tried fixing it with btrfs rescue zero-log and it isin't mountable anymore.I'l try to recreate array I didin't had anything important anyway.</div></blockquote>
Sorry for the late reply (but your reply was late, too). IMHO it is a very exotic setup for RAID, especially RAID0. The drives should be more similar in their capabilities. It is your computer, so you decide. But I would simply advise to use an SSD or HDD for your system and only use it in RAID if you have a second SATA port.<br>
<br>
@skidoo: Your humour(?) is lost in translation for me, sorry. <span class="emoticon"> __{{emoticon}}__ </span></div>
</div>
</div>

</div>
</div>
<div id="p_43832" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile43832">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 7</span></div>

</div>
</div>
<span class="username">Eimant</span>
</dt>
<dd class="profile-joined">Joined: 21 Sep 2015</dd>
</dl>
<div class="postbody">
<div id="post_content43832">

<time datetime="2015-11-16T19:07">posted: 2015-11-16 &nbsp; 19:07</time>
<span class="permalink"><a href="./failling-to-boot-newer-version-of-kernel-on-btrfs--t5943.html#p43832" title="permalink">#12</a></span>

<div class="content">Thanks for the reply I found out that it seems like this problem affects only micro sd card and doesn't appear on usb flash drive.Perhaps I'l stick to single device for some time(found out that btrfs file system compression can improve performance even better then raid.How can I lock this thread?good luck all.</div>
</div>
</div>

</div>
</div>
<div id="p_43844" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile43844">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 307</span></div>

</div>
</div>
<span class="username">eugen-b</span>
</dt>
<dd class="profile-joined">Joined: 23 Aug 2015</dd>
</dl>
<div class="postbody">
<div id="post_content43844">

<time datetime="2015-11-17T20:41">posted: 2015-11-17 &nbsp; 20:41</time>
<span class="permalink"><a href="./failling-to-boot-newer-version-of-kernel-on-btrfs--t5943.html#p43844" title="permalink">#13</a></span>

<div class="content">You are welcome! There are numerous tweaks which can improve the performance of btrfs. New kernel, BFQ I/O schedulers - both available with Liquorix kernel, fstab option commit=300 or more (then it writes caches to the drive every 300 seconds = 5 minutes).</div>
</div>
</div>

</div>
</div>
</div>
<div class="action-bar bar-bottom">

<div class="pagination">
13 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>
</div>
</div>
</div>
<div class="scrollToTopText"><a href="#top">goto top of page</a></div>

</div>
</body></html>
