<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>[Solved] SSH Root Login - antiX oldforums archive</title>
   
<link rel="stylesheet" href="../aaa_style.css">
<script type="text/javascript" src ="../aaa_oldforums.js"></script>
</head>
<body>
<div id="wrap" class="wrap">
<a id="top" class="top-anchor" accesskey="t"></a>

<div id="inner-wrap">
<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks clear-after" role="menubar">
<li class="scroll-breadcrumbs breadcrumbs">
<span class="crumb"><a href="./index.html" accesskey="h" data-navbar-reference="index"><span>antiX - oldforums archive</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./official-releases-f42/index.html"><span>Official releases</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./antix-16-berta-caceres-f58/index.html"><span>antiX-16 Berta CÃ¡ceres</span></a></span>
</li>
</ul>

<div id="page-body" class="page-body" role="main">
<div class="postprofile_container postprofile_Left">
<div>
<div class="topictitleheader"><span class="statictopictitle">topic title: </span><span class="topic-titleb"><a href="./solved-ssh-root-login-t6864.html">[Solved] SSH Root Login</a></div>
<div class="pagination">
10 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>


<div class="viewtopic_wrapper">
<div id="p_50376" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile50376">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 80</span></div>

</div>
</div>
<span class="username">Rademes</span>
</dt>
<dd class="profile-joined">Joined: 26 Dec 2016</dd>
</dl>
<div class="postbody">
<div id="post_content50376">
<time datetime="2017-02-14T16:55">posted: 2017-02-14 &nbsp; 16:55</time>
<span class="permalink"><a href="./solved-ssh-root-login-t6864.html#p50376" title="permalink">#1</a></span>

<div class="content">Good Day!<br>
Today I have checked my system using <strong>rkhunter</strong>, and it found a vulnerability in SSH configuration: The ability to login as root without password.<br>

<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"https://s19.postimg.org/53fw7sb0j/rkhunter_log.png"<br>linktext was:"https://s19.postimg.org/53fw7sb0j/rkhunter_log.png"<br>====================================<br>
<br>
How can I remove this ability to login as root without password?</div>
<div class="notice">
Last edited by <b>Rademes</b> on 16 Feb 2017, 14:13, edited 2 times in total.
</div>
</div>
</div>

</div>
</div>
<div id="p_50377" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile50377">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,028</span></div>

</div>
</div>
<span class="username">SamK</span>
</dt>
<dd class="profile-joined">Joined: 21 Aug 2011</dd>
</dl>
<div class="postbody">
<div id="post_content50377">

<time datetime="2017-02-14T17:40">posted: 2017-02-14 &nbsp; 17:40</time>
<span class="permalink"><a href="./solved-ssh-root-login-t6864.html#p50377" title="permalink">#2</a></span>

<div class="content"><blockquote><div><cite>Rademes wrote:</cite>Good Day!<br>
Today I have checked my system using <strong>rkhunter</strong>, and it found a vulnerability in SSL configuration: The ability to login as root without password.<br>

<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"https://s19.postimg.org/53fw7sb0j/rkhunter_log.png"<br>linktext was:"https://s19.postimg.org/53fw7sb0j/rkhunter_log.png"<br>====================================<br>
<br>
How can I remove this ability to login as root without password?</div></blockquote>Your post refers to SSL but your report refers to SSH.<br>
<br>
The setting is not a vulnerability, but can be changed by reference to openssh<br>

<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"https://www.openssh.com/txt/release-7.0"<br>linktext was:"https://www.openssh.com/txt/release-7.0"<br>====================================<br>
<br>
additional info<br>

<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://askubuntu.com/questions/449364/what-does-without-password-mean-in-sshd-config-file"<br>linktext was:"http://askubuntu.com/questions/449364/w ... onfig-file"<br>====================================<br>
</div>
</div>
</div>

</div>
</div>
<div id="p_50378" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile50378">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">

<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 80</span></div>

</div>
</div>
<span class="username">Rademes</span>
</dt>
<dd class="profile-joined">Joined: 26 Dec 2016</dd>
</dl>
<div class="postbody">
<div id="post_content50378">

<time datetime="2017-02-14T18:40">posted: 2017-02-14 &nbsp; 18:40</time>
<span class="permalink"><a href="./solved-ssh-root-login-t6864.html#p50378" title="permalink">#3</a></span>

<div class="content">Sorry, I made mistake, while writing first post. I will think about changing this setting.</div>
</div>
</div>

</div>
</div>
<div id="p_50379" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile50379">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
 <div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,445</span></div>

</div>
</div>
<span class="username">skidoo</span>
</dt>
<dd class="profile-joined">Joined: 09 Feb 2012</dd>
</dl>
<div class="postbody">
<div id="post_content50379">

<time datetime="2017-02-14T18:54">posted: 2017-02-14 &nbsp; 18:54</time>
<span class="permalink"><a href="./solved-ssh-root-login-t6864.html#p50379" title="permalink">#4</a></span>

<div class="content">The linked doc covers openssh v7, but antiX16 (debian jessie) provides v6.7<br>
so this bit is (misleadingly) inapplicable
<blockquote class="uncited"><div>
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"https://www.openssh.com/txt/release-7.0"<br>linktext was:"https://www.openssh.com/txt/release-7.0"<br>====================================<br>
<br>
<br>
* The default for the sshd_config(5) PermitRootLogin option has changed from"yes" to"prohibit-password".<br>
<br>
* PermitRootLogin=without-password/prohibit-password now bans all interactive authentication methods, allowing only public-key,<br>
hostbased and GSSAPI authentication (previously it permitted keyboard-interactive and password-less authentication if those were enabled).
</div></blockquote>
Rademes, the antiX default reflects the rationale that a"yes" default for that awkwardly-named setting in the sshd configuration<br>
is arguably more secure than the alternative of permitting password-based authentication... and that some users (or tools which they use)<br>
will have a legitimate need for ability to"login as root, via ssh".
<blockquote class="uncited"><div>How can I remove this ability to login as root without password?</div></blockquote>To entirely disable ssh"username:root" login, edit <span style="color: blue"><strong>/</strong>etc/ssh/sshd_config</span> and specify <span style="color: green">PermitRootLogin <strong>no</strong></span><br>
( <em>ssh-connected non-root user can still gain elevated priviledges via use of <strong>su</strong> command</em> )</div>
</div>
</div>

</div>
</div>
<div id="p_50380" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile50380">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,445</span></div>

</div>
</div>
<span class="username">skidoo</span>
</dt>
<dd class="profile-joined">Joined: 09 Feb 2012</dd>
</dl>
<div class="postbody">
<div id="post_content50380">

<time datetime="2017-02-14T20:49">posted: 2017-02-14 &nbsp; 20:49</time>
<span class="permalink"><a href="./solved-ssh-root-login-t6864.html#p50380" title="permalink">#5</a></span>

<div class="content">Further"hardening" steps are available; the specifics of your use case must guide your choices.<br>
Not a comprehensive list, but here are some ideas:<br>
<br>
<strong>" </strong><span style="color: blue">I have <strong>never</strong> '<em>interactively logged into my machine via ssh</em>' and never plan to (not in the foreseeable future, at least).<br>
Notwithstanding security, I don't want to have sshd service continually running &amp; needlessly consuming resources.</span><strong>"</strong><br>
----} you can <span style="color: green">sudo sysv-rc-conf</span> and untick sshd, across all runlevels<br>
<br>
<strong>"</strong> <span style="color: blue">Yes, sometimes I log into my machine via ssh...</span><strong>"</strong><br>
----} visit 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://fail2ban.org"<br>linktext was:"http://fail2ban.org"<br>====================================<br>
 and <br>
websearch additional references like 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"https://www.digitalocean.com/community/tutorials/how-to-protect-ssh-with-fail2ban-on-ubuntu-14-04"<br>linktext was:"https://www.digitalocean.com/community/ ... untu-14-04"<br>====================================<br>
<br>
<span style="color: green">sudo apt install fail2ban</span> then <span style="color: green">man fail2ban</span><br>
<br>
<strong>"</strong> <span style="color: blue">Although I don't make it a habit to remotely login to this machine via ssh using root account...<br>
some of my tools (e.g. various network enabled rsync-based backup utilities) <strong>do</strong> require <em>login as root</em> access.</span> <strong>"</strong><br>
----} (<em>optionally, after consulting <span style="color: green"><strong>man sshd</strong></span></em>), <span style="color: green">sudo touch /etc/nologin</span><br>
<strong>or</strong><br>
----} (optionally) tweak <span style="color: green"><strong>/</strong>etc/ssh/sshd_conf</span> to enumerate AllowUsers / DenyUsers / AllowGroups / DenyGroups<br>
<br>
<strong>"</strong> <span style="color: blue">meow</span> <strong>"</strong><br>
Ultimately, on a given machine, you could perhaps <span style="color: green">sudo apt remove openssh-server</span><br>
Doing so will not cause removal of debian"rsync" package.<br>
If your backup jobs are local only (non-network), any rsync-based backup utilities you're using may employ unix sockets anyhow (vs comparatively slow ssh).</div>
</div>
</div>

</div>
</div>
<div id="p_50382" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile50382">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,028</span></div>

</div>
</div>
<span class="username">SamK</span>
</dt>
<dd class="profile-joined">Joined: 21 Aug 2011</dd>
</dl>
<div class="postbody">
<div id="post_content50382">

<time datetime="2017-02-15T06:52">posted: 2017-02-15 &nbsp; 06:52</time>
<span class="permalink"><a href="./solved-ssh-root-login-t6864.html#p50382" title="permalink">#6</a></span>

<div class="content"><strong>@Rademes</strong><br>
<br>
Because you didn't mention which version of antiX+repos you are using, and to clear up any confusion...<br>
One of the links in my previous post relates to Jessie (openssh v6.7) and one relates to Stretch (openssh v7).<br>
<br>
Perhaps I should not have assumed you would recognise and appreciate the difference, particularly as someone has misunderstood and consequently taken a less charitable view of your ability.</div>
</div>
</div>

</div>
</div>
<div id="p_50383" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile50383">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,445</span></div>

</div>
</div>
<span class="username">skidoo</span>
</dt>
<dd class="profile-joined">Joined: 09 Feb 2012</dd>
</dl>
<div class="postbody">
<div id="post_content50383">

<time datetime="2017-02-15T08:00">posted: 2017-02-15 &nbsp; 08:00</time>
<span class="permalink"><a href="./solved-ssh-root-login-t6864.html#p50383" title="permalink">#7</a></span>

<div class="content">Someone?<br>
As the only other participant in this topic, I'm wondering what you presume I've"misunderstood"<br>
and am flat-out baffled by the statement proclaiming that something in my replies expressed"a less charitable view".<br>
<br>
edit:<br>
Naw. I'm not gonna let it stand. You're out of line and I'm calling ya on it.<br>
Replying to scold the obvious typo in the OP was not"charitable".<br>
Posting a terse 2-liner reply (and citing ambiguous/conflicting/misleading links) was not"charitable".<br>
I reject your claim that my prior replies projected an"attitude" (unfavorable, or otherwise).<br>
<br>
Rademes, FWIW, not only do I appreciate your attention to details, I too have questioned this exact detail<br>
(the chosen default setting) in past topics -- probably repeatedly, across version-betatesting feedback topics.</div>
</div>
</div>

</div>
</div>
<div id="p_50384" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile50384">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,028</span></div>

</div>
</div>
<span class="username">SamK</span>
</dt>
<dd class="profile-joined">Joined: 21 Aug 2011</dd>
</dl>
<div class="postbody">
<div id="post_content50384">

<time datetime="2017-02-15T12:09">posted: 2017-02-15 &nbsp; 12:09</time>
<span class="permalink"><a href="./solved-ssh-root-login-t6864.html#p50384" title="permalink">#8</a></span>

<div class="content">Off topic<br>
<blockquote><div><cite>skidoo wrote:</cite>...I'm wondering what you presume I've"misunderstood"...<br>
[...]<br>
The linked doc covers openssh v7, but antiX16 (debian jessie) provides v6.7<br>
so this bit is (misleadingly) inapplicable</div></blockquote>You saw the two links referred to two different versions of SSH and went on to describe one as misleading and inapplicable, rather than considering they applied to both Jessie and Stretch as the OP had not indicated which was in use. This is a clear misunderstanding.<br>
<blockquote><div><cite>skidoo wrote:</cite>Replying to scold the obvious typo in the OP was not"charitable".</div></blockquote>This is an incorrect opinion on your part.<br>
<blockquote><div><cite>skidoo wrote:</cite>Posting a terse 2-liner reply (and citing ambiguous/conflicting/misleading links) was not"charitable".</div></blockquote>This is incorrect as it is based on your misundertanding of the post.<br>
<blockquote><div><cite>skidoo wrote:</cite>I reject your claim that my prior replies projected an"attitude" (unfavorable, or otherwise).</div></blockquote>By making the post based on your misunderstanding, you suppose the OP, and others are unable to recognise what you did i.e. two versions of SSH were being referred to. If you had believed the OP was able to notice that, it would have been apparent at that juncture there was no point posting the comments you made.<br>
<br>
<br>
I have no interest in batting this back-and-forth. This will be my only response on this off topic aspect.</div>
</div>
</div>

</div>
</div>
<div id="p_50385" class="post has-profile bg2">
 <div class="inner">
<dl class="postprofile" id="profile50385">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,062</span></div>

</div>
</div>
<span class="username">Dave</span>
</dt>
<dd class="profile-joined">Joined: 20 Jan 2010</dd>
</dl>
<div class="postbody">
<div id="post_content50385">

<time datetime="2017-02-15T19:47">posted: 2017-02-15 &nbsp; 19:47</time>
<span class="permalink"><a href="./solved-ssh-root-login-t6864.html#p50385" title="permalink">#9</a></span>

<div class="content"><span class="emoticon"> __{{emoticon}}__ </span> LA la LA, whistle whistle whistle, LA la la, whistle whistle whistle, LA la la, whistle whistle, slowly closes door to room....</div>
</div>
</div>

</div>
</div>
<div id="p_50392" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile50392">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 80</span></div>

</div>
</div>
<span class="username">Rademes</span>
</dt>
<dd class="profile-joined">Joined: 26 Dec 2016</dd>
</dl>
<div class="postbody">
<div id="post_content50392">

<time datetime="2017-02-16T14:12">posted: 2017-02-16 &nbsp; 14:12</time>
<span class="permalink"><a href="./solved-ssh-root-login-t6864.html#p50392" title="permalink">#10</a></span>

<div class="content">Thank you, skidoo.<br>
I have disabled SSH root login by editing <strong>/etc/ssh/sshd_config</strong> and specifying <strong>PermitRootLogin no</strong>.<br>
Because I have never logged using SSH, I also disabled ssh service: <em>sudo sysv-rc-conf and untick ssh, across all runlevels.</em></div>
</div>
</div>

</div>
</div>
</div>
<div class="action-bar bar-bottom">

<div class="pagination">
10 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>
</div>
</div>
</div>
<div class="scrollToTopText"><a href="#top">goto top of page</a></div>

</div>
</body></html>
