<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>AntiX to USB: customize live system keyboard - antiX oldforums archive</title>
   
<link rel="stylesheet" href="../aaa_style.css">
<script type="text/javascript" src ="../aaa_oldforums.js"></script>
</head>
<body>
<div id="wrap" class="wrap">
<a id="top" class="top-anchor" accesskey="t"></a>

<div id="inner-wrap">
<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks clear-after" role="menubar">
<li class="scroll-breadcrumbs breadcrumbs">
<span class="crumb"><a href="./index.html" accesskey="h" data-navbar-reference="index"><span>antiX - oldforums archive</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./official-releases-f42/index.html"><span>Official releases</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./antix-15-killah-p-f53/index.html"><span>antiX-15 Killah P</span></a></span>
</li>
</ul>

<div id="page-body" class="page-body" role="main">
<div class="postprofile_container postprofile_Left">
<div>
<div class="topictitleheader"><span class="statictopictitle">topic title: </span><span class="topic-titleb"><a href="./antix-to-usb-customize-live-system-keyboard-t5871.html">AntiX to USB: customize live system keyboard</a></div>
<div class="pagination">
6 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>


<div class="viewtopic_wrapper">
<div id="p_42593" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile42593">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 91</span></div>

</div>
</div>
<span class="username">dirkd</span>
</dt>
<dd class="profile-joined">Joined: 30 May 2014</dd>
</dl>
<div class="postbody">
<div id="post_content42593">
<time datetime="2015-08-18T21:46">posted: 2015-08-18 &nbsp; 21:46</time>
<span class="permalink"><a href="./antix-to-usb-customize-live-system-keyboard-t5871.html#p42593" title="permalink">#1</a></span>

<div class="content">When transferring an iso-snapshot to USB I can choose a language to be used when booting up the system. However, the offered list of languages is very incomplete. When I choose 'Dutch', the boot-option lang=nl_NL is added to the live system. However, in Belgium we use another default keyboard layout than in the Netherlands, so nl_BE would be better. Again, one can change the keyboard layout for the live system at boot time, but I want to give these USB keys to young, inexperienced students. A wrong keyboard layout can be very confusing for them. So having the correct one as default would be preferable.<br>
<br>
Another issue to consider: when adding the language option I not only change the keyboard layout, but the interface too (menu's especially, help files too maybe) gets translated. These translations have very bad quality: they are incomplete, non-standard (compared to what one is used to under Windows) and generally confusing. They are also not necessary: every student that is going to use this system has learned English sufficiently well. So it would be better to keep the English interface, and ONLY change the default keyboard layout.<br>
<br>
Can such a thing more or less easily be done?<br>
<br>
(When making the ISO snapshot, I keep the existing user. Nevertheless, my keyboard customizations seem to get lost).</div>
</div>
</div>

</div>
</div>
<div id="p_42597" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile42597">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,445</span></div>

</div>
</div>
<span class="username">skidoo</span>
</dt>
<dd class="profile-joined">Joined: 09 Feb 2012</dd>
</dl>
<div class="postbody">
<div id="post_content42597">

<time datetime="2015-08-19T03:47">posted: 2015-08-19 &nbsp; 03:47</time>
<span class="permalink"><a href="./antix-to-usb-customize-live-system-keyboard-t5871.html#p42597" title="permalink">#2</a></span>

<div class="content">translations-t5617.html<br>
It's possible that, at the moment, no one other than _you_ is available to contribute"better Dutch translations" for the antix-authored packages (ControlCentre, etc.)<br>
<br>
After skimming a couple pages<br>

<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"https://bbs.archlinux.org/viewtopic.php?id=153137"<br>linktext was:"https://bbs.archlinux.org/viewtopic.php?id=153137"<br>====================================<br>
<br>

<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://www.tldp.org/HOWTO/Belgian-HOWTO/configuration.html"<br>linktext was:"http://www.tldp.org/HOWTO/Belgian-HOWTO ... ation.html"<br>====================================<br>
<br>

<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"https://www.linux.com/learn/docs/ldp/446-belgian-howto"<br>linktext was:"https://www.linux.com/learn/docs/ldp/446-belgian-howto"<br>====================================<br>
<br>

<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://www.unix.com/man-page/osf1/5/dutch/"<br>linktext was:"http://www.unix.com/man-page/osf1/5/dutch/"<br>====================================<br>
<br>
I'll suggest (if you haven't already done so) prior to creating a snapshot, perform this terminal operation:<br>
sudo dpkg-reconfigure locales<br>
It will present you with an opportunity to set the EXACT locale (NL_be.UTF-8 or NL_be.ISO-KAMASUTRA or whatever)<br>
and it provides an opportunity to DEselect the many preinstalled locales which are"not useful on your particular system".<br>
Afterward (again, PRIOR to performing snapshot), run the"bleachbit" program, AsRoot.<br>
Doing so will eliminate 8,000-10,000 unneeded language-related files (YMMV, depending on which, and how many, apps have been installed).<br>
<br>
Specific to NL_be keyboard setup, reviewing these past discussions may be helpful to you:<br>
problem-with-antix-installer-itself-t3606.html<br>
antix-system-t2970-15.html<br>
</div>
</div>
</div>

</div>
</div>
<div id="p_42609" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile42609">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 91</span></div>

</div>
</div>
<span class="username">dirkd</span>
</dt>
<dd class="profile-joined">Joined: 30 May 2014</dd>
</dl>
<div class="postbody">
<div id="post_content42609">

<time datetime="2015-08-19T20:58">posted: 2015-08-19 &nbsp; 20:58</time>
<span class="permalink"><a href="./antix-to-usb-customize-live-system-keyboard-t5871.html#p42609" title="permalink">#3</a></span>

<div class="content">Just to be clear: I have no problems anymore configuring keyboards and locale on an installed system. It's just that that the live system resulting from an iso-snapshot seems to use its own keyboard configuration, in stead of the one I configured before taking the snapshot. Antix 13.3 gave me a live system with a belgian keyboard. So if not too much has changed, I should manage to do so again. Thanks for the links: dpkg-reconfigure locales, and the discussion by AC about antix-system look promising. I'll report back.<br>
<br>
I don't blame anyone for incomplete translations. I fully realise the task is humongous. Even Microsoft, not exactly short on resources, fails in some ways. For me the solution lies in sticking with the English interface language as much as possible. Provided one has a reasonable grasp of the language, that is.</div>
</div>
</div>

</div>
</div>
<div id="p_42614" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile42614">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,445</span></div>

</div>
</div>
<span class="username">skidoo</span>
</dt>
<dd class="profile-joined">Joined: 09 Feb 2012</dd>
</dl>
<div class="postbody">
<div id="post_content42614">

<time datetime="2015-08-19T23:10">posted: 2015-08-19 &nbsp; 23:10</time>
<span class="permalink"><a href="./antix-to-usb-customize-live-system-keyboard-t5871.html#p42614" title="permalink">#4</a></span>

<div class="content">(this is my"best guess", perhaps not a definitive solution)<br>
<br>
When booting from a snapshot you've created, try adding this to the bootline:<br>
locale=nl_BE bootkbd=be-latin1 console-setup/layoutcode=be-latin1<br>
(From what you've described, you may want to change the locale= portion)<br>
<br>
If this achieves the desired result, to make it the permanent default, you could try adding those args to the bootmenu entries by editing<br>
/boot/grub/grub.cfg<br>
but that not will not be possible if you're booting the snapshot iso from CD, so, instead...<br>
<br>
During the snapshot creation, in the workflow there's a prompt:<br>
<span style="color: green">"The program will now pause to allow you to edit any files in the work directory.<br>
Select Yes to edit the boot menu or select No to bypass this step and continue creating the snapshot."</span><br>
Here you should be able to inject your custom bootline args by editing the $work_directory/.../grub.cfg<br>
<br>
edit:<br>
OOPS, that isosnapshot dialogbox offering to"pause while you edit the files" it isn't displayed unless you have edited<br>
iso-snapshot.conf<br>
and changed line57 (or so) so that it reads as:<br>
edit_boot_menu=yes</div>
<div class="notice">
Last edited by <b>skidoo</b> on 22 Aug 2015, 05:21, edited 1 time in total.
</div>
</div>
</div>

</div>
</div>
<div id="p_42661" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile42661">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 91</span></div>

</div>
</div>
<span class="username">dirkd</span>
</dt>
<dd class="profile-joined">Joined: 30 May 2014</dd>
</dl>
<div class="postbody">
<div id="post_content42661">

<time datetime="2015-08-21T20:25">posted: 2015-08-21 &nbsp; 20:25</time>
<span class="permalink"><a href="./antix-to-usb-customize-live-system-keyboard-t5871.html#p42661" title="permalink">#5</a></span>

<div class="content">Thank you, Skidoo. All those fancy bootline codes didn't work, but they put me on the right track. Simply adding kbd=be did the trick. I didn't understand what the &lt;F8-SAVE&gt; option on the boot screen (when booting live from USB) actually did, but now I do. After adding an additional bootcode and saving with the help of &lt;F8&gt;, the next bootcycle makes a new boot menu entry (CUSTOM) the default one. That entry boots AntiX, but with the additional boot code (kbd=be in my case) included.<br>
<br>
As for me, this is a perfectly workable solution, even if not ideal. With workable I mean that I can distribute a live USB key to someone with no experience whatsoever with linux, and be confident that he/she can boot it without problems. The only information needed is the password (type antix whenever a password is required), on every other question, just &lt;Enter&gt;. For that to work, the keyboard must behave as expected. So, this topic can be marked as SOLVED (I can't do this myself, can I?).<br>
<br>
I also found a hack, which I DO NOT RECOMMEND, but if someone is desperate: it works. In the script /usr/local/bin/antix2usb.py you will find a list of bootcodes of the form 'LANG=xy_XY'. When starting this script from the control center, there is a drop-down list (called Language), that lets you choose one of these language codes. Now, if you want another bootcode added at the end of the default boot entry on your live USB stick, you can easlily edit that list in the python script. Like this:<br>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>LANGUAGES = [["bg_BG","Bulgarian"],
    ["kbd=be,us","=My own standard boot code="],
    ["lang=ca_ES","Catalan"],
    ["lang=cs_CZ","Czech"],
    ["lang=da_DK","Danish"],
....</code></pre></div>
Indeed, the problem of changing the keyboard layout during boot time seems to lie entirely in the Antix2usb script. The Iso-snapshot script allows for more configuration (including a custom keyboard layout), but part of that flexibility is lost when transferring the iso to USB. Of course, booting from USB itself is more flexible than from DVD. (One of my old laptops I use for testing wont boot from DVD - iso too large I guess - but boots happily from USB).<br>
<br>
During my detective work, I also stumbled upon the configuration file for the Antix 13.2 snapshot script. I guess this file has no real purpose anymore? In the older setup everything that went into the iso was first copied to a temporary folder, and there was an option to edit everything in that folder before actually compiling the iso-file. This option has disappeared in Antix15. Maybe to save disk space? But the older scheme had its merits.<br>
<br>
The following questions are purely asked in the hope of learning a bit more, so don't waste too much time on them:
<ul>
<li> you advised me to edit /boot/grub/grub.cfg, but actually, my USB stick uses extlinux in stead of grub. I can't even choose grub when running the antix2usb script (grub and syslinux options are greyed out).</li>
<li> in a previous post you proposed deleting all unneeded language files. Isn't that dangerous, when eg, you choose a language code in the antix2usb script that refers to files previously deleted from the system?</li></ul>
To round up this discussion: I can perfectly understand the logic of ALWAYS using a standard US keyboard on booting. When you distribute a live system world wide, you don't want users across the world to be confronted with a Belgian keyboard layout. But for purely local purposes, it can be handy to use a custom keyboard layout. And Antix boot codes make this possible (with a little effort). I don't know if other systems have these boot codes too (they may well be standard grub features for all I know), but I like them a lot. Very thoughtful design feature.</div>
</div>
</div>

</div>
</div>
<div id="p_42663" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile42663">
<dt class="has-profile-rank has-avatar avatar-username">
<span class="username">anticapitalista</span>
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 5,955</span></div>

</div>
</div>
</dt>
<dd class="profile-rank">Site Admin</dd>
<dd class="profile-joined">Joined: 11 Sep 2007</dd>
</dl>
<div class="postbody">
<div id="post_content42663">

<time datetime="2015-08-21T23:13">posted: 2015-08-21 &nbsp; 23:13</time>
<span class="permalink"><a href="./antix-to-usb-customize-live-system-keyboard-t5871.html#p42663" title="permalink">#6</a></span>

<div class="content">dirkd - just a quick comment.<br>
<br>
We have tried to improve localisation, especially for live usage, into the design of antiX. We probably still have a way to go and as you have noticed, what worked well enough in antiX-13 may not work as well or works in a different way to antiX-15. When I'm back in Greece to work on antiX, we'll aim to improve this feature further.</div>
</div>
</div>

</div>
</div>
</div>
<div class="action-bar bar-bottom">

<div class="pagination">
6 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>
</div>
</div>
</div>
<div class="scrollToTopText"><a href="#top">goto top of page</a></div>

</div>
</body></html>
