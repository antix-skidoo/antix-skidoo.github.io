<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>Suggestion - ROX-Filer Edit Text File as Root - antiX oldforums archive</title>
   
<link rel="stylesheet" href="../aaa_style.css">
<script type="text/javascript" src ="../aaa_oldforums.js"></script>
</head>
<body>
<div id="wrap" class="wrap">
<a id="top" class="top-anchor" accesskey="t"></a>

<div id="inner-wrap">
<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks clear-after" role="menubar">
<li class="scroll-breadcrumbs breadcrumbs">
<span class="crumb"><a href="./index.html" accesskey="h" data-navbar-reference="index"><span>antiX - oldforums archive</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./orphaned-posts-f27/index.html"><span>Orphaned Posts</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./development-old-f39/index.html"><span>Development (Old)</span></a></span>
</li>
</ul>

<div id="page-body" class="page-body" role="main">
<div class="postprofile_container postprofile_Left">
<div>
<div class="topictitleheader"><span class="statictopictitle">topic title: </span><span class="topic-titleb"><a href="./suggestion-rox-filer-edit-text-file-as-root-t4570.html">Suggestion - ROX-Filer Edit Text File as Root</a></div>
<div class="pagination">
6 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>

<div class="action-bar bar-top">
</div>
<div class="viewtopic_wrapper">
<div id="p_30859" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile30859">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,028</span></div>

</div>
</div>
<span class="username">SamK</span>
</dt>
<dd class="profile-joined">Joined: 21 Aug 2011</dd>
</dl>
<div class="postbody">
<div id="post_content30859">
<time datetime="2013-08-29T14:25">posted: 2013-08-29 &nbsp; 14:25</time>
<span class="permalink"><a href="./suggestion-rox-filer-edit-text-file-as-root-t4570.html#p30859" title="permalink">#1</a></span>

<div class="content">When right-clicking on a text file owned by root, antiX-13.1 displays an option <em>Edit As Root</em>. This is a useful feature, but it does not work as currently implemented. An error message is generated <em>Failed to execute child process...Edit As Root (Permission denied)</em>.<br>
<br>
It can be made to work as follows.<br>
<br>
<br>
<strong>Remove the Non-Working Entry from the Right-Click Menu</strong>
<ol style="list-style-type: decimal">
<li>Move the file <br>
/home/USERNAME/config/rox.sourceforge.net/SendTo/Edit As Root<br>
to the root of your home directory. <br>
Alternatively, delete it as it is not required.</li></ol>
<br>
<strong>Replace the Non-Working File</strong>
<ol style="list-style-type: decimal">
<li>Download the attached file edit-as-root.sh.zip</li>
<li>As root extract it from the zip archive to /usr/local/bin/edit-as-root.sh</li></ol>
<br>
<strong>Set Up the Right Click Menu in ROX-Filer</strong><br>
To ROX an executable script and a configuration file are two different types of text file. The following steps create a context sensitive entry for each of them. This approach ensures that the entry is only displayed when a text file is highlighted in ROX-Filer and hidden when a different file type is selected.<br>
<br>
Do the following as your normal user in ROX-Filer
<ol style="list-style-type: decimal">
<li>Create a two hidden directories in /home/USERNAME/.config/rox.sourceforge.net/SendTo/<br>
.application_x-shellscript<br>
.text_plain</li>
<li>Open the directory .application_x-shellscript</li>
<li>Drag-n-drop /usr/local/bin/edit-as-root.sh to it and create a symlink</li>
<li>Right-Click on the symlink--&gt;Rename it <em>Edit as root</em> (i.e. no hyphens or .sh)</li>
<li>Right-Click on the symlink--&gt;Set icon. Select <em>Only for the file...</em></li>
<li>Drag-n-drop the icon file /usr/share/pixmaps/leafpad.png to the set icon box</li>
<li>Open the directory .text_plain. Repeat steps 3 to 6 inclusive.</li></ol>
<span class="inline-attachment">
<dl class="fileimage">

<dd>Screen shot showing text file owned by root highlighted in ROX-Filer with the right-click menu open</dd>
</dl>
<dd>Screen shot showing text file owned by root highlighted in ROX-Filer with the right-click menu open</dd>
</span></div>
</div>
</div>
</div>

</div>
</div>
<div id="p_30865" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile30865">
<dt class="has-profile-rank has-avatar avatar-username">
<span class="username">anticapitalista</span>
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 5,955</span></div>

</div>
</div>
</dt>
<dd class="profile-rank">Site Admin</dd>
<dd class="profile-joined">Joined: 11 Sep 2007</dd>
</dl>
<div class="postbody">
<div id="post_content30865">

<time datetime="2013-08-29T16:35">posted: 2013-08-29 &nbsp; 16:35</time>
<span class="permalink"><a href="./suggestion-rox-filer-edit-text-file-as-root-t4570.html#p30865" title="permalink">#2</a></span>

<div class="content">I can't check for antiX-13.1 as I'm currently runing antiX-13 live from a usb stick, and the edit as root works ok here.</div>
</div>
</div>

</div>
</div>
<div id="p_30866" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile30866">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,028</span></div>

</div>
</div>
<span class="username">SamK</span>
</dt>
<dd class="profile-joined">Joined: 21 Aug 2011</dd>
</dl>
<div class="postbody">
<div id="post_content30866">

<time datetime="2013-08-29T18:09">posted: 2013-08-29 &nbsp; 18:09</time>
<span class="permalink"><a href="./suggestion-rox-filer-edit-text-file-as-root-t4570.html#p30866" title="permalink">#3</a></span>

<div class="content"><blockquote><div><cite>anticapitalista wrote:</cite>I can't check for antiX-13.1 as I'm currently runing antiX-13 live from a usb stick, and the edit as root works ok here.</div></blockquote>I don't have a version 13.0 left here so can't try it.<br>
<br>
I have just tried an installed antiX-12-Full and it works OK on that. I have seen the failure on two different 13.1 systems. One is elsewhere as it belongs to someone else so cannot be used for elimination purposes. <br>
<br>
I will see if I can find a possible cause as the error is consistent on the test rig.<br>
<br>
On a tangential note, might it be better to put executable scripts in /usr/local/bin and symlink to ~/.config/rox.sourceforge.net/SendTo/?<br>
<br>
<br>
<br>
Edit<br>
I may have found something. <br>
Changing the ownership of <em>~/.config/rox.sourceforge.net/SendTo/.text_plain/Edit As Root</em> affects whether the error message is obtained. When it is owned by the user all is OK. When it is owned by root the error is seen. Perhaps someone running an installed version of 13.1 might confirm this.</div>
</div>
</div>

</div>
</div>
<div id="p_30870" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile30870">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content30870">

<time datetime="2013-08-29T20:37">posted: 2013-08-29 &nbsp; 20:37</time>
<span class="permalink"><a href="./suggestion-rox-filer-edit-text-file-as-root-t4570.html#p30870" title="permalink">#4</a></span>

<div class="content">I have a default installation of antix 13.1 set up fresh, no changes at all to the system.<br>
<br>
I tried opening /etc/group and"edit as root" worked as expected. ~/.config/rox.sourceforge.net/SendTo/.text_plain/Edit As Root is owned by the user. changing the ownership to root: root (user: group) did not affect its operation and no error messages were obtained.</div>
</div>
</div>

</div>
</div>
<div id="p_30880" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile30880">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,028</span></div>

</div>
</div>
<span class="username">SamK</span>
</dt>
<dd class="profile-joined">Joined: 21 Aug 2011</dd>
</dl>
<div class="postbody">
<div id="post_content30880">

<time datetime="2013-08-30T10:53">posted: 2013-08-30 &nbsp; 10:53</time>
<span class="permalink"><a href="./suggestion-rox-filer-edit-text-file-as-root-t4570.html#p30880" title="permalink">#5</a></span>

<div class="content"><blockquote><div><cite>dolphin_oracle wrote:</cite>I have a default installation of antix 13.1 set up fresh, no changes at all to the system.<br>
<br>
I tried opening /etc/group and"edit as root" worked as expected. ~/.config/rox.sourceforge.net/SendTo/.text_plain/Edit As Root is owned by the user. changing the ownership to root: root (user: group) did not affect its operation and no error messages were obtained.</div></blockquote>Thanks that provided another piece of the puzzle. I too created a fresh install (testrig2) and obtain the same result as you, i.e. the default <em>Edit As Root</em> is able to work on files owned by root.<br>
<br>
<br>
On testrig2 the ownership of <br>
~/.config/rox.sourceforge.net/SendTo/.text_plain/Edit As Root <br>
is builder:users. A minor point but should this be builder:builder?. The latter reflects the ownership ROX creates when symlinks are used rather than the script itself.<br>
<br>
On testrig1 <em>Edit As Root</em> is owned by root. Additionally, the executable bit is not set for group or other. In this state the error message is generated. Changing the ownership to USER clears the problem as reported earlier. I am completely unaware of how this occurred.<br>
<br>
On testrig2 the permissions on <em>Edit As Root</em> are rwxr-xr-x. When the more usual ROX symlink method is used the permissions are rwxrwxrwx.<br>
<br>
<br>
<br>
<strong>An additional issue</strong> is now seen using the default <em>Edit As Root</em>. When the text file does not contain spaces it works as expected. When spaces are present it fails. Perhaps someone might confirm the following.<br>
<br>
Diagnostic Test
<ol style="list-style-type: decimal">
<li>Create two identical plain text files containing"lorem ipsum"</li>
<li>Name one"testfile1.txt", the other"test file 1.txt"</li>
<li>Open each in turn via <em>Edit As Root</em></li></ol>
Result
<ol style="list-style-type: decimal">
<li><em>testfile1.txt</em> displays the expected text</li>
<li><em>test file 1.txt</em> displays an empty file</li></ol>
The problem seems to relate to the use of $1 in the default script. The script attached to my opening post uses"$@" to overcome the issue.</div>
</div>
</div>

</div>
</div>
<div id="p_30881" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile30881">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content30881">

<time datetime="2013-08-30T12:30">posted: 2013-08-30 &nbsp; 12:30</time>
<span class="permalink"><a href="./suggestion-rox-filer-edit-text-file-as-root-t4570.html#p30881" title="permalink">#6</a></span>

<div class="content">I can confirm your results with the"testfile1.txt" vs."test file 1.txt". rox edit as root opens a new"text" file called test in the second case.</div>

</div>
</div>

</div>
</div>
</div>
<div class="action-bar bar-bottom">

<div class="pagination">
6 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>
</div>
</div>
</div>
<div class="scrollToTopText"><a href="#top">goto top of page</a></div>

</div>
</body></html>
