<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>Basic command question. - antiX oldforums archive</title>
   
<link rel="stylesheet" href="../aaa_style.css">
<script type="text/javascript" src ="../aaa_oldforums.js"></script>
</head>
<body>
<div id="wrap" class="wrap">
<a id="top" class="top-anchor" accesskey="t"></a>

<div id="inner-wrap">
<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks clear-after" role="menubar">
<li class="scroll-breadcrumbs breadcrumbs">
<span class="crumb"><a href="./index.html" accesskey="h" data-navbar-reference="index"><span>antiX - oldforums archive</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./orphaned-posts-f27/index.html"><span>Orphaned Posts</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./releases-old-f44/index.html"><span>Releases (Old)</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./antix-m8-intifada-f28/index.html"><span>antiX-M8 Intifada!</span></a></span>
</li>
</ul>

<div id="page-body" class="page-body" role="main">
<div class="postprofile_container postprofile_Left">
<div>
<div class="topictitleheader"><span class="statictopictitle">topic title: </span><span class="topic-titleb"><a href="./basic-command-question-t1695.html">Basic command question.</a></div>
<div class="pagination">
5 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>

<div class="action-bar bar-top">
</div>
<div class="viewtopic_wrapper">
<div id="p_10679" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile10679">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,228</span></div>

</div>
</div>
<span class="username">secipolla</span>
</dt>
<dd class="profile-joined">Joined: 15 Jun 2008</dd>
</dl>
<div class="postbody">
<div id="post_content10679">
<ul class="post-buttons">
<li class="dropdown-container">
<a href="javascript:void(0");" class="dropdown-trigger button button-icon-only"></a>
<div class="dropdown">
<div class="pointer">
<div class="pointer-inner"></div>
</div>
<ul class="dropdown-contents dropdown-nonscroll">
<li>
<a href="/groups/antix/app.php/post/10679/report" title="Report this post" class="button-icon-only"><span>Report this post</span></a>
</li>
</ul>
</div>
</li>
</ul>
<p class="author">
<a href="./basic-command-question-t1695.html#p10679" title="Post"> 10 May 2009, 11:59 <span style="padding-left:10px">#1</span></a>
<time class="hide" datetime="2009-05-10 &nbsp; 11:59">2009-05-10 &nbsp; 11:59</time>
 </p>
<div class="content">Hi, I would like to put a button in the toolbar to restart my network with just one click. Besides the icon info I thought of: <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>/usr/bin/su-to-root -c /etc/init.d/networking restart</code></pre></div>
I'm completely novice in this, would that work? I would like something that would not prompt for password, if possible (like when Synaptic is opened).</div>
</div>
</div>

</div>
</div>
<div id="p_10684" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile10684">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 25</span></div>

</div>
</div>
<span class="username">vassorado</span>
</dt>
<dd class="profile-joined">Joined: 25 Aug 2008</dd>
</dl>
<div class="postbody">
<div id="post_content10684">

<ul class="post-buttons">
<li class="dropdown-container">
<a href="javascript:void(0");" class="dropdown-trigger button button-icon-only"></a>
<div class="dropdown">
<div class="pointer">
<div class="pointer-inner"></div>
</div>
<ul class="dropdown-contents dropdown-nonscroll">
<li>
<a href="/groups/antix/app.php/post/10684/report" title="Report this post" class="button-icon-only"><span>Report this post</span></a>
</li>
</ul>
</div>
</li>
</ul>
<time datetime="2009-05-10T20:12">posted: 2009-05-10 &nbsp; 20:12</time>
<span class="permalink"><a href="./basic-command-question-t1695.html#p10684" title="permalink">#2</a></span>

<div class="content">Hi, edit your .icewm/taskbar and add the folowing line:<br>
<br>
prog"Reset Network" /usr/share/icons/gTangish-2.0a1/32x32/status/connect_established.png gksu /etc/init.d/networking restart<br>
<br>
you can use the control center to have acess to the file <br>
"reset network" is an alternate text for the icon image<br>
/usr/share/icons/gTangish-2.0a1/32x32/status/connect_established.png - is the patch to the icon<br>
gksu - is the windows that asks for root pass<br>
/etc/init.d/networking restart - is the comand that restartthe network (as you already know)<br>
<br>
dont forget to restart your icewm (antix -&gt; logout -&gt; restart icewm)<br>
<br>
Have Fun<br>
<br>
Sorry i misread"would not prompt for password"<br>
<br>
Do you usually have to restart your network at each boot so it can work?<br>
if that is the case you can put"/etc/init.d/networking restart" at your /etc/rc.local<br>
<br>
the file should look like this:<br>
#!/bin/sh -e<br>
#<br>
# rc.local<br>
#<br>
<br>
/etc/init.d/networking restart<br>
<br>
# make sure splashy is stopped<br>
killall splashy &gt;/dev/null 2&gt;&amp;1<br>
<br>
exit 0<br>
<br>
the line to put at the taskbar will work without the gksu if you grant your user acess to network controls (but i dont know if this is in a group or editing policy kit)</div>
</div>
</div>

</div>
</div>
<div id="p_10686" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile10686">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,520</span></div>

</div>
</div>
<span class="username">eriefisher</span>
</dt>
<dd class="profile-joined">Joined: 07 Oct 2007</dd>
</dl>
<div class="postbody">
<div id="post_content10686">

<ul class="post-buttons">
<li class="dropdown-container">
<a href="javascript:void(0");" class="dropdown-trigger button button-icon-only"></a>
<div class="dropdown">
<div class="pointer">
<div class="pointer-inner"></div>
</div>
<ul class="dropdown-contents dropdown-nonscroll">
<li>
<a href="/groups/antix/app.php/post/10686/report" title="Report this post" class="button-icon-only"><span>Report this post</span></a>
</li>
</ul>
</div>
</li>
</ul>
<time datetime="2009-05-10T22:59">posted: 2009-05-10 &nbsp; 22:59</time>
<span class="permalink"><a href="./basic-command-question-t1695.html#p10686" title="permalink">#3</a></span>

<div class="content">You could do as you mentioned by using sudo instead of su to call the command. First you would need to edit your sudoers as root file with the command visudo. Add this line at the bottom.
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>%users All=(root) NOPASSWD: /etc/init.d/networking restart</code></pre></div>
Save and exit.<br>
<br>
Then for your"button" the command would be:
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>sudo /etc/init.d/networking restart</code></pre></div>
Could you please tell us why you need to restart you network?</div>
</div>
</div>

</div>
</div>
<div id="p_10694" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile10694">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,228</span></div>

</div>
</div>
<span class="username">secipolla</span>
</dt>
<dd class="profile-joined">Joined: 15 Jun 2008</dd>
</dl>
<div class="postbody">
<div id="post_content10694">

<ul class="post-buttons">
<li class="dropdown-container">
<a href="javascript:void(0");" class="dropdown-trigger button button-icon-only"></a>
<div class="dropdown">
<div class="pointer">
<div class="pointer-inner"></div>
</div>
<ul class="dropdown-contents dropdown-nonscroll">
<li>
<a href="/groups/antix/app.php/post/10694/report" title="Report this post" class="button-icon-only"><span>Report this post</span></a>
</li>
</ul>
</div>
</li>
</ul>
<time datetime="2009-05-11T15:15">posted: 2009-05-11 &nbsp; 15:15</time>
<span class="permalink"><a href="./basic-command-question-t1695.html#p10694" title="permalink">#4</a></span>

<div class="content">Thank you vassorado and eriefisher.<br>
<br>
eriefisher, I posted this issue I have a few days or week ago. I see the dhcp connecting alright at boot time but for some reason, after slim and login I have either to restart network (what I've been doing) or do any operation that requires inputing the password for it to activate/reactivate the network. This happens also in the newer Knoppix live-cd (6.0), it has the 'network-manager' applet but I have to restart the 'networking' service like in antiX or else it wont connect. In ubuntu, SliTaz, goblinX and I think Puppy too, auto-dhcp works alright.<br>
<br>
Just to mention, I made this <div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>#!/bin/bash 
/usr/bin/su-to-root -c /etc/init.d/networking restart</code></pre></div> to test and it worked when clicked after the file permission was changed to be executable (although I suspect that it may have worked not by restarting the service but simply by having triggered a 'root' action).<br>
<br>
I think I'll try vassorado's tip for starting it automatically, as it's what I'm looking for, then next time I say if it's been ok.</div>
 </div>
</div>

</div>
</div>
<div id="p_10720" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile10720">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,228</span></div>

</div>
</div>
<span class="username">secipolla</span>
</dt>
<dd class="profile-joined">Joined: 15 Jun 2008</dd>
</dl>
<div class="postbody">
<div id="post_content10720">

<ul class="post-buttons">
<li class="dropdown-container">
<a href="javascript:void(0");" class="dropdown-trigger button button-icon-only"></a>
<div class="dropdown">
<div class="pointer">
<div class="pointer-inner"></div>
</div>
<ul class="dropdown-contents dropdown-nonscroll">
<li>
<a href="/groups/antix/app.php/post/10720/report" title="Report this post" class="button-icon-only"><span>Report this post</span></a>
</li>
</ul>
</div>
</li>
</ul>
<time datetime="2009-05-12T11:27">posted: 2009-05-12 &nbsp; 11:27</time>
<span class="permalink"><a href="./basic-command-question-t1695.html#p10720" title="permalink">#5</a></span>

<div class="content">Ok, adding /etc/init.d/networking restart at /etc/rc.local worked. The point now is that it starts networking twice at boot time, the first at 'configuring network interfaces...' (the original one) and then again at the end of boot. So it seems it had something to do with the boot sequence.<br>
I'm thinking now of disabling the first start of network - maybe at 'Choose Startup Services'? Then maybe could change to '/etc/init.d/networking start' in /etc/rc.local<br>
<br>
I would appreciate your advice.</div>
</div>
</div>

</div>
</div>
</div>
<div class="action-bar bar-bottom">

<div class="pagination">
5 posts
&bull; Page <strong>1</strong> of <strong>1</strong>
</div>
</div>
</div>
</div>
</div>
<div class="scrollToTopText"><a href="#top">goto top of page</a></div>

</div>
</body></html>
