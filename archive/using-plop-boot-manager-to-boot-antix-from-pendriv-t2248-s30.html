<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>Using plop boot manager to boot antiX from pendrive - Page 3 - antiX oldforums archive</title>
   
<link rel="stylesheet" href="../aaa_style.css">
<script type="text/javascript" src ="../aaa_oldforums.js"></script>
</head>
<body>
<div id="wrap" class="wrap">
<a id="top" class="top-anchor" accesskey="t"></a>

<div id="inner-wrap">
<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks clear-after" role="menubar">
<li class="scroll-breadcrumbs breadcrumbs">
<span class="crumb"><a href="./index.html" accesskey="h" data-navbar-reference="index"><span>antiX - oldforums archive</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./antix-development-f24/index.html"><span>antiX-development</span></a> &raquo;&raquo; </span>

<span class="crumb"><a href="./documentation-f18/index.html"><span>Documentation</span></a></span>
</li>
</ul>

<div id="page-body" class="page-body" role="main">
<div class="postprofile_container postprofile_Left">
<div>
<div class="topictitleheader"><span class="statictopictitle">topic title: </span><span class="topic-titleb"><a href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248-s30.html">Using plop boot manager to boot antiX from pendrive</a></div>
<div class="pagination">
44 posts
<ul>
<li class="arrow previous"><span class="jumptopagez">jump to page: </span><a class="button button-icon-only" href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248-s15.html" rel="prev" role="button"><span class="sr-only">Previous</span></a></li>
<li><a class="button" href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248.html" role="button">1</a></li>
<li><a class="button" href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248-s15.html" role="button">2</a></li>
<li class="active"><span>3</span></li>
</ul>
</div>
</div>


<div class="viewtopic_wrapper">
<div id="p_14716" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile14716">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,228</span></div>

</div>
</div>
<span class="username">secipolla</span>
</dt>
<dd class="profile-joined">Joined: 15 Jun 2008</dd>
</dl>
<div class="postbody">
<div id="post_content14716">
<time datetime="2010-02-24T20:34">posted: 2010-02-24 &nbsp; 20:34</time>
<span class="permalink"><a href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248-s30.html#p14716" title="permalink">#31</a></span>

<div class="content">Hi, d.o.<br>
I can't test this now because I'm on dial-up. But if you have time and are willing then you could ask for support and a clue at 
<br>========= SCRAPER REMOVED AN EMBEDDED LINK HERE ===========<br>url was:"http://techpatterns.com/forums/forum-33.html"<br>linktext was:"http://techpatterns.com/forums/forum-33.html"<br>====================================<br>
" onclick="window.open(this.href);return false</div>
</div>
</div>

</div>
</div>
<div id="p_14717" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile14717">
<dt class="has-profile-rank has-avatar avatar-username">
<span class="username">anticapitalista</span>
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 5,955</span></div>

</div>
</div>
</dt>
<dd class="profile-rank">Site Admin</dd>
<dd class="profile-joined">Joined: 11 Sep 2007</dd>
</dl>
<div class="postbody">
<div id="post_content14717">

<time datetime="2010-02-24T20:44">posted: 2010-02-24 &nbsp; 20:44</time>
<span class="permalink"><a href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248-s30.html#p14717" title="permalink">#32</a></span>

<div class="content">d.o, <br>
I think (but I might be wrong) that smxi will actually install the kernel, but it cannot write it to the menu.lst as the menu.lst is in the 'live' part of the persistent/frugal boot.<br>
The second problem is that you won't be able to boot frugal/persistent with a completely new kernel unless you make the necessary changes to the initrd.img (not at all easy, I haven't succeeded yet).<br>
<br>
So, to put it simply, you won't be able to use a non-MEPIS kernel for live persistent/frugal.<br>
However, if you plan to install to hard drive, you will be able to install a non-MEPIS kernel using persistence, reboot and install to hard drive and the new kernel will appear in the grub menu.</div>
</div>
</div>
<div class="back2top">

</div>
</div>
</div>
<div id="p_14718" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile14718">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content14718">

<time datetime="2010-02-24T21:11">posted: 2010-02-24 &nbsp; 21:11</time>
<span class="permalink"><a href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248-s30.html#p14718" title="permalink">#33</a></span>

<div class="content">anti,<br>
<br>
good to know. For me, the smxi script failed right at the start of the advanced kernel options, so I didn't even get to the point where I could choose a kernel. I actually knew the menu.lst was in the iso...don't know why that didn't occur to me.</div>
</div>
</div>

</div>
</div>
<div id="p_14738" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile14738">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content14738">

<time datetime="2010-02-26T02:35">posted: 2010-02-26 &nbsp; 02:35</time>
<span class="permalink"><a href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248-s30.html#p14738" title="permalink">#34</a></span>

<div class="content">hey guys.<br>
<br>
I broke out the old sony laptop, which has a floppy drive and usb 1.1. I created the plop floppy per instructions and that part works fine. However, I went a little off the beaten path to check out the kernel situation. <br>
<br>
1. From another computer (as it happens, also with only usb 1.1) I booted from a live cd. I plugged in a"goat" usb pendrive to get its assignment to sda. I then plugged in a second drive (4gb san disk cruzer), now assigned by the live session as sdb. I did a standard FULL install onto sdb, letting the automatic partitioner do its thing.<br>
<br>
2. I tested the stick on a machine with a bios capable of booting usb. This didn't go well, as I didn't get past the grub loader. Turns out I needed to modify the hd(3,0) line in menu.lst to hd(0,0). This allowed the machine to boot from the full antix installation on the stick.<br>
<br>
3. x wouldn't start. this is because the monitor's from the different machines I used were not the same. I ran Xorg -configure to generate a new xorg.conf file, and copied that over the old one (backing up the original of course). Since you need to be root to do the Xorg -configure, the new file is actually created in /root)
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code># Xorg -configure
# cp /etc/X11/xorg.conf /etc/X11/xorg.conf.old
# cp /root/xorg.conf.new /etc/X11/xorg.conf
# exit
$ startx
</code></pre></div>
now I have an operating X. Time to try it out on the old sony.<br>
<br>
4. putting the plop floppy in and plugging in the usb stick to the usb 1.1 port, I booted up antix. The plop menu came up, and I selected usb. Then, to my surprise, antix booted! Same stock kernel, no changes to config files. The only snafu was I had to do the Xorg -configure steps again for the third machine. <br>
<br>
I'm posting this from the antix 8.5 rc4 running off a usb 1.1 key from a computer that can't boot usb.<br>
<br>
can't install, because the antix I'm using is already installed on the stick,, but I think we can rule out the kernel as our problem. Its got to be something in the"live" setup.<br>
<br>
Hope this helps.<br>
<br>
D.O. <br>
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>dave@dave:~$ inxi -F
System:    Host dave Kernel 2.6.32-1-mepis-smp i686 (32 bit) Distro antiX-M8.5 Marek Edelman 16 February 2010
CPU:       Single core AMD Duron (UP) cache 64 KB flags (sse) bmips 1100.8 clocked at 549.983 MHz 
Graphics:  Card ATI Rage Mobility P/M AGP 2x X.Org 1.6.5 Res: 1024x768@85.0hz 
           GLX Renderer Software Rasterizer GLX Version 2.1 Mesa 7.6.1 Direct Rendering Yes
Audio:     Card VIA VT82C686 AC97 Audio Controller driver VIA 82xx Audio at ports 1000 1c54 1c50 BusID: 00:07.5
           Sound: Advanced Linux Sound Architecture Version 1.0.21
Network:   Card-1 Realtek RTL-8139/8139C/8139C+ driver 8139too v: 0.9.28 at port 1800 BusID: 00:10.0
           Card-2 RaLink RT2561/RT61 802.11g PCI driver rt61pci v: 2.3.0 BusID: 02:00.0
Disks:     HDD Total Size: 19.1GB (9.3% used) 1: /dev/sda HITACHI_DK23CA 15.1GB 
           2: USB /dev/sdb SanDisk_Cruzer 4.0GB 
Partition: ID:/ size: 3.2G used: 1.7G (56%) fs: ext3 ID:swap-1 size: 0.57GB used: 0.00GB (0%) fs: swap 
           ID:swap-2 size: 0.56GB used: 0.00GB (0%) fs: swap 
Info:      Processes 91 Uptime 25 min Memory 104.4/501.1MB Runlevel 5 Client Shell inxi 1.4.5 
</code></pre></div></div>
</div>
</div>

</div>
</div>
<div id="p_14741" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile14741">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content14741">

<time datetime="2010-02-26T14:56">posted: 2010-02-26 &nbsp; 14:56</time>
<span class="permalink"><a href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248-s30.html#p14741" title="permalink">#35</a></span>

<div class="content">I have now used my"full installed" pendrive to install grub to the hard disk. since no linux was installed (I had created a blank ext3 partition), the mepis system repair tool failed while writing menu.lst. I copied and modified the appropriate entry from my working pendrive to the boot/grub on the ext3 partition (sda6). I set up the fromiso boot per the antix wiki on the hard disk. Everything starts, goes through a bunch of hardware detection, then complains that it can't find the antix filesystem, and drops to a limited shell.<br>
<br>
***here's a copy of the menu.lst file****<br>
<br>
title antiX<br>
root (hd0,4)<br>
kernel /antix/vmlinuz vga=791 fromhd=/dev/sda5 fromiso=/antix/antiX-M8.5-rc4.iso en xres=1024x768<br>
initrd /antix/initrd.gz<br>
boot</div>
</div>
</div>

</div>
</div>
<div id="p_14745" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile14745">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 4,164</span></div>

</div>
</div>
<span class="username">rokytnji</span>
</dt>
<dd class="profile-joined">Joined: 20 Feb 2009</dd>
</dl>
<div class="postbody">
<div id="post_content14745">

<time datetime="2010-02-26T23:56">posted: 2010-02-26 &nbsp; 23:56</time>
<span class="permalink"><a href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248-s30.html#p14745" title="permalink">#36</a></span>

<div class="content"><blockquote class="uncited"><div>Hope this helps.</div></blockquote>
You betcha dolphin_oracle. Just got home from surgery and saw your post and just had to say yipeee. Kinda a convulsed way to get AntiX installed via Plop. But it works, darn it. Probably scare some folks off with the hoops they will need to use to install. But at least you were successful. Thanks a whole bunch and congratulations. Better than I did. I will be recuping for the next 3 weeks. So If I don't post much. You'll know why. Hot Damn, AntiX 8.5 can be installed via plop Boot manager and USB 1.1. What a wonderment.<br>
<a href="http://www.mysmiley.net/free-adult-smileys.php" class="postlink"><img src="http://www.mysmiley.net/imgs/smile/jumping/jumping0045.gif" class="postimage" alt="Image"></a></div>
</div>
</div>

</div>
</div>
<div id="p_14749" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile14749">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content14749">

<time datetime="2010-02-27T01:10">posted: 2010-02-27 &nbsp; 01:10</time>
<span class="permalink"><a href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248-s30.html#p14749" title="permalink">#37</a></span>

<div class="content">well, it boots with plop, I haven't installed yet. I'm trying to set up a fromiso boot using the grub menu.lst on the pendrive. That part I've got working, but I haven't tried install yet. In fact, I"m running the fromiso right now, but not with the fromiso cheat code. I haven't got that to work at all. I ended up extracting the antiX directory from the antix iso, and modifying the menu.lst as so...<br>
<br>
title antiX test<br>
kernel (hd1,4)/antiX/vmlinuz init=/etc/init apm=power-off vga=791 <br>
initrd (hd1,4)/antiX/initrd.gz<br>
boot<br>
<br>
the extracted antiX folder is residing in the root of /dev/sda5. You use (hd1,4) in the menu.lst since grub is actually running from sdb, which grub considers to be <br>
(hd0,0).<br>
<br>
this is from some mepis wiki articles on booting from iso. I don't think I actually need the init=/etc/init line, but I'm not ommiting it just yet. So far, I've only used tools available on the antix cd.<br>
<br>
so for now, I'm currently booting a plop floppy, to a usb pendrive grub, which in turns boots a fromiso version of antix from the hard drive sda5. I'm going to try to install to sda6 as soon as I get a little more time.<br>
<br>
and I'm glad to hear your you back so soon. Get well, rok!</div>
</div>
</div>

</div>
</div>
<div id="p_14750" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile14750">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content14750">

<time datetime="2010-02-27T03:41">posted: 2010-02-27 &nbsp; 03:41</time>
<span class="permalink"><a href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248-s30.html#p14750" title="permalink">#38</a></span>

<div class="content">just ran the installer from my setup as described above. I now have a working antix 8.5 rc4 with grub installed on the sda mbr. no issues with the install at all.<br>
<br>
so summary.<br>
<br>
1. made a"full install" antix pendrive.<br>
2. made a plop boot floppy.<br>
3. used the plop boot floppy and the"full install" pendrive to repartition the hard drive in my old sony, <br>
4. using the plop boot floppy and the"full install" pendrive, I set up the"fromiso" boot environment detailed in the post above.<br>
5. using the plop boot floppy, grub on the pendrive, I booted the"fromiso" and installed to a different parition on the hard drive. The"fromiso" cheat code never worked for me. Installed grub in the usual way to the hard drive mbr.<br>
6. rebooted without the pendrive or the plop floppy into my current installed antix environment (from which I'm now posting).<br>
<br>
I'm now thinking it may be easier for an end user to simply make the"fromiso" environment directly on the pendrive. I may try that next.</div>
</div>
</div>

</div>
</div>
<div id="p_14753" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile14753">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content14753">

<time datetime="2010-02-27T15:14">posted: 2010-02-27 &nbsp; 15:14</time>
<span class="permalink"><a href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248-s30.html#p14753" title="permalink">#39</a></span>

<div class="content">Ok, new, simpler procedure. From another computer running linux, prepare your usb key.<br>
<br>
1. format the key ext2 or ext3.<br>
2. install grub to the key using the Mepis System Assistant.<br>
3. mount the antix iso file and extract the antiX directory to the root directory of the usb key.<br>
4. from the iso, extract vmlinuz and initrd.gz to the antiX folder on the usb key.<br>
5. modify the menu.lst in the /boot/grub of the usb key to contain the following entry:<br>
<br>
title antiX test<br>
kernel (hd0,0)/antiX/vmlinuz init=/etc/init apm=power-off vga=791 <br>
initrd (hd0,0)/antiX/initrd.gz<br>
boot<br>
<br>
6. use your plop floppy to boot the usb key.<br>
<br>
worked out for me this morning, and a whole lot simpler than my first attempt.</div>
<div class="notice">
Last edited by <b>dolphin_oracle</b> on 30 Sep 2010, 23:48, edited 1 time in total.
</div>
</div>
</div>

</div>
</div>
<div id="p_16597" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile16597">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,228</span></div>

</div>
</div>
<span class="username">secipolla</span>
</dt>
<dd class="profile-joined">Joined: 15 Jun 2008</dd>
</dl>
<div class="postbody">
<div id="post_content16597">

<time datetime="2010-07-18T21:34">posted: 2010-07-18 &nbsp; 21:34</time>
<span class="permalink"><a href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248-s30.html#p16597" title="permalink">#40</a></span>

<div class="content">Hey d.o. only now I read more carefully your posts, so it seems that it hasn't got to do with USB 1.x modules.<br>
One would have to have a look and compare the way antix2usb sets up the fromiso boot with the way you did, like see if it puts the files in a different location or if it's just the way menu.lst is set up. And then try to figure why the antix2usb way doesn't work with slow devices (like we've even seen that even the cd gives that error in some old machines).<br>
<br>
And, yes, I'm talking about the live environment, I knew already that PLoP would boot a full installation in the flash stick.<br>
<br>
-Also, did you try to make an extra partition in the stick and set up persistence?</div>
</div>
</div>

</div>
</div>
<div id="p_16600" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile16600">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content16600">

<time datetime="2010-07-18T23:12">posted: 2010-07-18 &nbsp; 23:12</time>
<span class="permalink"><a href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248-s30.html#p16600" title="permalink">#41</a></span>

<div class="content">secipolla,<br>
<br>
I did not try to set up persistence (I don't see why you couldn't). My experiences above were with rc4. I haven't tried it again with final.<br>
<br>
I think you are on to something with the fromiso cheatcode/setup, but I could never make it work with the usb 1.1 only computer without doing it manually.</div>
</div>
</div>

</div>
</div>
<div id="p_17167" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile17167">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content17167">

<time datetime="2010-09-02T03:04">posted: 2010-09-02 &nbsp; 03:04</time>
<span class="permalink"><a href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248-s30.html#p17167" title="permalink">#42</a></span>

<div class="content">Update on Plop<br>
<br>
I made a unetbootin usb flash drive from the latest antix core -b1 iso.. Once I got past the initial boot lines, the system complain that it couldn't start aufs and then proceeded to boot. I realized that it was reading a filesystem file that I had previously place in my data parition while experimenting. That file didn't match the current file system file, but the system booted very strangly from that scratch directory (on my /dev/sda5). I replaced this file with the antiX/antix from the current iso, and the system booted.<br>
<br>
In short, while the kernel from the usb drive was used to start the system, the filesystem it mounted as roof was the system stored on /dev/sda5, not the usb drive (in my case, /dev/sdb1).<br>
<br>
weird. the system failed altogether without a file available on the hard drive (/dev/sda5).<br>
<br>
I really don't know what to do with this, but maybe it might spur a thought out there.</div>
</div>
</div>

</div>
</div>
<div id="p_17185" class="post has-profile bg2">
<div class="inner">
<dl class="postprofile" id="profile17185">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 2,238</span></div>

</div>
</div>
<span class="username">dolphin_oracle</span>
</dt>
<dd class="profile-joined">Joined: 16 Dec 2007</dd>
</dl>
<div class="postbody">
<div id="post_content17185">

<time datetime="2010-09-03T17:39">posted: 2010-09-03 &nbsp; 17:39</time>
<span class="permalink"><a href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248-s30.html#p17185" title="permalink">#43</a></span>

<div class="content">figured out what to do with this information...see this post for a new procedure that may be of use.<br>
<br>
plop-boot-manager-usb-1-1-antix-m8-5-procedure-for-install-t2647.html</div>
</div>
</div>

</div>
</div>
<div id="p_18157" class="post has-profile bg1">
<div class="inner">
<dl class="postprofile" id="profile18157">
<dt class="no-profile-rank has-avatar avatar-username">
<div class="avatar-username-inner">
<div class="thread-user-detail">
<div class="detail-title-numposts"><span class="detail-title-numposts">Posts: 1,308</span></div>

</div>
</div>
<span class="username">BitJam</span>
</dt>
<dd class="profile-joined">Joined: 31 Aug 2009</dd>
</dl>
<div class="postbody">
<div id="post_content18157">

<time datetime="2010-11-17T23:58">posted: 2010-11-17 &nbsp; 23:58</time>
<span class="permalink"><a href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248-s30.html#p18157" title="permalink">#44</a></span>

<div class="content"><blockquote><div><cite>dolphin_oracle wrote:</cite>I realized that it was reading a filesystem file that I had previously place in my data parition while experimenting. That file didn't match the current file system file, but the system booted very strangly from that scratch directory (on my /dev/sda5). I replaced this file with the antiX/antix from the current iso, and the system booted.<br>
<br>
In short, while the kernel from the usb drive was used to start the system, the filesystem it mounted as roof was the system stored on /dev/sda5, not the usb drive (in my case, /dev/sdb1).</div></blockquote>
I ran into this problem a while ago and it drove me crazy for a while. The design flaw is using the /antix/antix (or /mepis/mepis) location for the squashfs file system.<br>
<br>
The problem is that the linuxrc script inside of initrd.gz searches just about every possible partition and stops as soon as it finds /antix/antix. It mounts just about every partition searching for that file. As you've seen, this is fine for the LiveCD because in that case it looks at the cdroms first but it fails when using a LiveUSB if that file already exist on a hard drive partition (which is not unlikely because frugal installs can put the file there). This problem also makes it impossible to boot more than one version of Mepis or antiX from the same LiveUSB.<br>
<br>
The solution I came up with was to use a directory structure for the LiveUSB that is different from the directory structure for the LiveCD. If the LiveUSB directories contain the OS and version number then even if it finds the wrong squashfs file system it will still work because the OS and version number should match.<br>
<br>
Therefore I put everything under: /boot/$OS-$VERSION<br>
<br>
For example: /boot/antiX-M8.5<br>
<br>
The three files I put there are vmlinuz,initrd.gz, and squashfs (the squashfs file is a copy of /antix/antix from the LiveCD). The corresponding Grub entry would be:<br>
<br>
title antiX-M8.5<br>
kernel /boot/antiX-M8.5/vmlinuz bootdir=antiX-M8.5 <br>
initrd /boot/antiX-M8.5/initrd.gz<br>
<br>
The bootdir parameter is saying to look for a file called: /boot/antiX-M8.5/squashfs and use that as the squashfs file system.<br>
<br>
My antix2persist-usb.sh does all of this for you automatically. I've advocated that all LiveUSB scripts should use this superior directory structure but I don't think that was done. People don't work for me so I can't force them to do things in a way that I think is better.</div>
</div>
</div>

</div>
</div>
</div>
<div class="action-bar bar-bottom">

<div class="pagination">
44 posts
<ul>
<li class="arrow previous"><span class="jumptopagez">jump to page: </span><a class="button button-icon-only" href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248-s15.html" rel="prev" role="button"><span class="sr-only">Previous</span></a></li>
<li><a class="button" href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248.html" role="button">1</a></li>
<li><a class="button" href="./using-plop-boot-manager-to-boot-antix-from-pendriv-t2248-s15.html" role="button">2</a></li>
<li class="active"><span>3</span></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="scrollToTopText"><a href="#top">goto top of page</a></div>

</div>
</body></html>
